



<!doctype html>
<html lang="kr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="클립보드로 복사">
      
        <meta name="lang:clipboard.copied" content="클립보드에 복사됨">
      
        <meta name="lang:search.language" content="jp">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="검색어와 일치하는 문서가 없습니다">
      
        <meta name="lang:search.result.one" content="1개의 일치하는 문서">
      
        <meta name="lang:search.result.other" content="#개의 일치하는 문서">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0">
    
    
      
        <title>안드로이드 SDK 연동가이드 - Branch Korea Solutions Engineering</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.572ca0f0.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../../assets/javascripts/modernizr.8c900955.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../css/main.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#sdk" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Branch Korea Solutions Engineering" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Branch Korea Solutions Engineering
              </span>
              <span class="md-header-nav__topic">
                안드로이드 SDK 연동가이드
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="검색" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            검색어를 입력하세요
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Branch Korea Solutions Engineering" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Branch Korea Solutions Engineering
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../" title="Guides" class="md-nav__link">
      Guides
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../migration/" title="Migration" class="md-nav__link">
      Migration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../pages/" title="Translations" class="md-nav__link">
      Translations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../data_feeds/" title="Data Feeds" class="md-nav__link">
      Data Feeds
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../fraud/" title="Fraud" class="md-nav__link">
      Fraud
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">목차</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="공연 연동 가이드" class="md-nav__link">
    공연 연동 가이드
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sdk_1" title="안드로이드 SDK 정보" class="md-nav__link">
    안드로이드 SDK 정보
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" title="샘플 코드 관련 주의사항" class="md-nav__link">
    샘플 코드 관련 주의사항
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" title="브랜치 연동 가이드" class="md-nav__link">
    브랜치 연동 가이드
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" title="링크 설정" class="md-nav__link">
    링크 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" title="브랜치 라이브러리 임포트/설치" class="md-nav__link">
    브랜치 라이브러리 임포트/설치
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#androidmanifestxml" title="AndroidManifest.xml 설정" class="md-nav__link">
    AndroidManifest.xml 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdk_2" title="브랜치 SDK 초기화" class="md-nav__link">
    브랜치 SDK 초기화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" title="세션 초기화" class="md-nav__link">
    세션 초기화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" title="브랜치 레퍼럴 처리" class="md-nav__link">
    브랜치 레퍼럴 처리
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" title="상황별 전달되는 브랜치 레퍼럴 예" class="md-nav__link">
    상황별 전달되는 브랜치 레퍼럴 예
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" title="브랜치 레퍼럴 처리 샘플 코드" class="md-nav__link">
    브랜치 레퍼럴 처리 샘플 코드
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" title="딥링크 처리 샘플 코드" class="md-nav__link">
    딥링크 처리 샘플 코드
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" title="수신된 브랜치 레퍼러 처리 샘플들." class="md-nav__link">
    수신된 브랜치 레퍼러 처리 샘플들.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" title="컨텐츠 트래킹" class="md-nav__link">
    컨텐츠 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" title="사용자 트래킹" class="md-nav__link">
    사용자 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" title="이벤트 트래킹" class="md-nav__link">
    이벤트 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" title="사용자 트래킹 활성화 / 비활성화" class="md-nav__link">
    사용자 트래킹 활성화 / 비활성화
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" title="문제 해결" class="md-nav__link">
    문제 해결
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" title="로깅기능 활성화" class="md-nav__link">
    로깅기능 활성화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" title="브랜치 연동 테스트" class="md-nav__link">
    브랜치 연동 테스트
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" title="딥링크 라우팅" class="md-nav__link">
    딥링크 라우팅
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" title="앱내의 딥링크 라우딩" class="md-nav__link">
    앱내의 딥링크 라우딩
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" title="브랜치링크에 대한 딥링크 테스트" class="md-nav__link">
    브랜치링크에 대한 딥링크 테스트
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application" title="디폴트 Application 클래스 사용" class="md-nav__link">
    디폴트 Application 클래스 사용
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-referrer" title="커스텀 Install Referrer 리시버" class="md-nav__link">
    커스텀 Install Referrer 리시버
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" title="이 링크를 열수 없다는 에러" class="md-nav__link">
    이 링크를 열수 없다는 에러
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initstate_-session_stateinitialising" title="initState_ == SESSION_STATE.INITIALISING 상태에서 멈추어 있을 경우" class="md-nav__link">
    initState_ == SESSION_STATE.INITIALISING 상태에서 멈추어 있을 경우
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="sdk">안드로이드 SDK 연동가이드<a class="headerlink" href="#sdk" title="Permanent link">&para;</a></h1>
<ul>
<li>작성자 : 손보형</li>
<li>업데이트: 2019년 3월 13일</li>
</ul>
<hr />
<h2 id="_1">공연 연동 가이드<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>아래의 공식 가이드와 번역본도 함께 참고 하시기 바랍니다.</p>
<ul>
<li><a href="https://docs.branch.io/apps/android/">영문</a>, <a href="https://bson-branch.github.io/docs/pages/apps/android/">국문</a></li>
</ul>
<h2 id="sdk_1">안드로이드 SDK 정보<a class="headerlink" href="#sdk_1" title="Permanent link">&para;</a></h2>
<ul>
<li>사이즈는 대략 200KB 입니다.</li>
<li>버전 3.0부터는 안드로이드 API LEVEL 16 (Android 4.1, 4.1.1 JELLY_BEAN) 이상을 지원하고 있습니다.<ul>
<li><a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element#ApiLevels">Android API Level 정보</a></li>
</ul>
</li>
<li>버전 3.0부터는 TLS1.2를 사용하여 통신하고 있습니다.</li>
</ul>
<h2 id="_2">샘플 코드 관련 주의사항<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<ul>
<li>이곳의 샘플코드는 <a href="https://play.google.com/store/apps/details?id=com.bson.branchtesters">Branch Testers</a>에 사용된 코드이며 고객사의 이해를 돕기위해서 작성되었습니다.</li>
<li>고객사의 앱구현시에 참고용도로 사용하시고 각각의 앱에 맞게 수정하셔서 사용하시기 바랍니다.</li>
</ul>
<h2 id="_3">브랜치 연동 가이드<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<ul>
<li>
<h3 id="_4">링크 설정<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<ul>
<li>브랜치링크 클릭시 앱설치 유무에 따라 이후 동작에 필요한 정보들을 설정합니다.</li>
<li><a href="https://branch.dashboard.branch.io/link-settings/general">Link Setting : General</a> 페이지에서 설정합니다.</li>
<li><code>I have an Android App</code>을 선택합니다.</li>
<li><code>Do we think the user has the app</code><ul>
<li><code>Yes</code> : <code>Android URI Scheme</code>에 앱의 스킴을 설정합니다.</li>
<li><code>No</code> :<ul>
<li><code>Google Play Search</code> : 앱을 검색해서 설정합니다.</li>
<li><code>Custom URL</code> : 앱 미설치시 랜딩시킬 URL과 안드로이드 패키지 네임을 설정합니다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img alt="image" src="../../img/android_linksettings_general.png" /></p>
</li>
<li>
<h3 id="_5">브랜치 라이브러리 임포트/설치<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>build.gradle</code>내에 Branch SDK를 임포트 합니다.</p>
<div class="codehilite"><pre><span></span><span class="n">apply</span> <span class="n">plugin</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">application</span><span class="err">&#39;</span>

<span class="n">android</span> <span class="o">{</span>
    <span class="n">compileSdkVersion</span> <span class="mi">25</span>
    <span class="n">buildToolsVersion</span> <span class="s">&quot;25.0.2&quot;</span>
    <span class="n">defaultConfig</span> <span class="o">{</span>
        <span class="n">applicationId</span> <span class="s">&quot;com.eneff.branch.example.android&quot;</span>
        <span class="n">minSdkVersion</span> <span class="mi">16</span>
        <span class="n">targetSdkVersion</span> <span class="mi">25</span>
        <span class="n">versionCode</span> <span class="mi">1</span>
        <span class="n">versionName</span> <span class="s">&quot;1.0&quot;</span>
        <span class="n">testInstrumentationRunner</span> <span class="s">&quot;android.support.test.runner.AndroidJUnitRunner&quot;</span>
    <span class="o">}</span>
    <span class="n">buildTypes</span> <span class="o">{</span>
        <span class="n">release</span> <span class="o">{</span>
            <span class="n">minifyEnabled</span> <span class="kc">false</span>
            <span class="n">proguardFiles</span> <span class="nf">getDefaultProguardFile</span><span class="o">(</span><span class="err">&#39;</span><span class="n">proguard</span><span class="o">-</span><span class="n">android</span><span class="o">.</span><span class="na">txt</span><span class="err">&#39;</span><span class="o">),</span> <span class="err">&#39;</span><span class="n">proguard</span><span class="o">-</span><span class="n">rules</span><span class="o">.</span><span class="na">pro</span><span class="err">&#39;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">implementation</span> <span class="nf">fileTree</span><span class="o">(</span><span class="n">dir</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">libs</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">include</span><span class="o">:</span> <span class="o">[</span><span class="err">&#39;</span><span class="o">*.</span><span class="na">jar</span><span class="err">&#39;</span><span class="o">])</span>
    <span class="n">androidTestImplementation</span> <span class="o">(</span><span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">test</span><span class="o">.</span><span class="na">espresso</span><span class="o">:</span><span class="n">espresso</span><span class="o">-</span><span class="n">core</span><span class="o">:</span><span class="mf">2.2.2</span><span class="err">&#39;</span><span class="o">,</span> <span class="o">{</span>
        <span class="n">exclude</span> <span class="n">group</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">support</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">module</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">support</span><span class="o">-</span><span class="n">annotations</span><span class="err">&#39;</span>
    <span class="o">})</span>
    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">support</span><span class="o">:</span><span class="n">appcompat</span><span class="o">-</span><span class="n">v7</span><span class="o">:</span><span class="mf">25.2.0</span><span class="err">&#39;</span>
    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">support</span><span class="o">:</span><span class="n">design</span><span class="o">:</span><span class="mf">25.2.0</span><span class="err">&#39;</span>

<span class="hll">    <span class="c1">// required</span>
</span><span class="hll">    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">io</span><span class="o">.</span><span class="na">branch</span><span class="o">.</span><span class="na">sdk</span><span class="o">.</span><span class="na">android</span><span class="o">:</span><span class="n">library</span><span class="o">:</span><span class="mf">3.</span><span class="o">+</span><span class="err">&#39;</span> <span class="c1">// 브랜치 SDK입니다.</span>
</span>
<span class="hll">    <span class="c1">// optional</span>
</span><span class="hll">    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">support</span><span class="o">:</span><span class="n">customtabs</span><span class="o">:</span><span class="mf">23.3.0</span><span class="err">&#39;</span> <span class="c1">// 크롬탭을 통한 매칭을 위해 필요합니다.</span>
</span><span class="hll">    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">gms</span><span class="o">:</span><span class="n">play</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="n">ads</span><span class="o">:</span><span class="mi">9</span><span class="o">+</span><span class="err">&#39;</span> <span class="c1">// 구글 광고아이디를 수집하기위해 필요합니다.</span>
</span><span class="hll">    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">gms</span><span class="o">:</span><span class="n">play</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="n">appindexing</span><span class="o">:</span><span class="mf">9.</span><span class="o">+</span><span class="err">&#39;</span> <span class="c1">// 안드로이드 App Links를 사용하시고 있는 경우 필요합니다.</span>
</span>
    <span class="n">testImplementation</span> <span class="err">&#39;</span><span class="n">junit</span><span class="o">:</span><span class="n">junit</span><span class="o">:</span><span class="mf">4.12</span><span class="err">&#39;</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="androidmanifestxml">AndroidManifest.xml 설정<a class="headerlink" href="#androidmanifestxml" title="Permanent link">&para;</a></h3>
<ul>
<li>Application클래스의 onCreate()메쏘드 내에서 SDK가 초기화 되어야 하므로 application태그에 해당 Application 클래스를 지정하셔야 합니다.</li>
<li>대쉬보드에서 라이브키와 테스트키 가져온뒤 이를 설정해야 합니다.</li>
<li>
<p>테스트모드는 AndroidManifest.xml에서 설정하실 수도 있고 코드상으로 설정하실수도 있습니다.</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;manifest</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">package=</span><span class="s">&quot;com.eneff.branch.example.android&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.INTERNET&quot;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;application</span>
        <span class="na">android:allowBackup=</span><span class="s">&quot;true&quot;</span>
<span class="hll">        <span class="na">android:name=</span><span class="s">&quot;com.eneff.branch.example.android.CustomApplicationClass&quot;</span>
</span>        <span class="na">android:icon=</span><span class="s">&quot;@mipmap/ic_launcher&quot;</span>
        <span class="na">android:label=</span><span class="s">&quot;@string/app_name&quot;</span>
        <span class="na">android:supportsRtl=</span><span class="s">&quot;true&quot;</span>
        <span class="na">android:theme=</span><span class="s">&quot;@style/AppTheme&quot;</span><span class="nt">&gt;</span>

        <span class="c">&lt;!-- Launcher Activity to handle incoming Branch intents --&gt;</span>    
        <span class="nt">&lt;activity</span>
<span class="hll">            <span class="na">android:name=</span><span class="s">&quot;.LauncherActivity&quot;</span>
</span>            <span class="na">android:launchMode=</span><span class="s">&quot;singleTask&quot;</span>
            <span class="na">android:label=</span><span class="s">&quot;@string/app_name&quot;</span>
            <span class="na">android:theme=</span><span class="s">&quot;@style/AppTheme.NoActionBar&quot;</span><span class="nt">&gt;</span>

            <span class="nt">&lt;intent-filter&gt;</span>
                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.action.MAIN&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.LAUNCHER&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/intent-filter&gt;</span>
<span class="hll">
</span><span class="hll">            <span class="c">&lt;!-- Branch URI Scheme --&gt;</span>
</span><span class="hll">            <span class="nt">&lt;intent-filter&gt;</span>
</span><span class="hll">                <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">&quot;androidexample&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.DEFAULT&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="nt">/&gt;</span>
</span>            <span class="nt">&lt;/intent-filter&gt;</span>
<span class="hll">
</span><span class="hll">            <span class="c">&lt;!-- Branch App Links (optional) --&gt;</span>
</span><span class="hll">            <span class="nt">&lt;intent-filter</span> <span class="na">android:autoVerify=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.DEFAULT&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">&quot;https&quot;</span> <span class="na">android:host=</span><span class="s">&quot;example.app.link&quot;</span> <span class="nt">/&gt;</span>
</span>                <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">&quot;https&quot;</span> <span class="na">android:host=</span><span class="s">&quot;example-alternate.app.link&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/intent-filter&gt;</span>
        <span class="nt">&lt;/activity&gt;</span>
<span class="hll">
</span><span class="hll">        <span class="c">&lt;!-- Branch init --&gt;</span>
</span><span class="hll">        <span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.sdk.BranchKey&quot;</span> <span class="na">android:value=</span><span class="s">&quot;key_live_kaFuWw8WvY7yn1d9yYiP8gokwqjV0Sw&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">        <span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.sdk.BranchKey.test&quot;</span> <span class="na">android:value=</span><span class="s">&quot;key_test_hlxrWC5Zx16DkYmWu4AHiimdqugRYMr&quot;</span> <span class="nt">/&gt;</span>
</span>        <span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.sdk.TestMode&quot;</span> <span class="na">android:value=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- Set to true to use Branch_Test_Key --&gt;</span>
<span class="hll">
</span><span class="hll">        <span class="c">&lt;!-- Branch install referrer tracking (optional) --&gt;</span>
</span><span class="hll">        <span class="nt">&lt;receiver</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.referral.InstallListener&quot;</span> <span class="na">android:exported=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">            <span class="nt">&lt;intent-filter&gt;</span>
</span><span class="hll">                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;com.android.vending.INSTALL_REFERRER&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">            <span class="nt">&lt;/intent-filter&gt;</span>
</span>        <span class="nt">&lt;/receiver&gt;</span>

    <span class="nt">&lt;/application&gt;</span>

<span class="nt">&lt;/manifest&gt;</span>
</pre></div>

</li>
<li>
<p>아래의 값들을 Branch 대쉬보드의 <a href="https://dashboard.branch.io/account-settings/app">App settings</a>와 <a href="https://dashboard.branch.io/link-settings">Link settings</a>의 설정값들로 변경합니다</p>
<ul>
<li><code>androidexample</code></li>
<li><code>example.app.link</code></li>
<li><code>example-alternate.app.link</code></li>
<li><code>key_live_kaFuWw8WvY7yn1d9yYiP8gokwqjV0Sw</code></li>
<li><code>key_test_hlxrWC5Zx16DkYmWu4AHiimdqugRYMr</code></li>
</ul>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Single Task launch mode설정이 필요합니다</p>
<p>안드로이드 시스템상에 SingleTask Activity 인스턴스가 없는 경우, 새로운 Activity가 생성되어 동일 Task의 스택의 최상위에 위치하게 됩니다.
Single Task 모드로 설정할 경우 앱 전체가 재시작되지 않을 것입니다. Single Task모드에서는 Main/Splash Activity가 Activity Stack내에 존재하지 않을때만 Main/Splash Activity를 인스턴트를 생성하게됩니다. Main/Splash Activity가 백그라운드에 존재하는 경우에는 Intent가 전달되면 Activity를 포그라운드로 전환시키게 됩니다. Single Task 모드에 대한 자세한 내용은 <a href="https://developer.android.com/guide/components/activities/tasks-and-back-stack.html#TaskLaunchModes">이곳</a>를 참조하시기 바랍니다.</p>
</div>
</li>
<li>
<h3 id="sdk_2">브랜치 SDK 초기화<a class="headerlink" href="#sdk_2" title="Permanent link">&para;</a></h3>
<ul>
<li><code>CustomApplicationClass.java</code>에 Branch를 추가합니다.</li>
<li>
<p><code>AndroidManifest.xml</code> 파일에서 Application클래스를 지정해주지 않으면 <code>onCreate()</code> 메쏘드는 호출되지 않음에 유의하세요.</p>
</li>
<li>
<p><em>Java</em>
        <div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">com.eneff.branch.example.android</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.app.Application</span><span class="o">;</span>
<span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.Branch</span><span class="o">;</span>
</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomApplicationClass</span> <span class="kd">extends</span> <span class="n">Application</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">();</span>

<span class="hll">        <span class="c1">// Disable Android ID collection.</span>
</span><span class="hll">        <span class="c1">// 구글에서는 구글 광고아이디 수집을 권장하고 있으므로 Android ID 수집기능을 비활성화 합니다.</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">disableDeviceIDFetch</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span>
<span class="hll">        <span class="c1">// Branch logging for debugging</span>
</span><span class="hll">        <span class="c1">// 디버깅목적으로 SDK 내부의 로그를 확인할 필요가 있을 때만 선택적으로 활성화 합니다.</span>
</span><span class="hll">        <span class="c1">// 릴리즈 빌드에서는 꼭 비활성화 하시기 바랍니다.</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">enableLogging</span><span class="o">();</span>
</span>
<span class="hll">        <span class="c1">// Branch object initialization</span>
</span><span class="hll">        <span class="c1">// 브랜치 객체를 초기화 합니다.</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">getAutoInstance</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span>    <span class="o">}</span>
<span class="o">}</span>
</pre></div></p>
</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="sb">``</span><span class="err">`</span><span class="n">java</span> <span class="n">hl_lines</span><span class="o">=</span><span class="s2">&quot;4 10 11 13 14&quot;</span>
<span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">eneff</span><span class="o">.</span><span class="n">branch</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">android</span>

<span class="kn">import</span> <span class="nn">android.app.Application</span>
<span class="kn">import</span> <span class="nn">io.branch.referral.Branch</span>

<span class="k">class</span> <span class="nc">CustomApplicationClass</span> <span class="p">:</span> <span class="n">Application</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">override</span> <span class="n">fun</span> <span class="n">onCreate</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">onCreate</span><span class="p">()</span>

        <span class="o">//</span> <span class="n">Branch</span> <span class="n">logging</span> <span class="k">for</span> <span class="n">debugging</span>
        <span class="n">Branch</span><span class="o">.</span><span class="n">enableLogging</span><span class="p">()</span>

        <span class="o">//</span> <span class="n">Branch</span> <span class="nb">object</span> <span class="n">initialization</span>
        <span class="n">Branch</span><span class="o">.</span><span class="n">getAutoInstance</span><span class="p">(</span><span class="n">this</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="sb">``</span><span class="err">`</span>
</pre></div>


</li>
</ul>
</li>
<li>
<h3 id="_6">세션 초기화<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<ul>
<li><code>LauncherActivity.java</code>에 Branch를 추가합니다.</li>
<li><code>AndroidManifest.xml</code>에서 <code>launchMode</code>를 <code>singleTask</code>로 설정해 주시기 바랍니다.</li>
<li><code>onStart()</code>메쏘드에서 <code>initSession()</code>을 호출하고 <code>BranchReferralInitListener</code>를 통해서 응답을 수신합니다.</li>
<li>
<p><code>onInitFinished()</code> 메쏘드를 JSONObject로 전달되는 응답을 수신합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">com.eneff.branch.example.android</span><span class="o">;</span>

<span class="hll"><span class="kn">import</span> <span class="nn">android.content.Intent</span><span class="o">;</span>
</span><span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.design.widget.FloatingActionButton</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.design.widget.Snackbar</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v7.app.AppCompatActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v7.widget.Toolbar</span><span class="o">;</span>
<span class="hll"><span class="kn">import</span> <span class="nn">android.util.Log</span><span class="o">;</span>
</span><span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.Menu</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.MenuItem</span><span class="o">;</span>

<span class="hll"><span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>
</span>
<span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.Branch</span><span class="o">;</span>
</span><span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.BranchError</span><span class="o">;</span>
</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LauncherActivity</span> <span class="kd">extends</span> <span class="n">AppCompatActivity</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_launcher</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">();</span>

<span class="hll">        <span class="c1">// Branch init</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">(</span><span class="k">new</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchReferralInitListener</span><span class="o">()</span> <span class="o">{</span>
</span><span class="hll">            <span class="nd">@Override</span>
</span><span class="hll">            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">JSONObject</span> <span class="n">referringParams</span><span class="o">,</span> <span class="n">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">                <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">                    <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</span><span class="hll">                    <span class="c1">// Retrieve deeplink keys from &#39;referringParams&#39; and evaluate the values to determine where to route the user</span>
</span><span class="hll">                    <span class="c1">// Check &#39;+clicked_branch_link&#39; before deciding whether to use your Branch routing logic</span>
</span><span class="hll">                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class="hll">                    <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
</span><span class="hll">                <span class="o">}</span>
</span>            <span class="o">}</span>
        <span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">getIntent</span><span class="o">().</span><span class="na">getData</span><span class="o">(),</span> <span class="k">this</span><span class="o">);</span>
<span class="hll">    <span class="o">}</span>
</span><span class="hll">
</span><span class="hll">    <span class="nd">@Override</span>
</span><span class="hll">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onNewIntent</span><span class="o">(</span><span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
</span>        <span class="k">this</span><span class="o">.</span><span class="na">setIntent</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">com.eneff.branch.example.android</span>

<span class="hll"><span class="kn">import</span> <span class="nn">android.content.Intent</span>
</span><span class="kn">import</span> <span class="nn">android.os.Bundle</span>
<span class="kn">import</span> <span class="nn">android.support.design.widget.FloatingActionButton</span>
<span class="kn">import</span> <span class="nn">android.support.design.widget.Snackbar</span>
<span class="kn">import</span> <span class="nn">android.support.v7.app.AppCompatActivity</span>
<span class="kn">import</span> <span class="nn">android.support.v7.widget.Toolbar</span>
<span class="hll"><span class="kn">import</span> <span class="nn">android.util.Log</span>
</span><span class="kn">import</span> <span class="nn">android.view.View</span>
<span class="kn">import</span> <span class="nn">android.view.Menu</span>
<span class="kn">import</span> <span class="nn">android.view.MenuItem</span>

<span class="hll"><span class="kn">import</span> <span class="nn">org.json.JSONObject</span>
</span>
<span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.Branch</span>
</span><span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.BranchError</span>
</span>
<span class="kd">class</span> <span class="nc">LauncherActivity</span> <span class="o">:</span> <span class="n">AppCompatActivity</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">:</span> <span class="n">Bundle</span><span class="o">?)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">)</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_launcher</span><span class="o">)</span>
    <span class="o">}</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">()</span>

<span class="hll">        <span class="c1">// Branch init</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">(</span><span class="n">object</span> <span class="o">:</span> <span class="n">BranchReferralInitListener</span> <span class="o">{</span>
</span><span class="hll">            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">referringParams</span><span class="o">:</span> <span class="n">JSONObject</span><span class="o">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">BranchError</span><span class="o">?)</span> <span class="o">{</span>
</span><span class="hll">                <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">                    <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">)</span>
</span><span class="hll">                    <span class="c1">// Retrieve deeplink keys from &#39;referringParams&#39; and evaluate the values to determine where to route the user</span>
</span><span class="hll">                    <span class="c1">// Check &#39;+clicked_branch_link&#39; before deciding whether to use your Branch routing logic</span>
</span><span class="hll">                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class="hll">                    <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">message</span><span class="o">)</span>
</span><span class="hll">                <span class="o">}</span>
</span>            <span class="o">}</span>
        <span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">data</span><span class="o">,</span> <span class="k">this</span><span class="o">)</span>
<span class="hll">    <span class="o">}</span>
</span><span class="hll">
</span><span class="hll">    <span class="kd">public</span> <span class="n">override</span> <span class="n">fun</span> <span class="nf">onNewIntent</span><span class="o">(</span><span class="n">intent</span><span class="o">:</span> <span class="n">Intent</span><span class="o">)</span> <span class="o">{</span>
</span>        <span class="k">this</span><span class="o">.</span><span class="na">intent</span> <span class="o">=</span> <span class="n">intent</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Branch SDK는 꼭 Launcher Activity에서 초기화 되어야 합니다.</p>
<p>앱은 Launcher Activity를 통해서 열릴것이고, 이 Activity에서 Branch SDK가 초기화 되고 클릭했던 링크의 데이터가 리턴됩니다.</p>
</div>
<div class="admonition warning">
<p class="admonition-title"><code>onStart()</code>에서만 Branch SDK를 초기화 되어야 합니다.</p>
<p>Branch SDK를 <code>onResume()</code>와 같은 다른 라이프사이클 메쏘드내에서 초기화 하면 의도되지 않은 문제가 발생할 수 있습니다. <code>onStart()</code>는 Activity를 사용자에게 보여지는 단계이며 앱이 포그라운드로 전환되어 사용자와의 상호작용을 하기 위한 준비를 하는 곳입니다. 좀더 자세한 사항은 <a href="https://developer.android.com/guide/components/activities/activity-lifecycle.html">이곳</a>을 참고하시기 바랍니다.</p>
</div>
</li>
<li>
<h3 id="_7">브랜치 레퍼럴 처리<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>Branch.BranchReferralInitListener.onInitFinished()</code> 메쏘드를 통해서 수신되는 BranchReferral과 처리방법 대해 좀더 자세히 설명합니다.</p>
</li>
<li>
<p>브랜치 레퍼럴 파라메터 프리픽스</p>
<ul>
<li><strong>~</strong> : Analytics 용도의 파라메터 입니다.</li>
<li><strong>+</strong> : Branch서비스에서 추가한 정보 파라메터입니다.</li>
<li><strong>$</strong> : Branch서비스의 예약된 키워드들 입니다.</li>
</ul>
</li>
<li>
<p>브랜치 레퍼럴 파라메터</p>
<ul>
<li><strong>+clicked_branch_link</strong> : 앱실행 이전에 브랜치 링크 클릭이 있었는지 여부. (매칭된 클릭이 있는지 여부)</li>
<li><strong>+is_first_session</strong> : 인스톨 이후 최초 실행인지 여부</li>
<li><strong>+match_guaranteed</strong> : 매칭된 클릭이 정확한지 여부, 핑거프린팅에 의한 것일 때는 false가 리턴됨. 정확한 매칭이 아닐경우 딥링킹여부는 고객사에서 적절히 판단하시면됩니다.</li>
<li><strong>+referrer</strong> : 링크를 클릭한 웹페이지 주소</li>
<li>
<p><strong>+click_timestamp</strong> : 링크를 클릭한 시각 (초단위 EPOCH타임)</p>
</li>
<li>
<p><strong>$marketing_title</strong> : Quick Link생성시 설정한 링크 이름</p>
</li>
<li><strong>$link_title</strong> : Universal Link 생성시 설정한 링크 이름</li>
<li><strong>$one_time_use</strong> : 1회성 으로 생성된 링크인지 여부</li>
<li><strong>$deeplink_path</strong> : Branch Link 생성시에 설정된 딥링크 패스.<ul>
<li>일반적으로 Branch도입 이전의 딥링킹 기능에 호환되게 사용하려 할때 사용합니다.</li>
</ul>
</li>
<li>
<p><strong>$3p</strong> :</p>
<ul>
<li><strong>Universal Ads</strong>: <code>a_</code>로 시작되는 광고매체에 부여되는 이름. 예) a_awesome_ad_partner</li>
<li><strong>Universal Email</strong>: <code>e_</code>로 시작되는 이메일 연동매체에 부여되는 이름. 예) e_awesome_email_partner</li>
</ul>
</li>
<li>
<p><strong>~marketing</strong> :</p>
</li>
<li><strong>~advertising_partner_name</strong> : Universal Ads의 광고매체의 이름. 예) "Awesome Ad Parnter".</li>
<li><strong>~branch_ad_format</strong> : 브랜치 광고포멧.</li>
<li><strong>~channel</strong> : 링크 생성시 지정된 채널정보 입니다.</li>
<li><strong>~feature</strong> : 링크 생성시 설정된 해당 브랜치링크의 기능을 알려주는 파라메터입니다.<ul>
<li><strong>Quick Link</strong> : <code>marketing</code></li>
<li><strong>Universal Ads</strong> : <code>paid advertising</code></li>
</ul>
</li>
<li><strong>~campaign</strong> : 링크 생성시 설정된 캠페인정보입니다.</li>
<li><strong>~tags</strong> : 링크 생성시 설정된 태그들입니다.</li>
<li><strong>~stage</strong> : 링크 생성시 설정된 stage정보입니다.</li>
<li><strong>~creation_source</strong> : 링크가 생성된 곳을 알려줍니다.<ul>
<li><code>0</code>: API , <code>1</code>: Quick Link, <code>2</code>: SDK, <code>3</code>: iOS SDK , <code>4</code>: Android SDK , <code>5</code>: Web SDK, <code>6</code>: Dynamic, <code>7</code>: Third party</li>
</ul>
</li>
<li><strong>~referring_link</strong> : 클릭한 브랜치 링크 URL</li>
<li><strong>~id</strong> : 클릭 아이디</li>
<li><strong>~campaign_id</strong> :</li>
<li><strong>~click_id</strong> :</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="_8">상황별 전달되는 브랜치 레퍼럴 예<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>(클릭없이) 설치후 <strong>최초</strong> 오픈시
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;+clicked_branch_link&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;+is_first_session&quot;</span><span class="p">:</span><span class="kc">true</span>
<span class="p">}</span>
</pre></div></p>
</li>
<li>
<p>(클릭없이 단순) 앱 오픈시
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;+clicked_branch_link&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;+is_first_session&quot;</span><span class="p">:</span><span class="kc">false</span>
<span class="p">}</span>
</pre></div></p>
</li>
<li>
<p>퀵링크 클릭후 오픈시 (마켓 랜딩)</p>
<ul>
<li>리턴되는 브랜치 레퍼러 파라메터 JSON
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;+match_guaranteed&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;$marketing_title&quot;</span><span class="p">:</span><span class="s2">&quot;Mar12&quot;</span><span class="p">,</span>
  <span class="nt">&quot;~creation_source&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="nt">&quot;~marketing&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;+clicked_branch_link&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;+referrer&quot;</span><span class="p">:</span><span class="s2">&quot;https:\/\/test.test.com\/b\/&quot;</span><span class="p">,</span>
  <span class="nt">&quot;+click_timestamp&quot;</span><span class="p">:</span><span class="mi">1552370726</span><span class="p">,</span>
  <span class="nt">&quot;$one_time_use&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;~id&quot;</span><span class="p">:</span><span class="s2">&quot;633881367411184970&quot;</span><span class="p">,</span>
  <span class="nt">&quot;+is_first_session&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;~referring_link&quot;</span><span class="p">:</span><span class="s2">&quot;https:\/\/branchtesters.app.link\/4Pz0A6wlZU&quot;</span><span class="p">,</span>
  <span class="nt">&quot;~feature&quot;</span><span class="p">:</span><span class="s2">&quot;marketing&quot;</span>
<span class="p">}</span>
</pre></div></li>
<li>이미 앱이 설치되어 있는경우 Intent의 Data로 전달되는 딥링크<ul>
<li>딥링크를 설정하지 않은 경우 쿼리파라메터에 <code>open?link_click_id=123456789</code>가 추가되어 앱을 실행시킵니다.</li>
<li>예) 샘플앱 Branch Testers
<div class="codehilite"><pre><span></span>branchtesters://open?link_click_id=633895650092880072
</pre></div></li>
</ul>
</li>
</ul>
</li>
<li>
<p>퀵링크 클릭후 오픈시 (마켓 랜딩 &amp; 딥링크)</p>
<ul>
<li>설정한 딥링크 : <code>test</code></li>
<li>리턴되는 브랜치 레퍼러 파라메터 JSON
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;$marketing_title&quot;</span><span class="p">:</span><span class="s2">&quot;Mar12 : branchtesters:\/\/test&quot;</span><span class="p">,</span>
    <span class="nt">&quot;$deeplink_path&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="nt">&quot;~creation_source&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;+referrer&quot;</span><span class="p">:</span><span class="s2">&quot;https:\/\/test.test.com\/b\/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;+click_timestamp&quot;</span><span class="p">:</span><span class="mi">1552373501</span><span class="p">,</span>
    <span class="nt">&quot;~feature&quot;</span><span class="p">:</span><span class="s2">&quot;marketing&quot;</span><span class="p">,</span>
    <span class="nt">&quot;+match_guaranteed&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;~marketing&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;+clicked_branch_link&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;$one_time_use&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
    <span class="nt">&quot;~id&quot;</span><span class="p">:</span><span class="s2">&quot;633881685448153127&quot;</span><span class="p">,</span>
    <span class="nt">&quot;+is_first_session&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
    <span class="nt">&quot;~referring_link&quot;</span><span class="p">:</span><span class="s2">&quot;https:\/\/branchtesters.app.link\/JGhpKHClZU&quot;</span>
<span class="p">}</span>
</pre></div></li>
<li>이미 앱이 설치되어 있는 경우 Intent의 Data로 전달되는 딥링크<ul>
<li>딥링크를 설정하지 않은 경우 쿼리파라메터에 <code>link_click_id</code> 가 추가되어 앱을 실행시킵니다.</li>
<li>예) 샘플앱 Branch Testers
<div class="codehilite"><pre><span></span>branchtesters://test?link_click_id=633895650092880072
</pre></div></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Universal Ads용 링크 클릭후 오픈시 (마켓 랜딩 &amp; 딥링크)</p>
<ul>
<li>설정한 딥링크 : <code>test</code></li>
<li>리턴되는 브랜치 레퍼러 파라메터 JSON
<div class="codehilite"><pre><span></span><span class="p">{</span>  
   <span class="nt">&quot;$3p&quot;</span><span class="p">:</span><span class="s2">&quot;a_awesome_ad_partner&quot;</span><span class="p">,</span>
   <span class="nt">&quot;~advertising_partner_name&quot;</span><span class="p">:</span><span class="s2">&quot;Awesome Ad Parnter&quot;</span><span class="p">,</span>
   <span class="nt">&quot;$deeplink_path&quot;</span><span class="p">:</span><span class="s2">&quot;random&amp;src=wp&quot;</span><span class="p">,</span>
   <span class="nt">&quot;+referrer&quot;</span><span class="p">:</span><span class="s2">&quot;https:\/\/test.test.com\/b\/&quot;</span><span class="p">,</span>
   <span class="nt">&quot;+click_timestamp&quot;</span><span class="p">:</span><span class="mi">1551862954</span><span class="p">,</span>
   <span class="nt">&quot;~feature&quot;</span><span class="p">:</span><span class="s2">&quot;paid advertising&quot;</span><span class="p">,</span>
   <span class="nt">&quot;+match_guaranteed&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
   <span class="nt">&quot;$link_title&quot;</span><span class="p">:</span><span class="s2">&quot;mar6_wp&quot;</span><span class="p">,</span>
   <span class="nt">&quot;+clicked_branch_link&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
   <span class="nt">&quot;$one_time_use&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
   <span class="nt">&quot;~id&quot;</span><span class="p">:</span><span class="s2">&quot;631754293485575032&quot;</span><span class="p">,</span>
   <span class="nt">&quot;~branch_ad_format&quot;</span><span class="p">:</span><span class="s2">&quot;App Only&quot;</span><span class="p">,</span>
   <span class="nt">&quot;+is_first_session&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
   <span class="nt">&quot;~referring_link&quot;</span><span class="p">:</span><span class="s2">&quot;https:\/\/r5xx.app.link\/spLebMwBPU?%243p=a_awesome_ad_partner&quot;</span><span class="p">,</span>
   <span class="nt">&quot;~channel&quot;</span><span class="p">:</span><span class="s2">&quot;Awesome Ad Parnter&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div></li>
<li>이미 앱이 설치되어 있는 경우 Intent의 Data로 전달되는 딥링크<ul>
<li>딥링크를 설정하지 않은 경우 쿼리파라메터에 <code>link_click_id</code> 가 추가되어 앱을 실행시킵니다.</li>
<li>예) 샘플앱 Branch Testers
<div class="codehilite"><pre><span></span>branchtesters://test?link_click_id=633895650092880072
</pre></div></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="_9">브랜치 레퍼럴 처리 샘플 코드<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<ul>
<li>Activity.onStart()의 구현 샘플입니다.</li>
<li>브랜치링크 생성시 <strong>$deeplink_path</strong>에 실제 설정한 딥링크를 사용한 딥링크 처리코드입니다.
   이 방식은 기존의 URI 스킴방식의 딥링크 처리로직을 그대로 유지하시면서 Branch의 딥링킹을 사용하시고 경우에 활용하실 수 있습니다.</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">();</span>

    <span class="n">String</span> <span class="n">deeplink</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="c1">// 인텐트에서 딥링크를 추출합니다.</span>
    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">getIntent</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">intent</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">intent</span><span class="o">.</span><span class="na">getData</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 앱이 딥링킹 되었을 경우, deeplink에 딥링크를 설정합니다.</span>
        <span class="n">deeplink</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getData</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// Branch의 세션을 초기화 하고 딥링크를 조회 합니다.</span>
    <span class="n">Branch</span> <span class="n">branch</span> <span class="o">=</span> <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">branch</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">deeplink</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// 앱이 딥링킹 되었다면 Branch 세션은 초기화 하지만 수신한 딥링크를 처리하지 않습니다. 앱별로 다르게 처리가능.</span>
            <span class="n">branch</span><span class="o">.</span><span class="na">initSession</span><span class="o">(</span><span class="k">new</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchReferralInitListener</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">JSONObject</span> <span class="n">referringParams</span><span class="o">,</span> <span class="n">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">referringParams</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// 에러없이 응답을 수신한 경우.</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="c1">// 에러가 발생했거나 널 응답을 수신한 경우.</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">getIntent</span><span class="o">().</span><span class="na">getData</span><span class="o">(),</span> <span class="k">this</span><span class="o">);</span>
            <span class="c1">// 딥링크를 처리하는 함수를 호출합니다.</span>
            <span class="n">handleDeeplink</span><span class="o">(</span><span class="n">deeplink</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">// 앱이 단순 오픈 되었다면 세션을 초기화 하고 리턴된 딥링크를 조회합니다.</span>
            <span class="n">branch</span><span class="o">.</span><span class="na">initSession</span><span class="o">(</span><span class="k">new</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchReferralInitListener</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">JSONObject</span> <span class="n">referringParams</span><span class="o">,</span> <span class="n">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">Util</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&quot;onInitFinished() START&quot;</span><span class="o">);</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">referringParams</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// 에러없이 응답을 수신한 경우.</span>
                        <span class="k">try</span> <span class="o">{</span>
                            <span class="c1">// 앱이 최초로 오픈 되었는지 여부입니다. 필요시에는 이 값을 사용하실 수 있습니다.</span>
                            <span class="kt">boolean</span> <span class="n">isFirstSession</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                            <span class="k">if</span> <span class="o">(</span><span class="n">referringParams</span><span class="o">.</span><span class="na">has</span><span class="o">(</span><span class="s">&quot;+is_first_session&quot;</span><span class="o">))</span> <span class="o">{</span>
                                <span class="n">isFirstSession</span> <span class="o">=</span> <span class="o">(</span><span class="kt">boolean</span><span class="o">)</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;+is_first_session&quot;</span><span class="o">);</span>
                                <span class="c1">// 필요한 경우 어떤 작업을 수행할 수 있습니다.</span>
                            <span class="o">}</span>
                            <span class="k">if</span> <span class="o">(</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">has</span><span class="o">(</span><span class="s">&quot;+clicked_branch_link&quot;</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
                                    <span class="n">referringParams</span><span class="o">.</span><span class="na">has</span><span class="o">(</span><span class="s">&quot;+match_guaranteed&quot;</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
                                    <span class="n">referringParams</span><span class="o">.</span><span class="na">has</span><span class="o">(</span><span class="s">&quot;$deeplink_path&quot;</span><span class="o">)</span>
                                    <span class="cm">/*referringParams.has(&quot;+click_timestamp&quot;)*/</span> <span class="o">)</span> <span class="o">{</span>
                                <span class="kt">boolean</span> <span class="n">plusClickedBranchLink</span> <span class="o">=</span> <span class="o">(</span><span class="kt">boolean</span><span class="o">)</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;+clicked_branch_link&quot;</span><span class="o">);</span>
                                <span class="kt">boolean</span> <span class="n">plusMatchGuaranteed</span> <span class="o">=</span> <span class="o">(</span><span class="kt">boolean</span><span class="o">)</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;+match_guaranteed&quot;</span><span class="o">);</span>
                                <span class="n">String</span> <span class="n">dollorDeeplinkPath</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;$deeplink_path&quot;</span><span class="o">);</span>

                                <span class="kt">boolean</span> <span class="n">DEEP_LINK_ONLY_FOR_STRONG_MATCHING</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                                <span class="n">String</span> <span class="n">DEEP_LINK_SCHEME</span> <span class="o">=</span> <span class="s">&quot;branchtesters://&quot;</span><span class="o">;</span>
                                <span class="k">if</span> <span class="o">(</span><span class="n">plusClickedBranchLink</span><span class="o">)</span> <span class="o">{</span>
                                    <span class="c1">// 클릭이 매칭된 경우</span>
                                    <span class="k">if</span> <span class="o">(</span><span class="n">DEEP_LINK_ONLY_FOR_STRONG_MATCHING</span> <span class="o">&amp;&amp;</span> <span class="n">plusClickedBranchLink</span> <span class="o">==</span> <span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
                                        <span class="c1">// 이 샘플앱에서는 정확한 매칭일 경우만 딥링킹을 수행하도록 하였습니다.</span>
                                        <span class="c1">// 앱별 필요에 따라서 추측성 매칭의 경우에도 딥링킹을 수행하실수도 있습니다.</span>
                                        <span class="c1">// 딥링크 처리 메쏘드를 처리합니다.</span>
                                        <span class="c1">// 딥링크의 패쓰이하만 리턴되기 때문에 앞부분을 추가하셔서 딥링크를 만드셔야 합니다.</span>
                                        <span class="n">handleDeeplink</span><span class="o">(</span><span class="n">DEEP_LINK_SCHEME</span> <span class="o">+</span> <span class="n">dollorDeeplinkPath</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">);</span>
                                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                                        <span class="c1">// 이 샘플앱은 추측성 매칭의 경우에는 딥링킹을 수행하지 않습니다.</span>
                                    <span class="o">}</span>
                                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                                    <span class="c1">// 매칭된 클릭이 없는 경우</span>
                                    <span class="k">if</span> <span class="o">(</span><span class="n">referringParams</span><span class="o">.</span><span class="na">has</span><span class="o">(</span><span class="s">&quot;+non_branch_link&quot;</span><span class="o">))</span> <span class="o">{</span>
                                        <span class="n">String</span> <span class="n">nonBranchLink</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;+non_branch_link&quot;</span><span class="o">);</span>
                                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                                        <span class="c1">// 단순 오픈</span>
                                    <span class="o">}</span>
                                <span class="o">}</span>
                            <span class="o">}</span>
                        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">je</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">Util</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&quot;###### &quot;</span> <span class="o">+</span> <span class="n">je</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
                        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">Util</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&quot;###### &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
                        <span class="o">}</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="c1">// 에러가 발생했거나 널 응답을 수신한 경우.</span>
                        <span class="n">Util</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&quot;###### &quot;</span> <span class="o">+</span> <span class="n">error</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">getIntent</span><span class="o">().</span><span class="na">getData</span><span class="o">(),</span> <span class="k">this</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
<li>
<h3 id="_10">딥링크 처리 샘플 코드<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<ul>
<li>위의 샘플의 호출한 <code>handleDeeplink()</code>메쏘드의 샘플입니다.</li>
<li>기존 딥링크 처리 부분에 브랜치레퍼럴 수신시에는 필요한 경우 해당 정보를 활용한 추가 기능을 사용하실 수 있습니다.</li>
</ul>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleDeeplink</span><span class="o">(</span><span class="n">String</span> <span class="n">deeplink</span><span class="o">,</span> <span class="n">JSONObject</span> <span class="n">params</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">params</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 브랜치 레퍼럴을 통해서 수신한 정보를 활용하실 수 있습니다.</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="cm">/*(</span>
<span class="cm">            String tilde_feature = (String) params.get(&quot;~feature&quot;);</span>
<span class="cm">            if (tilde_feature.equals(&quot;marketing&quot;)) {</span>
<span class="cm">                // Quick Link</span>
<span class="cm">            } else if (tilde_feature.equals(&quot;paid advertising&quot;)) {</span>
<span class="cm">                // Universal Ads</span>
<span class="cm">                String dollor_3p = (String) params.get(&quot;$3p&quot;);</span>
<span class="cm">                String tilde_advertising_partner_name = (String) params.get(&quot;~advertising_partner_name&quot;);</span>
<span class="cm">            }</span>
<span class="cm">            */</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Util</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&quot;###### &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">deeplink</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">////////////////////////////</span>
        <span class="c1">// DO DEEPLINKING !!!</span>
        <span class="c1">// 앱이 직접 딥링킹 되는 경우와 Branch를 통해서 딥링킹이 되는 경우</span>
        <span class="c1">// 모두 동일하게 처리하실 수 있습니다.</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>

</li>
<li>
<h3 id="_11">수신된 브랜치 레퍼러 처리 샘플들.<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>아래와 같이 다양한 방식을 활용하실 수 있습니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// listener (within Main Activity&#39;s onStart)</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">(</span><span class="k">new</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchReferralInitListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">JSONObject</span> <span class="n">referringParams</span><span class="o">,</span> <span class="n">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// option 1: log data</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

            <span class="c1">// option 2: save data to be used later</span>
            <span class="n">SharedPreferences</span> <span class="n">preferences</span> <span class="o">=</span> <span class="o">.</span><span class="na">getSharedPreferences</span><span class="o">(</span><span class="s">&quot;MyPreferences&quot;</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">);</span>
            <span class="n">SharedPreferences</span><span class="o">.</span><span class="na">Editor</span> <span class="n">editor</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="na">edit</span><span class="o">();</span>
            <span class="n">editor</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="s">&quot;branchData&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
            <span class="n">editor</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>

            <span class="c1">// option 3: navigate to page</span>
            <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">OtherActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branchData&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
            <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>

            <span class="c1">// option 4: display data</span>
            <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">getIntent</span><span class="o">().</span><span class="na">getData</span><span class="o">(),</span> <span class="k">this</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// listener (within Main Activity&#39;s onStart)</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">(</span><span class="n">object</span> <span class="o">:</span> <span class="n">BranchReferralInitListener</span> <span class="o">{</span>
    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">referringParams</span><span class="o">:</span> <span class="n">JSONObject</span><span class="o">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">BranchError</span><span class="o">?)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// option 1: log data</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">())</span>

            <span class="c1">// option 2: save data to be used later</span>
            <span class="n">val</span> <span class="n">preferences</span> <span class="o">=</span>  <span class="n">getSharedPreferences</span><span class="o">(</span><span class="s">&quot;MyPreferences&quot;</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">)</span>
            <span class="n">val</span> <span class="n">editor</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="na">edit</span><span class="o">()</span>
            <span class="n">editor</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="s">&quot;branchData&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span>
            <span class="n">editor</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>

            <span class="c1">// option 3: navigate to page</span>
            <span class="n">val</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">MainActivity2</span><span class="o">::</span><span class="n">class</span><span class="o">.</span><span class="na">java</span><span class="o">)</span>
            <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branchData&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span>
            <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">)</span>

            <span class="c1">// option 4: display data</span>
            <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">()</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">message</span><span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">data</span><span class="o">,</span> <span class="k">this</span><span class="o">)</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_12">컨텐츠 트래킹<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>사용자의 컨텐츠를 조회를 트래킹합니다.</p>
</li>
<li>
<p><a href="#컨텐츠-레퍼런스-생성">Branch Universal Object</a>가 필요합니다.</p>
</li>
<li>
<p><a href="#track-content-properties">Track content properties</a>를 사용합니다.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/content">Branch Dashboard</a>에서 데이터를 검증합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="n">BranchEvent</span><span class="o">(</span><span class="n">BRANCH_STANDARD_EVENT</span><span class="o">.</span><span class="na">VIEW_ITEM</span><span class="o">).</span><span class="na">addContentItems</span><span class="o">(</span><span class="n">buo</span><span class="o">).</span><span class="na">logEvent</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">BranchEvent</span><span class="o">(</span><span class="n">BRANCH_STANDARD_EVENT</span><span class="o">.</span><span class="na">VIEW_ITEM</span><span class="o">).</span><span class="na">addContentItems</span><span class="o">(</span><span class="n">buo</span><span class="o">).</span><span class="na">logEvent</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_13">사용자 트래킹<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>이벤트, 딥링크, Referral에 사용자에 대한 식별자(email, ID, UUID, etc)를 설정합니다. 사용자의 식별자 설정의 경우 꼭 사내 개인정보보호 관련부서와 사전 논의합니다.</p>
</li>
<li>
<p>설정가능한 사용자 식별자의 최대 길이는 <code>127</code>입니다.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/identities">Branch Dashboard</a>에서 데이터를 검증합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// login</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">setIdentity</span><span class="o">(</span><span class="s">&quot;your_user_id&quot;</span><span class="o">);</span>

<span class="c1">// logout</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">logout</span><span class="o">();</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// login</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">setIdentity</span><span class="o">(</span><span class="s">&quot;your_user_id&quot;</span><span class="o">)</span>

<span class="c1">// logout</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">logout</span><span class="o">()</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_14">이벤트 트래킹<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>고객의 구매활동과 관련된 모든 이벤트들은 "Commerce" 클래스의 데이터아이템으로 분류됩니다.</p>
</li>
<li>
<p>사용자가 앱내 컨텐츠와 상호작용하는 것에 관련된 모든 이벤트들은 "Content" 클래스의 데이터아이템으로 분류됩니다.</p>
</li>
<li>
<p>사용자들이 앱사용을 진행하면서 발생하는 것에 관련된 모든 이벤트들은 "lifecycle" 클래스의 데이터아이템으로 분류됩니다.</p>
</li>
<li>
<p>아래의 표에 없는 커스텀 이벤트에 대한 트래킹은 <a href="https://docs.branch.io/pages/apps/v2event/#track-custom-events">Track Custom Events</a>문서를 참고하세요.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/events">Branch Dashboard</a>에서 데이터를 검증합니다.</p>
</li>
</ul>
</li>
</ul>
<p>Use the table below to quickly find the event you want to track.</p>
<table>
<thead>
<tr>
<th align="center">Event Name</th>
<th align="center">Event Category</th>
<th align="center">iOS</th>
<th align="center">Android</th>
<th align="center">API</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Add To Cart</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventAddToCart</td>
<td align="center">BRANCH_STANDARD_EVENT.ADD_TO_CART</td>
<td align="center">ADD_TO_CART</td>
</tr>
<tr>
<td align="center">Add To Wishlist</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventAddToWishlist</td>
<td align="center">BRANCH_STANDARD_EVENT.ADD_TO_WISHLIST</td>
<td align="center">ADD_TO_WISHLIST</td>
</tr>
<tr>
<td align="center">View Cart</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventViewCart</td>
<td align="center">BRANCH_STANDARD_EVENT.VIEW_CART</td>
<td align="center">VIEW_CART</td>
</tr>
<tr>
<td align="center">Initiate Purchase</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventInitiatePurchase</td>
<td align="center">BRANCH_STANDARD_EVENT.INITIATE_PURCHASE</td>
<td align="center">INITIATE_PURCHASE</td>
</tr>
<tr>
<td align="center">Add Payment Info</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventAddPaymentInfo</td>
<td align="center">BRANCH_STANDARD_EVENT.ADD_PAYMENT_INFO</td>
<td align="center">ADD_PAYMENT_INFO</td>
</tr>
<tr>
<td align="center">Purchase</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventPurchase</td>
<td align="center">BRANCH_STANDARD_EVENT.PURCHASE</td>
<td align="center">PURCHASE</td>
</tr>
<tr>
<td align="center">Spend Credits</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventSpendCredits</td>
<td align="center">BRANCH_STANDARD_EVENT.SPEND_CREDITS</td>
<td align="center">SPEND_CREDITS</td>
</tr>
<tr>
<td align="center">Search</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventSearch</td>
<td align="center">BRANCH_STANDARD_EVENT.SEARCH</td>
<td align="center">SEARCH</td>
</tr>
<tr>
<td align="center">View Item</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventViewItem</td>
<td align="center">BRANCH_STANDARD_EVENT.VIEW_ITEM</td>
<td align="center">VIEW_ITEM</td>
</tr>
<tr>
<td align="center">View Items</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventViewItems</td>
<td align="center">BRANCH_STANDARD_EVENT.VIEW_ITEMS</td>
<td align="center">VIEW_ITEMS</td>
</tr>
<tr>
<td align="center">Rate</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventRate</td>
<td align="center">BRANCH_STANDARD_EVENT.RATE</td>
<td align="center">RATE</td>
</tr>
<tr>
<td align="center">Share</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventShare</td>
<td align="center">BRANCH_STANDARD_EVENT.SHARE</td>
<td align="center">SHARE</td>
</tr>
<tr>
<td align="center">Complete Registration</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventCompleteRegistration</td>
<td align="center">BRANCH_STANDARD_EVENT.COMPLETE_REGISTRATION</td>
<td align="center">COMPLETE_REGISTRATION</td>
</tr>
<tr>
<td align="center">Complete Tutorial</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventCompleteTutorial</td>
<td align="center">BRANCH_STANDARD_EVENT.COMPLETE_TUTORIAL</td>
<td align="center">COMPLETE_TUTORIAL</td>
</tr>
<tr>
<td align="center">Achieve Level</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventAchieveLevel</td>
<td align="center">BRANCH_STANDARD_EVENT.ACHIEVE_LEVEL</td>
<td align="center">ACHIEVE_LEVEL</td>
</tr>
<tr>
<td align="center">Unlock Achievement</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventUnlockAchievement</td>
<td align="center">BRANCH_STANDARD_EVENT.UNLOCK_ACHIEVEMENT</td>
<td align="center">UNLOCK_ACHIEVEMENT</td>
</tr>
</tbody>
</table>
<ul>
<li>
<h3 id="_15">사용자 트래킹 활성화 / 비활성화<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>GDPR관련 또는 다른 목적으로 트래킹을 원치 않는 사용자의 요청에 대응할 필요가 있다면, 네트워크 데이터전송을 차단하여 해당 사용자에 대한 트래킹을 중단할 수 있습니다. 이 기능은 특정링크 또는 브랜치 링크를 통해서 어떤 사용자에게든 활성화 할 수 있습니다.</p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">disableTracking</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</pre></div>

<p>앱이 실행되는 동안 호출이 가능하며, 한번 호출이 되면 브랜치 SDK의 모든 네트워크 데이터 전송이 차단됩니다. 링크생성 기능은 계속 동작합니다만, 해당 유저를 식별할 수 있는 정보는 포함되지 않을 것입니다. 딥링킹도 계속 동작하지만 해당 유저에 대한 분석정보는 트래킹되지 않을 것입니다.</p>
</li>
</ul>
<h2 id="_16">문제 해결<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<ul>
<li>
<h3 id="_17">로깅기능 활성화<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">enableLogging</span><span class="o">();</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_18">브랜치 연동 테스트<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<p>메인 Activity의 onStart()메쏘드 내에서 <code>IntegrationValidator.validate</code>메쏘드를 호출해서 브랜치연동에 관련된 항목들을 테스트 할수 있습니다. ADB Logcat을 통해서 SDK 연동 테스트가 통과 되는지 확인하시기 바랍니다. 상용/릴리즈 빌드에서는 <code>IntegrationValidator.validate</code> 메쏘드를 꼭 주척처리해서 제거 해주어야 합니다.</p>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">IntegrationValidator</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">);</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_19">딥링크 라우팅<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>아래와 같은 특정 URL Scheme Path를 로딩합니다.</p>
<ul>
<li><code>$deeplink_path="content/123"</code></li>
<li><code>$android_deeplink_path="content/123"</code></li>
</ul>
</li>
<li>
<p><a href="#컨텐츠로의-이동">컨텐츠로의 이동</a>의 사용을 권장합니다.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.sdk.auto_link_path&quot;</span> <span class="na">android:value=</span><span class="s">&quot;content/123/, another/path/, another/path/*&quot;</span> <span class="nt">/&gt;</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_20">앱내의 딥링크 라우딩<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>앱내에서 HTML을 정상적으로 렌더링하기 위해서 <code>WebView</code>와 <code>ChromeTab</code>이 사용됩니다.</p>
</li>
<li>
<p><code>WebView</code>내의 브랜치 링크는 앱내로 라우팅 되지만 다른 컨텐츠들은 앱외부로 라우팅 됩니다.</p>
</li>
<li>
<p><code>Web View</code>로 브랜치 딥링크 열기</p>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
    <span class="n">WebView</span> <span class="n">webView</span> <span class="o">=</span> <span class="o">(</span><span class="n">WebView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">webView</span><span class="o">);</span>
    <span class="n">webView</span><span class="o">.</span><span class="na">setWebViewClient</span><span class="o">(</span><span class="k">new</span> <span class="n">BranchWebViewController</span><span class="o">(</span><span class="n">YOUR_DOMAIN</span><span class="o">,</span> <span class="n">MainActivity</span><span class="o">.</span><span class="na">class</span><span class="o">));</span> <span class="c1">//YOUR_DOMAIN example: appname.app.link</span>
    <span class="n">webView</span><span class="o">.</span><span class="na">loadUrl</span><span class="o">(</span><span class="n">URL_TO_LOAD</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BranchWebViewController</span> <span class="kd">extends</span> <span class="n">WebViewClient</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">myDomain_</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Class</span> <span class="n">activityToLaunch_</span><span class="o">;</span>

    <span class="n">BranchWebViewController</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="n">String</span> <span class="n">myDomain</span><span class="o">,</span> <span class="n">Class</span> <span class="n">activityToLaunch</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">myDomain_</span> <span class="o">=</span> <span class="n">myDomain</span><span class="o">;</span>
        <span class="n">activityToLaunch_</span> <span class="o">=</span> <span class="n">activityToLaunch</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">shouldOverrideUrlLoading</span><span class="o">(</span><span class="n">WebView</span> <span class="n">view</span><span class="o">,</span> <span class="n">WebResourceRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getUrl</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">myDomain_</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">Intent</span> <span class="n">i</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">view</span><span class="o">.</span><span class="na">getContext</span><span class="o">(),</span> <span class="n">activityToLaunch_</span><span class="o">);</span>
            <span class="n">i</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span> <span class="n">url</span><span class="o">);</span>
            <span class="n">i</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
            <span class="n">startActivity</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="c1">//finish(); if launching same activity</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">view</span><span class="o">.</span><span class="na">loadUrl</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">override</span> <span class="n">fun</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">:</span> <span class="n">Bundle</span><span class="o">?)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">)</span>
    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">)</span>
    <span class="n">val</span> <span class="n">webView</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">webView</span><span class="o">)</span> <span class="n">as</span> <span class="n">WebView</span>
    <span class="n">webView</span><span class="o">!!.</span><span class="na">webViewClient</span> <span class="o">=</span> <span class="n">BranchWebViewController</span><span class="o">(</span><span class="s">&quot;appname.app.link&quot;</span><span class="o">,</span> <span class="n">MainActivity2</span><span class="o">::</span><span class="n">class</span><span class="o">.</span><span class="na">java</span><span class="o">)</span>
    <span class="n">webView</span><span class="o">!!.</span><span class="na">loadUrl</span><span class="o">(</span><span class="n">URL_TO_LOAD</span><span class="o">)</span>
<span class="o">}</span>

<span class="n">inner</span> <span class="kd">class</span> <span class="nc">BranchWebViewController</span> <span class="n">internal</span> <span class="nf">constructor</span><span class="o">(</span><span class="kd">private</span> <span class="n">val</span> <span class="n">myDomain_</span><span class="o">:</span> <span class="n">String</span><span class="o">,</span> <span class="kd">private</span> <span class="n">val</span> <span class="n">activityToLaunch_</span><span class="o">:</span> <span class="n">Class</span><span class="o">&lt;*&gt;)</span> <span class="o">:</span> <span class="n">WebViewClient</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onLoadResource</span><span class="o">(</span><span class="n">view</span><span class="o">:</span> <span class="n">WebView</span><span class="o">,</span> <span class="n">url</span><span class="o">:</span> <span class="n">String</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onLoadResource</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">url</span><span class="o">)</span>
    <span class="o">}</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">shouldOverrideUrlLoading</span><span class="o">(</span><span class="n">view</span><span class="o">:</span> <span class="n">WebView</span><span class="o">,</span> <span class="n">request</span><span class="o">:</span> <span class="n">WebResourceRequest</span><span class="o">):</span> <span class="n">Boolean</span> <span class="o">{</span>
        <span class="n">val</span> <span class="n">url</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">url</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">myDomain_</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">val</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Intent</span><span class="o">(</span><span class="n">view</span><span class="o">.</span><span class="na">context</span><span class="o">,</span> <span class="n">activityToLaunch_</span><span class="o">)</span>
            <span class="n">i</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span> <span class="n">url</span><span class="o">)</span>
            <span class="n">i</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
      <span class="c1">//finish(); if launching same activity</span>
            <span class="n">startActivity</span><span class="o">(</span><span class="n">i</span><span class="o">)</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">view</span><span class="o">.</span><span class="na">loadUrl</span><span class="o">(</span><span class="n">url</span><span class="o">)</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="kc">true</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
</li>
<li>
<p><code>Chrome Tabs</code>로 브랜치 딥링크 열기</p>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">CustomTabsIntent</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomTabsIntent</span><span class="o">.</span><span class="na">Builder</span><span class="o">();</span>
<span class="n">CustomTabsIntent</span> <span class="n">customTabsIntent</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span> <span class="n">BRANCH_LINK_TO_LOAD</span><span class="o">);</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">launchUrl</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">BRANCH_LINK_TO_LOAD</span><span class="o">));</span>
<span class="c1">//finish(); if launching same activity</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">val</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">CustomTabsIntent</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
<span class="n">val</span> <span class="n">customTabsIntent</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">()</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span> <span class="n">BRANCH_LINK_TO_LOAD</span><span class="o">)</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">launchUrl</span><span class="o">(</span><span class="k">this</span><span class="nd">@MainActivity2</span><span class="o">,</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">BRANCH_LINK_TO_LOAD</span><span class="o">))</span>
<span class="c1">//finish() if launching same activity</span>
</pre></div>

</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="_21">브랜치링크에 대한 딥링크 테스트<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<p>브랜치 링크에 <code>?bnc_validate=true</code>를 추가한 뒤 (시뮬레이터가 아닌) 실제 기기에서 클릭하여 테스트 합니다. 예를들면 샘플 브랜치 링크 <code>"https://&lt;yourapp\&gt;.app.link/NdJ6nFzRbK"</code>에 대해서 <code>"https://&lt;yourapp\&gt;.app.link/NdJ6nFzRbK?bnc_validate=true"</code>링크를 클릭합니다.</p>
</li>
<li>
<h3 id="application">디폴트 Application 클래스 사용<a class="headerlink" href="#application" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>앱에 Application클래스가 없는 경우</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;application</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.referral.BranchApp&quot;</span><span class="nt">&gt;</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="install-referrer">커스텀 Install Referrer 리시버<a class="headerlink" href="#install-referrer" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>안드로이드에서는 앱당 하나의 <code>BroadcastReceiver</code>만 허용됩니다.</p>
</li>
<li>
<p><code>AndroidManifest.xml</code>에 아래의 내용을 추가합니다.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;receiver</span> <span class="na">android:name=</span><span class="s">&quot;com.BRANCH SDK.CustomInstallListener&quot;</span> <span class="na">android:exported=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;intent-filter&gt;</span>
    <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;com.android.vending.INSTALL_REFERRER&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/receiver&gt;</span>
</pre></div>

</li>
<li>
<p><code>onReceive()</code>내에서 <code>io.branch.referral.InstallListener</code> 인스턴스를 생성합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">InstallListener</span> <span class="n">listener</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InstallListener</span><span class="o">();</span>
<span class="n">listener</span><span class="o">.</span><span class="na">onReceive</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">intent</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">val</span> <span class="n">listener</span> <span class="o">=</span> <span class="n">InstallListener</span><span class="o">()</span>
<span class="n">listener</span><span class="o">.</span><span class="na">onReceive</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">intent</span><span class="o">)</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_22">이 링크를 열수 없다는 에러<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<ul>
<li>URI Scheme 리다이렉션이 실패할경우 발생합니다.</li>
<li><code>$deeplink_path</code>가 없도록 하거나 <code>AndroidManifest.xml</code>에서 허용된 <code>$deeplink_path</code>를 지정해야 합니다.</li>
</ul>
</li>
<li>
<h3 id="initstate_-session_stateinitialising"><code>initState_ == SESSION_STATE.INITIALISING</code> 상태에서 멈추어 있을 경우<a class="headerlink" href="#initstate_-session_stateinitialising" title="Permanent link">&para;</a></h3>
<ul>
<li>Branch SDK가 올바른 Application Context를 Activity에서 가져오지 못한 경우 종종 발생합니다. Branch 인스턴스에 접근할때 아래와 같이 싱글톤 클래스로 전달해서 문제를 해결할 수 있습니다.</li>
</ul>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">());</span>
</pre></div>

</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.b41f3d20.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../../assets/javascripts/lunr/lunr.jp.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="../../../js/router.js"></script>
      
        <script src="../../../js/events.js"></script>
      
        <script src="../../../js/modals.js"></script>
      
        <script src="../../../js/images.js"></script>
      
        <script src="../../../js/buttons.js"></script>
      
        <script src="../../../js/progress.js"></script>
      
        <script src="../../../js/tabs.js"></script>
      
        <script src="../../../js/languages.js"></script>
      
        <script src="../../../js/utils.js"></script>
      
        <script src="../../../js/main.js"></script>
      
    
    
      
        <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-134914613-1","bson-branch.github.io/docs/"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(a){a.host!=document.location.host&&a.addEventListener("click",function(){var e=a.getAttribute("data-md-action")||"follow";ga("send","event","outbound",e,a.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
  </body>
</html>