



<!doctype html>
<html lang="kr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="클립보드로 복사">
      
        <meta name="lang:clipboard.copied" content="클립보드에 복사됨">
      
        <meta name="lang:search.language" content="jp">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="검색어와 일치하는 문서가 없습니다">
      
        <meta name="lang:search.result.one" content="1개의 일치하는 문서">
      
        <meta name="lang:search.result.other" content="#개의 일치하는 문서">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0">
    
    
      
        <title>안드로이드 SDK 연동가이드 (드래프트) - Branch Korea Solutions Engineering</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.572ca0f0.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../../assets/javascripts/modernizr.8c900955.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../css/main.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#sdk" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Branch Korea Solutions Engineering" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Branch Korea Solutions Engineering
              </span>
              <span class="md-header-nav__topic">
                안드로이드 SDK 연동가이드 (드래프트)
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="검색" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            검색어를 입력하세요
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Branch Korea Solutions Engineering" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Branch Korea Solutions Engineering
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../" title="Guides" class="md-nav__link">
      Guides
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../migration/" title="Migration" class="md-nav__link">
      Migration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../pages/" title="Translations" class="md-nav__link">
      Translations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../data_feeds/" title="Data Feeds" class="md-nav__link">
      Data Feeds
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../fraud/" title="Fraud" class="md-nav__link">
      Fraud
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">목차</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="공연 연동 가이드" class="md-nav__link">
    공연 연동 가이드
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" title="브랜치 연동 가이드" class="md-nav__link">
    브랜치 연동 가이드
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="링크 설정" class="md-nav__link">
    링크 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#branch-sdk" title="Branch 안드로이드 SDK 관련 정보" class="md-nav__link">
    Branch 안드로이드 SDK 관련 정보
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" title="브랜치 라이브러리 임포트/설치" class="md-nav__link">
    브랜치 라이브러리 임포트/설치
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#androidmanifestxml" title="AndroidManifest.xml 설정" class="md-nav__link">
    AndroidManifest.xml 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" title="브랜치 초기화" class="md-nav__link">
    브랜치 초기화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" title="브랜치 로딩" class="md-nav__link">
    브랜치 로딩
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" title="딥링크 테스트" class="md-nav__link">
    딥링크 테스트
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" title="기능 구현" class="md-nav__link">
    기능 구현
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" title="컨텐츠 레퍼런스 생성" class="md-nav__link">
    컨텐츠 레퍼런스 생성
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" title="딥링크 생성" class="md-nav__link">
    딥링크 생성
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" title="딥링크 공유" class="md-nav__link">
    딥링크 공유
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" title="딥링크 데이터 조회" class="md-nav__link">
    딥링크 데이터 조회
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" title="컨텐츠로의 이동" class="md-nav__link">
    컨텐츠로의 이동
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" title="컨텐츠 노출" class="md-nav__link">
    컨텐츠 노출
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" title="컨텐츠 트래킹" class="md-nav__link">
    컨텐츠 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" title="사용자 트래킹" class="md-nav__link">
    사용자 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" title="이벤트 트래킹" class="md-nav__link">
    이벤트 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#referral" title="Referral 처리" class="md-nav__link">
    Referral 처리
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" title="푸시알림 처리" class="md-nav__link">
    푸시알림 처리
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" title="앱 내에서 링크 처리" class="md-nav__link">
    앱 내에서 링크 처리
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#100" title="100% 정확도 매칭 활성화" class="md-nav__link">
    100% 정확도 매칭 활성화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" title="사용자 트래킹 활성화 / 비활성화" class="md-nav__link">
    사용자 트래킹 활성화 / 비활성화
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_21" title="문제 해결" class="md-nav__link">
    문제 해결
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" title="로깅기능 활성화" class="md-nav__link">
    로깅기능 활성화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" title="브랜치 연동 테스트" class="md-nav__link">
    브랜치 연동 테스트
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" title="샘플 테스트 앱" class="md-nav__link">
    샘플 테스트 앱
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" title="인스톨 시뮬레이션" class="md-nav__link">
    인스톨 시뮬레이션
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" title="컨텐츠 속성 트래킹" class="md-nav__link">
    컨텐츠 속성 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bnclt" title="bnc.lt 또는 커스텀 링크 도메인 사용" class="md-nav__link">
    bnc.lt 또는 커스텀 링크 도메인 사용
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fabric-answers" title="브랜치와 Fabric Answers" class="md-nav__link">
    브랜치와 Fabric Answers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" title="딥링크 라우팅" class="md-nav__link">
    딥링크 라우팅
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" title="앱내의 딥링크 라우딩" class="md-nav__link">
    앱내의 딥링크 라우딩
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activity" title="딥링크 Activity의 종료" class="md-nav__link">
    딥링크 Activity의 종료
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" title="브랜치링크에 대한 딥링크 테스트" class="md-nav__link">
    브랜치링크에 대한 딥링크 테스트
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#android-15" title="Android 15 이전 버전 지원" class="md-nav__link">
    Android 15 이전 버전 지원
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application" title="디폴트 Application 클래스 사용" class="md-nav__link">
    디폴트 Application 클래스 사용
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-referrer" title="커스텀 Install Referrer 리시버" class="md-nav__link">
    커스텀 Install Referrer 리시버
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signing-certificate" title="Signing Certificate 생성" class="md-nav__link">
    Signing Certificate 생성
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" title="인스톨 리스너를 통한 매칭" class="md-nav__link">
    인스톨 리스너를 통한 매칭
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multidexing" title="Multidexing 활성화" class="md-nav__link">
    Multidexing 활성화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invalidclassexception-classloadingerror-verificationerror" title="InvalidClassException, ClassLoadingError, 또는 VerificationError" class="md-nav__link">
    InvalidClassException, ClassLoadingError, 또는 VerificationError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#answers-shim-proguard-warning-error" title="answers-shim모듈 관련 Proguard warning 또는 error" class="md-nav__link">
    answers-shim모듈 관련 Proguard warning 또는 error
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appindexing-proguard-warning-error" title="AppIndexing 모듈 관련 Proguard warning 또는 error" class="md-nav__link">
    AppIndexing 모듈 관련 Proguard warning 또는 error
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#play-services-ads-proguard-rule" title="Play Services Ads 모듈을 제외하는 Proguard rule" class="md-nav__link">
    Play Services Ads 모듈을 제외하는 Proguard rule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" title="이 링크를 열수 없다는 에러" class="md-nav__link">
    이 링크를 열수 없다는 에러
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initstate_-session_stateinitialising" title="initState_ == SESSION_STATE.INITIALISING 상태에서 멈추어 있을 경우" class="md-nav__link">
    initState_ == SESSION_STATE.INITIALISING 상태에서 멈추어 있을 경우
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" title="최소 지원 안드로이드 버전" class="md-nav__link">
    최소 지원 안드로이드 버전
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="sdk">안드로이드 SDK 연동가이드 (드래프트)<a class="headerlink" href="#sdk" title="Permanent link">&para;</a></h1>
<ul>
<li>작성자 : 손보형</li>
<li>업데이트: 2019년 3월 11일</li>
</ul>
<hr />
<h2 id="_1">공연 연동 가이드<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>아래의 공식 가이드의 번역본도 함께 참고 하시기 바랍니다.</p>
<ul>
<li><a href="https://docs.branch.io/apps/android/">영문</a>, <a href="https://bson-branch.github.io/docs/pages/apps/android/">국문</a></li>
</ul>
<h2 id="_2">브랜치 연동 가이드<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<ul>
<li>
<h3 id="_3">링크 설정<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<ul>
<li>브랜치링크 클릭시 앱설치 유무에 따라 이후 동작에 필요한 정보들을 설정합니다.</li>
<li><a href="https://branch.dashboard.branch.io/link-settings/general">Link Setting : General</a> 페이지에서 설정합니다.</li>
<li><code>I have an Android App</code>을 선택합니다.</li>
<li><code>Do we think the user has the app</code><ul>
<li><code>Yes</code> : <code>Android URI Scheme</code>에 앱의 스킴을 설정합니다.</li>
<li><code>No</code> :<ul>
<li><code>Google Play Search</code> : 앱을 검색해서 설정합니다.</li>
<li><code>Custom URL</code> : 앱 미설치시 랜딩시킬 URL과 안드로이드 패키지 네임을 설정합니다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img alt="image" src="../../img/android_linksettings_general.png" /></p>
</li>
<li>
<h3 id="branch-sdk">Branch 안드로이드 SDK 관련 정보<a class="headerlink" href="#branch-sdk" title="Permanent link">&para;</a></h3>
<ul>
<li>SDK 사이즈는 대략 200KB 입니다.</li>
<li>지원하는 최소 SDK LEVEL은 16 (Android 4.1, 4.1.1 JELLY_BEAN)입니다.<ul>
<li><a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element#ApiLevels">Android API Level 정보</a></li>
</ul>
</li>
<li>버전 3.0부터는 TLS1.2를 사용하여 통신하고 있습니다.</li>
</ul>
</li>
<li>
<h3 id="_4">브랜치 라이브러리 임포트/설치<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>build.gradle</code>내에 Branch SDK를 임포트 합니다.</p>
<div class="codehilite"><pre><span></span><span class="n">apply</span> <span class="n">plugin</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">application</span><span class="err">&#39;</span>

<span class="n">android</span> <span class="o">{</span>
    <span class="n">compileSdkVersion</span> <span class="mi">25</span>
    <span class="n">buildToolsVersion</span> <span class="s">&quot;25.0.2&quot;</span>
    <span class="n">defaultConfig</span> <span class="o">{</span>
        <span class="n">applicationId</span> <span class="s">&quot;com.eneff.branch.example.android&quot;</span>
        <span class="n">minSdkVersion</span> <span class="mi">16</span>
        <span class="n">targetSdkVersion</span> <span class="mi">25</span>
        <span class="n">versionCode</span> <span class="mi">1</span>
        <span class="n">versionName</span> <span class="s">&quot;1.0&quot;</span>
        <span class="n">testInstrumentationRunner</span> <span class="s">&quot;android.support.test.runner.AndroidJUnitRunner&quot;</span>
    <span class="o">}</span>
    <span class="n">buildTypes</span> <span class="o">{</span>
        <span class="n">release</span> <span class="o">{</span>
            <span class="n">minifyEnabled</span> <span class="kc">false</span>
            <span class="n">proguardFiles</span> <span class="nf">getDefaultProguardFile</span><span class="o">(</span><span class="err">&#39;</span><span class="n">proguard</span><span class="o">-</span><span class="n">android</span><span class="o">.</span><span class="na">txt</span><span class="err">&#39;</span><span class="o">),</span> <span class="err">&#39;</span><span class="n">proguard</span><span class="o">-</span><span class="n">rules</span><span class="o">.</span><span class="na">pro</span><span class="err">&#39;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">implementation</span> <span class="nf">fileTree</span><span class="o">(</span><span class="n">dir</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">libs</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">include</span><span class="o">:</span> <span class="o">[</span><span class="err">&#39;</span><span class="o">*.</span><span class="na">jar</span><span class="err">&#39;</span><span class="o">])</span>
    <span class="n">androidTestImplementation</span> <span class="o">(</span><span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">test</span><span class="o">.</span><span class="na">espresso</span><span class="o">:</span><span class="n">espresso</span><span class="o">-</span><span class="n">core</span><span class="o">:</span><span class="mf">2.2.2</span><span class="err">&#39;</span><span class="o">,</span> <span class="o">{</span>
        <span class="n">exclude</span> <span class="n">group</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">support</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">module</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">support</span><span class="o">-</span><span class="n">annotations</span><span class="err">&#39;</span>
    <span class="o">})</span>
    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">support</span><span class="o">:</span><span class="n">appcompat</span><span class="o">-</span><span class="n">v7</span><span class="o">:</span><span class="mf">25.2.0</span><span class="err">&#39;</span>
    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">support</span><span class="o">:</span><span class="n">design</span><span class="o">:</span><span class="mf">25.2.0</span><span class="err">&#39;</span>

<span class="hll">    <span class="c1">// required</span>
</span><span class="hll">    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">io</span><span class="o">.</span><span class="na">branch</span><span class="o">.</span><span class="na">sdk</span><span class="o">.</span><span class="na">android</span><span class="o">:</span><span class="n">library</span><span class="o">:</span><span class="mf">3.</span><span class="o">+</span><span class="err">&#39;</span> <span class="c1">// 브랜치 SDK입니다.</span>
</span>
<span class="hll">    <span class="c1">// optional</span>
</span><span class="hll">    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">support</span><span class="o">:</span><span class="n">customtabs</span><span class="o">:</span><span class="mf">23.3.0</span><span class="err">&#39;</span> <span class="c1">// 크롬탭을 통한 매칭을 위해 필요합니다.</span>
</span><span class="hll">    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">gms</span><span class="o">:</span><span class="n">play</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="n">ads</span><span class="o">:</span><span class="mi">9</span><span class="o">+</span><span class="err">&#39;</span> <span class="c1">// 구글 광고아이디를 수집하기위해 필요합니다.</span>
</span><span class="hll">    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">gms</span><span class="o">:</span><span class="n">play</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="n">appindexing</span><span class="o">:</span><span class="mf">9.</span><span class="o">+</span><span class="err">&#39;</span> <span class="c1">// 안드로이드 App Links를 사용하시고 있는 경우 필요합니다.</span>
</span>
    <span class="n">testImplementation</span> <span class="err">&#39;</span><span class="n">junit</span><span class="o">:</span><span class="n">junit</span><span class="o">:</span><span class="mf">4.12</span><span class="err">&#39;</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="androidmanifestxml">AndroidManifest.xml 설정<a class="headerlink" href="#androidmanifestxml" title="Permanent link">&para;</a></h3>
<ul>
<li>Application클래스의 onCreate()메쏘드 내에서 SDK가 초기화 되어야 하므로 application태그에 해당 Application 클래스를 지정하셔야 합니다.</li>
<li>대쉬보드에서 라이브키와 테스트키 가져온뒤 이를 설정해야 합니다.</li>
<li>
<p>테스트모드는 AndroidManifest.xml에서 설정하실 수도 있고 코드상으로 설정하실수도 있습니다.</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;manifest</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">package=</span><span class="s">&quot;com.eneff.branch.example.android&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.INTERNET&quot;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;application</span>
        <span class="na">android:allowBackup=</span><span class="s">&quot;true&quot;</span>
<span class="hll">        <span class="na">android:name=</span><span class="s">&quot;com.eneff.branch.example.android.CustomApplicationClass&quot;</span>
</span>        <span class="na">android:icon=</span><span class="s">&quot;@mipmap/ic_launcher&quot;</span>
        <span class="na">android:label=</span><span class="s">&quot;@string/app_name&quot;</span>
        <span class="na">android:supportsRtl=</span><span class="s">&quot;true&quot;</span>
        <span class="na">android:theme=</span><span class="s">&quot;@style/AppTheme&quot;</span><span class="nt">&gt;</span>

        <span class="c">&lt;!-- Launcher Activity to handle incoming Branch intents --&gt;</span>    
        <span class="nt">&lt;activity</span>
<span class="hll">            <span class="na">android:name=</span><span class="s">&quot;.LauncherActivity&quot;</span>
</span>            <span class="na">android:launchMode=</span><span class="s">&quot;singleTask&quot;</span>
            <span class="na">android:label=</span><span class="s">&quot;@string/app_name&quot;</span>
            <span class="na">android:theme=</span><span class="s">&quot;@style/AppTheme.NoActionBar&quot;</span><span class="nt">&gt;</span>

            <span class="nt">&lt;intent-filter&gt;</span>
                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.action.MAIN&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.LAUNCHER&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/intent-filter&gt;</span>
<span class="hll">
</span><span class="hll">            <span class="c">&lt;!-- Branch URI Scheme --&gt;</span>
</span><span class="hll">            <span class="nt">&lt;intent-filter&gt;</span>
</span><span class="hll">                <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">&quot;androidexample&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.DEFAULT&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="nt">/&gt;</span>
</span>            <span class="nt">&lt;/intent-filter&gt;</span>
<span class="hll">
</span><span class="hll">            <span class="c">&lt;!-- Branch App Links (optional) --&gt;</span>
</span><span class="hll">            <span class="nt">&lt;intent-filter</span> <span class="na">android:autoVerify=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.DEFAULT&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">                <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">&quot;https&quot;</span> <span class="na">android:host=</span><span class="s">&quot;example.app.link&quot;</span> <span class="nt">/&gt;</span>
</span>                <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">&quot;https&quot;</span> <span class="na">android:host=</span><span class="s">&quot;example-alternate.app.link&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/intent-filter&gt;</span>
        <span class="nt">&lt;/activity&gt;</span>
<span class="hll">
</span><span class="hll">        <span class="c">&lt;!-- Branch init --&gt;</span>
</span><span class="hll">        <span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.sdk.BranchKey&quot;</span> <span class="na">android:value=</span><span class="s">&quot;key_live_kaFuWw8WvY7yn1d9yYiP8gokwqjV0Sw&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">        <span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.sdk.BranchKey.test&quot;</span> <span class="na">android:value=</span><span class="s">&quot;key_test_hlxrWC5Zx16DkYmWu4AHiimdqugRYMr&quot;</span> <span class="nt">/&gt;</span>
</span>        <span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.sdk.TestMode&quot;</span> <span class="na">android:value=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- Set to true to use Branch_Test_Key --&gt;</span>
<span class="hll">
</span><span class="hll">        <span class="c">&lt;!-- Branch install referrer tracking (optional) --&gt;</span>
</span><span class="hll">        <span class="nt">&lt;receiver</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.referral.InstallListener&quot;</span> <span class="na">android:exported=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">            <span class="nt">&lt;intent-filter&gt;</span>
</span><span class="hll">                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;com.android.vending.INSTALL_REFERRER&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">            <span class="nt">&lt;/intent-filter&gt;</span>
</span>        <span class="nt">&lt;/receiver&gt;</span>

    <span class="nt">&lt;/application&gt;</span>

<span class="nt">&lt;/manifest&gt;</span>
</pre></div>

</li>
<li>
<p>아래의 값들을 Branch 대쉬보드의 <a href="https://dashboard.branch.io/account-settings/app">App settings</a>와 <a href="https://dashboard.branch.io/link-settings">Link settings</a>의 설정값들로 변경합니다</p>
<ul>
<li><code>androidexample</code></li>
<li><code>example.app.link</code></li>
<li><code>example-alternate.app.link</code></li>
<li><code>key_live_kaFuWw8WvY7yn1d9yYiP8gokwqjV0Sw</code></li>
<li><code>key_test_hlxrWC5Zx16DkYmWu4AHiimdqugRYMr</code></li>
</ul>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Single Task launch mode설정이 필요합니다</p>
<p>안드로이드 시스템상에 SingleTask Activity 인스턴스가 없는 경우, 새로운 Activity가 생성되어 동일 Task의 스택의 최상위에 위치하게 됩니다.
Single Task 모드로 설정할 경우 앱 전체가 재시작되지 않을 것입니다. Single Task모드에서는 Main/Splash Activity가 Activity Stack내에 존재하지 않을때만 Main/Splash Activity를 인스턴트를 생성하게됩니다. Main/Splash Activity가 백그라운드에 존재하는 경우에는 Intent가 전달되면 Activity를 포그라운드로 전환시키게 됩니다. Single Task 모드에 대한 자세한 내용은 <a href="https://developer.android.com/guide/components/activities/tasks-and-back-stack.html#TaskLaunchModes">이곳</a>를 참조하시기 바랍니다.</p>
</div>
</li>
<li>
<h3 id="_5">브랜치 초기화<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>LauncherActivity.java</code>에 Branch를 추가합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">com.eneff.branch.example.android</span><span class="o">;</span>

<span class="hll"><span class="kn">import</span> <span class="nn">android.content.Intent</span><span class="o">;</span>
</span><span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.design.widget.FloatingActionButton</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.design.widget.Snackbar</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v7.app.AppCompatActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v7.widget.Toolbar</span><span class="o">;</span>
<span class="hll"><span class="kn">import</span> <span class="nn">android.util.Log</span><span class="o">;</span>
</span><span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.Menu</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.MenuItem</span><span class="o">;</span>

<span class="hll"><span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>
</span>
<span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.Branch</span><span class="o">;</span>
</span><span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.BranchError</span><span class="o">;</span>
</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LauncherActivity</span> <span class="kd">extends</span> <span class="n">AppCompatActivity</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_launcher</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">();</span>

<span class="hll">        <span class="c1">// Branch init</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">(</span><span class="k">new</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchReferralInitListener</span><span class="o">()</span> <span class="o">{</span>
</span><span class="hll">            <span class="nd">@Override</span>
</span><span class="hll">            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">JSONObject</span> <span class="n">referringParams</span><span class="o">,</span> <span class="n">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">                <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">                    <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</span><span class="hll">                    <span class="c1">// Retrieve deeplink keys from &#39;referringParams&#39; and evaluate the values to determine where to route the user</span>
</span><span class="hll">                    <span class="c1">// Check &#39;+clicked_branch_link&#39; before deciding whether to use your Branch routing logic</span>
</span><span class="hll">                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class="hll">                    <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
</span><span class="hll">                <span class="o">}</span>
</span>            <span class="o">}</span>
        <span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">getIntent</span><span class="o">().</span><span class="na">getData</span><span class="o">(),</span> <span class="k">this</span><span class="o">);</span>
<span class="hll">    <span class="o">}</span>
</span><span class="hll">
</span><span class="hll">    <span class="nd">@Override</span>
</span><span class="hll">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onNewIntent</span><span class="o">(</span><span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
</span>        <span class="k">this</span><span class="o">.</span><span class="na">setIntent</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">com.eneff.branch.example.android</span>

<span class="hll"><span class="kn">import</span> <span class="nn">android.content.Intent</span>
</span><span class="kn">import</span> <span class="nn">android.os.Bundle</span>
<span class="kn">import</span> <span class="nn">android.support.design.widget.FloatingActionButton</span>
<span class="kn">import</span> <span class="nn">android.support.design.widget.Snackbar</span>
<span class="kn">import</span> <span class="nn">android.support.v7.app.AppCompatActivity</span>
<span class="kn">import</span> <span class="nn">android.support.v7.widget.Toolbar</span>
<span class="hll"><span class="kn">import</span> <span class="nn">android.util.Log</span>
</span><span class="kn">import</span> <span class="nn">android.view.View</span>
<span class="kn">import</span> <span class="nn">android.view.Menu</span>
<span class="kn">import</span> <span class="nn">android.view.MenuItem</span>

<span class="hll"><span class="kn">import</span> <span class="nn">org.json.JSONObject</span>
</span>
<span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.Branch</span>
</span><span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.BranchError</span>
</span>
<span class="kd">class</span> <span class="nc">LauncherActivity</span> <span class="o">:</span> <span class="n">AppCompatActivity</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">:</span> <span class="n">Bundle</span><span class="o">?)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">)</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_launcher</span><span class="o">)</span>
    <span class="o">}</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">()</span>

<span class="hll">        <span class="c1">// Branch init</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">(</span><span class="n">object</span> <span class="o">:</span> <span class="n">BranchReferralInitListener</span> <span class="o">{</span>
</span><span class="hll">            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">referringParams</span><span class="o">:</span> <span class="n">JSONObject</span><span class="o">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">BranchError</span><span class="o">?)</span> <span class="o">{</span>
</span><span class="hll">                <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">                    <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">)</span>
</span><span class="hll">                    <span class="c1">// Retrieve deeplink keys from &#39;referringParams&#39; and evaluate the values to determine where to route the user</span>
</span><span class="hll">                    <span class="c1">// Check &#39;+clicked_branch_link&#39; before deciding whether to use your Branch routing logic</span>
</span><span class="hll">                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class="hll">                    <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">message</span><span class="o">)</span>
</span><span class="hll">                <span class="o">}</span>
</span>            <span class="o">}</span>
        <span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">data</span><span class="o">,</span> <span class="k">this</span><span class="o">)</span>
<span class="hll">    <span class="o">}</span>
</span><span class="hll">
</span><span class="hll">    <span class="kd">public</span> <span class="n">override</span> <span class="n">fun</span> <span class="nf">onNewIntent</span><span class="o">(</span><span class="n">intent</span><span class="o">:</span> <span class="n">Intent</span><span class="o">)</span> <span class="o">{</span>
</span>        <span class="k">this</span><span class="o">.</span><span class="na">intent</span> <span class="o">=</span> <span class="n">intent</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Branch SDK는 꼭 Launcher Activity에서 초기화 되어야 합니다.</p>
<p>앱은 Launcher Activity를 통해서 열릴것이고, 이 Activity에서 Branch SDK가 초기화 되고 클릭했던 링크의 데이터를 가져올 것입니다.</p>
</div>
<div class="admonition warning">
<p class="admonition-title"><code>onStart()</code>에서만 Branch SDK를 초기화 되어야 합니다.</p>
<p>Branch SDK를 <code>onResume()</code>와 같은 다른 라이프사이클 메쏘드내에서 초기화 하면 의도되지 않은 문제가 발생할 수 있습니다. <code>onStart()</code>는 Activity를 사용자에게 보여지는 단계이며 앱이 포그라운드로 전환되어 사용자와의 상호작용을 하기 위한 준비를 하는 곳입니다. 좀더 자세한 사항은 <a href="https://developer.android.com/guide/components/activities/activity-lifecycle.html">이곳</a>을 참고하시기 바랍니다.</p>
</div>
</li>
<li>
<h3 id="_6">브랜치 로딩<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>CustomApplicationClass.java</code>에 Branch를 추가합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">com.eneff.branch.example.android</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.app.Application</span><span class="o">;</span>
<span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.Branch</span><span class="o">;</span>
</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomApplicationClass</span> <span class="kd">extends</span> <span class="n">Application</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">();</span>

<span class="hll">        <span class="c1">// Branch logging for debugging</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">enableLogging</span><span class="o">();</span>
</span>
<span class="hll">        <span class="c1">// Branch object initialization</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">getAutoInstance</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span>    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">com.eneff.branch.example.android</span>

<span class="kn">import</span> <span class="nn">android.app.Application</span>
<span class="hll"><span class="kn">import</span> <span class="nn">io.branch.referral.Branch</span>
</span>
<span class="kd">class</span> <span class="nc">CustomApplicationClass</span> <span class="o">:</span> <span class="n">Application</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onCreate</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">()</span>

<span class="hll">        <span class="c1">// Branch logging for debugging</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">enableLogging</span><span class="o">()</span>
</span>
<span class="hll">        <span class="c1">// Branch object initialization</span>
</span><span class="hll">        <span class="n">Branch</span><span class="o">.</span><span class="na">getAutoInstance</span><span class="o">(</span><span class="k">this</span><span class="o">)</span>
</span>    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_7">딥링크 테스트<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><a href="https://dashboard.branch.io/marketing">Branch Dashboard</a>에서 딥링크를 생성합니다.</p>
</li>
<li>
<p>기기에서 앱을 삭제합니다.</p>
</li>
<li>
<p>컴파일후 기기에 앱을 설치합니다.</p>
</li>
<li>
<p><code>Google Hangouts</code>에 딥링크를 붙여 넣습니다.</p>
</li>
<li>
<p>앱을 열기 위해 딥링크를 클릭합니다.</p>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Deferred 딥링킹 테스트</p>
<p>Deferred 딥링킹은 클릭시 아직 앱이 설치되어 있지 않은 경우에 딥링킹을 수행하는 것입니다. 앱이 설치된 후 앱이 최초로 실행될때 클릭했던 브랜치 링크에 설정되었던 딥링크 데이터를 가져오게 됩니다. 이를 테스트 하기 위해서는 기기에서 앱을 삭제한 뒤, 브랜치 링크를 클릭하고, 앱을 수동으로 실행합니다. 앱이 오픈되면 앱내 해당 컨텐츠로 정상적으로 이동해야 합니다.</p>
</div>
</li>
</ul>
<h2 id="_8">기능 구현<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<ul>
<li>
<h3 id="_9">컨텐츠 레퍼런스 생성<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>Branch Universal Object</code>는 컨텐츠 또는 유저와 같이 공유하려는 것을 캡슐화 합니다.</p>
</li>
<li>
<p><a href="#/pages/links/integrate/#universal-object">Universal Object Properties</a>를 사용합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">BranchUniversalObject</span> <span class="n">buo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BranchUniversalObject</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setCanonicalIdentifier</span><span class="o">(</span><span class="s">&quot;content/12345&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">&quot;My Content Title&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setContentDescription</span><span class="o">(</span><span class="s">&quot;My Content Description&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setContentImageUrl</span><span class="o">(</span><span class="s">&quot;https://lorempixel.com/400/400&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setContentIndexingMode</span><span class="o">(</span><span class="n">BranchUniversalObject</span><span class="o">.</span><span class="na">CONTENT_INDEX_MODE</span><span class="o">.</span><span class="na">PUBLIC</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setLocalIndexMode</span><span class="o">(</span><span class="n">BranchUniversalObject</span><span class="o">.</span><span class="na">CONTENT_INDEX_MODE</span><span class="o">.</span><span class="na">PUBLIC</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setContentMetadata</span><span class="o">(</span><span class="k">new</span> <span class="n">ContentMetadata</span><span class="o">().</span><span class="na">addCustomMetadata</span><span class="o">(</span><span class="s">&quot;key1&quot;</span><span class="o">,</span> <span class="s">&quot;value1&quot;</span><span class="o">));</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">val</span> <span class="n">buo</span> <span class="o">=</span> <span class="n">BranchUniversalObject</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setCanonicalIdentifier</span><span class="o">(</span><span class="s">&quot;content/12345&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">&quot;My Content Title&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setContentDescription</span><span class="o">(</span><span class="s">&quot;My Content Description&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setContentImageUrl</span><span class="o">(</span><span class="s">&quot;https://lorempixel.com/400/400&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setContentIndexingMode</span><span class="o">(</span><span class="n">BranchUniversalObject</span><span class="o">.</span><span class="na">CONTENT_INDEX_MODE</span><span class="o">.</span><span class="na">PUBLIC</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setLocalIndexMode</span><span class="o">(</span><span class="n">BranchUniversalObject</span><span class="o">.</span><span class="na">CONTENT_INDEX_MODE</span><span class="o">.</span><span class="na">PUBLIC</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setContentMetadata</span><span class="o">(</span><span class="n">ContentMetadata</span><span class="o">().</span><span class="na">addCustomMetadata</span><span class="o">(</span><span class="s">&quot;key1&quot;</span><span class="o">,</span> <span class="s">&quot;value1&quot;</span><span class="o">))</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_10">딥링크 생성<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>캡슐화된 데이터로 딥링크 URL을 생성합니다.</p>
</li>
<li>
<p><a href="#컨텐츠-레퍼런스-생성">Branch Universal Object</a>가 필요합니다.</p>
</li>
<li>
<p><a href="/pages/links/integrate/">Deep Link Properties</a>를 사용합니다.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/links">Branch Dashboard</a>에서 데이터를 확인합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">LinkProperties</span> <span class="n">lp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkProperties</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setChannel</span><span class="o">(</span><span class="s">&quot;facebook&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setFeature</span><span class="o">(</span><span class="s">&quot;sharing&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setCampaign</span><span class="o">(</span><span class="s">&quot;content 123 launch&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setStage</span><span class="o">(</span><span class="s">&quot;new user&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;$desktop_url&quot;</span><span class="o">,</span> <span class="s">&quot;http://example.com/home&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;custom&quot;</span><span class="o">,</span> <span class="s">&quot;data&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;custom_random&quot;</span><span class="o">,</span> <span class="n">Long</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getTimeInMillis</span><span class="o">()));</span>

<span class="n">buo</span><span class="o">.</span><span class="na">generateShortUrl</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">lp</span><span class="o">,</span> <span class="k">new</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchLinkCreateListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onLinkCreate</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">,</span> <span class="n">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="s">&quot;got my Branch link to share: &quot;</span> <span class="o">+</span> <span class="n">url</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">val</span> <span class="n">lp</span> <span class="o">=</span> <span class="n">LinkProperties</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setChannel</span><span class="o">(</span><span class="s">&quot;facebook&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setFeature</span><span class="o">(</span><span class="s">&quot;sharing&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setCampaign</span><span class="o">(</span><span class="s">&quot;content 123 launch&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setStage</span><span class="o">(</span><span class="s">&quot;new user&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;$desktop_url&quot;</span><span class="o">,</span> <span class="s">&quot;http://example.com/home&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;custom&quot;</span><span class="o">,</span> <span class="s">&quot;data&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;custom_random&quot;</span><span class="o">,</span> <span class="n">Long</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getTimeInMillis</span><span class="o">()))</span>

<span class="n">buo</span><span class="o">.</span><span class="na">generateShortUrl</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">lp</span><span class="o">,</span> <span class="n">BranchLinkCreateListener</span> <span class="o">{</span> <span class="n">url</span><span class="o">,</span> <span class="n">error</span> <span class="o">-&gt;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="s">&quot;got my Branch link to share: &quot;</span> <span class="o">+</span> <span class="n">url</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">})</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_11">딥링크 공유<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>유저가 선택한 채널정보가 태깅된 브랜치 딥링크를 생성합니다.</p>
</li>
<li>
<p><a href="#컨텐츠-레퍼런스-생성">Branch Universal Object</a>가 필요합니다.</p>
</li>
<li>
<p><a href="/pages/links/integrate/">Deep Link Properties</a>를 사용합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">LinkProperties</span> <span class="n">lp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkProperties</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setChannel</span><span class="o">(</span><span class="s">&quot;facebook&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setFeature</span><span class="o">(</span><span class="s">&quot;sharing&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setCampaign</span><span class="o">(</span><span class="s">&quot;content 123 launch&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setStage</span><span class="o">(</span><span class="s">&quot;new user&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;$desktop_url&quot;</span><span class="o">,</span> <span class="s">&quot;http://example.com/home&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;custom&quot;</span><span class="o">,</span> <span class="s">&quot;data&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;custom_random&quot;</span><span class="o">,</span> <span class="n">Long</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getTimeInMillis</span><span class="o">()));</span>

<span class="n">ShareSheetStyle</span> <span class="n">ss</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ShareSheetStyle</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="s">&quot;Check this out!&quot;</span><span class="o">,</span> <span class="s">&quot;This stuff is awesome: &quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setCopyUrlStyle</span><span class="o">(</span><span class="n">ContextCompat</span><span class="o">.</span><span class="na">getDrawable</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">android</span><span class="o">.</span><span class="na">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">ic_menu_send</span><span class="o">),</span> <span class="s">&quot;Copy&quot;</span><span class="o">,</span> <span class="s">&quot;Added to clipboard&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setMoreOptionStyle</span><span class="o">(</span><span class="n">ContextCompat</span><span class="o">.</span><span class="na">getDrawable</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">android</span><span class="o">.</span><span class="na">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">ic_menu_search</span><span class="o">),</span> <span class="s">&quot;Show more&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addPreferredSharingOption</span><span class="o">(</span><span class="n">SharingHelper</span><span class="o">.</span><span class="na">SHARE_WITH</span><span class="o">.</span><span class="na">FACEBOOK</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addPreferredSharingOption</span><span class="o">(</span><span class="n">SharingHelper</span><span class="o">.</span><span class="na">SHARE_WITH</span><span class="o">.</span><span class="na">EMAIL</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addPreferredSharingOption</span><span class="o">(</span><span class="n">SharingHelper</span><span class="o">.</span><span class="na">SHARE_WITH</span><span class="o">.</span><span class="na">MESSAGE</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addPreferredSharingOption</span><span class="o">(</span><span class="n">SharingHelper</span><span class="o">.</span><span class="na">SHARE_WITH</span><span class="o">.</span><span class="na">HANGOUT</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setAsFullWidthStyle</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setSharingTitle</span><span class="o">(</span><span class="s">&quot;Share With&quot;</span><span class="o">);</span>

<span class="n">buo</span><span class="o">.</span><span class="na">showShareSheet</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">lp</span><span class="o">,</span>  <span class="n">ss</span><span class="o">,</span>  <span class="k">new</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchLinkShareListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onShareLinkDialogLaunched</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onShareLinkDialogDismissed</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onLinkShareResponse</span><span class="o">(</span><span class="n">String</span> <span class="n">sharedLink</span><span class="o">,</span> <span class="n">String</span> <span class="n">sharedChannel</span><span class="o">,</span> <span class="n">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onChannelSelected</span><span class="o">(</span><span class="n">String</span> <span class="n">channelName</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">var</span> <span class="n">lp</span> <span class="o">=</span> <span class="n">LinkProperties</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setChannel</span><span class="o">(</span><span class="s">&quot;facebook&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setFeature</span><span class="o">(</span><span class="s">&quot;sharing&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setCampaign</span><span class="o">(</span><span class="s">&quot;content 123 launch&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setStage</span><span class="o">(</span><span class="s">&quot;new user&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;$desktop_url&quot;</span><span class="o">,</span> <span class="s">&quot;http://example.com/home&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;custom&quot;</span><span class="o">,</span> <span class="s">&quot;data&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addControlParameter</span><span class="o">(</span><span class="s">&quot;custom_random&quot;</span><span class="o">,</span> <span class="n">Long</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getTimeInMillis</span><span class="o">()))</span>

<span class="n">val</span> <span class="n">ss</span> <span class="o">=</span> <span class="n">ShareSheetStyle</span><span class="o">(</span><span class="k">this</span><span class="nd">@MainActivity</span><span class="o">,</span> <span class="s">&quot;Check this out!&quot;</span><span class="o">,</span> <span class="s">&quot;This stuff is awesome: &quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setCopyUrlStyle</span><span class="o">(</span><span class="n">resources</span><span class="o">.</span><span class="na">getDrawable</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">android</span><span class="o">.</span><span class="na">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">ic_menu_send</span><span class="o">),</span> <span class="s">&quot;Copy&quot;</span><span class="o">,</span> <span class="s">&quot;Added to clipboard&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setMoreOptionStyle</span><span class="o">(</span><span class="n">resources</span><span class="o">.</span><span class="na">getDrawable</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">android</span><span class="o">.</span><span class="na">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">ic_menu_search</span><span class="o">),</span> <span class="s">&quot;Show more&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addPreferredSharingOption</span><span class="o">(</span><span class="n">SharingHelper</span><span class="o">.</span><span class="na">SHARE_WITH</span><span class="o">.</span><span class="na">FACEBOOK</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addPreferredSharingOption</span><span class="o">(</span><span class="n">SharingHelper</span><span class="o">.</span><span class="na">SHARE_WITH</span><span class="o">.</span><span class="na">EMAIL</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addPreferredSharingOption</span><span class="o">(</span><span class="n">SharingHelper</span><span class="o">.</span><span class="na">SHARE_WITH</span><span class="o">.</span><span class="na">MESSAGE</span><span class="o">)</span>
    <span class="o">.</span><span class="na">addPreferredSharingOption</span><span class="o">(</span><span class="n">SharingHelper</span><span class="o">.</span><span class="na">SHARE_WITH</span><span class="o">.</span><span class="na">HANGOUT</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setAsFullWidthStyle</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setSharingTitle</span><span class="o">(</span><span class="s">&quot;Share With&quot;</span><span class="o">)</span>

<span class="n">buo</span><span class="o">.</span><span class="na">showShareSheet</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">lp</span><span class="o">,</span> <span class="n">ss</span><span class="o">,</span> <span class="n">object</span> <span class="o">:</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchLinkShareListener</span> <span class="o">{</span>
    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onShareLinkDialogLaunched</span><span class="o">()</span> <span class="o">{}</span>
    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onShareLinkDialogDismissed</span><span class="o">()</span> <span class="o">{}</span>
    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onLinkShareResponse</span><span class="o">(</span><span class="n">sharedLink</span><span class="o">:</span> <span class="n">String</span><span class="o">,</span> <span class="n">sharedChannel</span><span class="o">:</span> <span class="n">String</span><span class="o">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">BranchError</span><span class="o">)</span> <span class="o">{}</span>
    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onChannelSelected</span><span class="o">(</span><span class="n">channelName</span><span class="o">:</span> <span class="n">String</span><span class="o">)</span> <span class="o">{}</span>
<span class="o">})</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_12">딥링크 데이터 조회<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>딥링크에 설정된 브랜치 데이터를 조회합니다.</p>
</li>
<li>
<p>(Race Condition)을 방지하기 위해서, <code>listener</code>를 통해서 데이터를 수신하는 것을 권장합니다.</p>
</li>
<li>
<p><a href="/pages/links/integrate/#read-deep-links">deep link properties</a>가 반환됩니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// listener (within Main Activity&#39;s onStart)</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">(</span><span class="k">new</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchReferralInitListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">JSONObject</span> <span class="n">referringParams</span><span class="o">,</span> <span class="n">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">getIntent</span><span class="o">().</span><span class="na">getData</span><span class="o">(),</span> <span class="k">this</span><span class="o">);</span>

<span class="c1">// latest</span>
<span class="n">JSONObject</span> <span class="n">sessionParams</span> <span class="o">=</span> <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getLatestReferringParams</span><span class="o">();</span>

<span class="c1">// first</span>
<span class="n">JSONObject</span> <span class="n">installParams</span> <span class="o">=</span> <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getFirstReferringParams</span><span class="o">();</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// listener (within Main Activity&#39;s onStart)</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">(</span><span class="n">object</span> <span class="o">:</span> <span class="n">BranchReferralInitListener</span> <span class="o">{</span>
    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">referringParams</span><span class="o">:</span> <span class="n">JSONObject</span><span class="o">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">BranchError</span><span class="o">?)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">)</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">message</span><span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">data</span><span class="o">,</span> <span class="k">this</span><span class="o">)</span>

<span class="c1">// latest</span>
<span class="n">val</span> <span class="n">sessionParams</span> <span class="o">=</span> <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">latestReferringParams</span>

<span class="c1">// first</span>
<span class="n">val</span> <span class="n">installParams</span> <span class="o">=</span> <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">firstReferringParams</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_13">컨텐츠로의 이동<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>브랜치 딥링크 데이터를 읽어와서 컨텐츠로의 이동을 처리합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// listener (within Main Activity&#39;s onStart)</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">(</span><span class="k">new</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchReferralInitListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">JSONObject</span> <span class="n">referringParams</span><span class="o">,</span> <span class="n">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// option 1: log data</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

            <span class="c1">// option 2: save data to be used later</span>
            <span class="n">SharedPreferences</span> <span class="n">preferences</span> <span class="o">=</span> <span class="o">.</span><span class="na">getSharedPreferences</span><span class="o">(</span><span class="s">&quot;MyPreferences&quot;</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">);</span>
            <span class="n">SharedPreferences</span><span class="o">.</span><span class="na">Editor</span> <span class="n">editor</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="na">edit</span><span class="o">();</span>
            <span class="n">editor</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="s">&quot;branchData&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
            <span class="n">editor</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>

            <span class="c1">// option 3: navigate to page</span>
            <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">OtherActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branchData&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
            <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>

            <span class="c1">// option 4: display data</span>
            <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">getIntent</span><span class="o">().</span><span class="na">getData</span><span class="o">(),</span> <span class="k">this</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// listener (within Main Activity&#39;s onStart)</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">(</span><span class="n">object</span> <span class="o">:</span> <span class="n">BranchReferralInitListener</span> <span class="o">{</span>
    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onInitFinished</span><span class="o">(</span><span class="n">referringParams</span><span class="o">:</span> <span class="n">JSONObject</span><span class="o">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">BranchError</span><span class="o">?)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// option 1: log data</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">())</span>

            <span class="c1">// option 2: save data to be used later</span>
            <span class="n">val</span> <span class="n">preferences</span> <span class="o">=</span>  <span class="n">getSharedPreferences</span><span class="o">(</span><span class="s">&quot;MyPreferences&quot;</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">)</span>
            <span class="n">val</span> <span class="n">editor</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="na">edit</span><span class="o">()</span>
            <span class="n">editor</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="s">&quot;branchData&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span>
            <span class="n">editor</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>

            <span class="c1">// option 3: navigate to page</span>
            <span class="n">val</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">MainActivity2</span><span class="o">::</span><span class="n">class</span><span class="o">.</span><span class="na">java</span><span class="o">)</span>
            <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branchData&quot;</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span>
            <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">)</span>

            <span class="c1">// option 4: display data</span>
            <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">referringParams</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">()</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">message</span><span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">},</span> <span class="k">this</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">data</span><span class="o">,</span> <span class="k">this</span><span class="o">)</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_14">컨텐츠 노출<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>App Indexing</code>을 사용해서 <code>Google Search</code>에 컨텐츠를 노출시킵니다.</p>
</li>
<li>
<p><a href="#https://dashboard.branch.io/search">Branch Dashboard</a>에서 앱 인덱싱을 활성화 합니다.</p>
</li>
<li>
<p><a href="https://branch.io/resources/app-indexing/">App indexing validator</a>로 검증합니다.</p>
</li>
<li>
<p><a href="#컨텐츠-레퍼런스-생성">Branch Universal Object</a>가 필요합니다.</p>
</li>
<li>
<p><code>build.gradle</code>에 앱인덱싱 라이브러리를 추가합니다.</p>
<div class="codehilite"><pre><span></span><span class="n">compile</span> <span class="err">&#39;</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">gms</span><span class="o">:</span><span class="n">play</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="n">appindexing</span><span class="o">:</span><span class="mf">9.</span><span class="o">+</span><span class="err">&#39;</span>
</pre></div>

</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">buo</span><span class="o">.</span><span class="na">listOnGoogleSearch</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">buo</span><span class="o">.</span><span class="na">listOnGoogleSearch</span><span class="o">(</span><span class="k">this</span><span class="o">)</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_15">컨텐츠 트래킹<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>사용자의 컨텐츠를 조회를 트래킹합니다.</p>
</li>
<li>
<p><a href="#컨텐츠-레퍼런스-생성">Branch Universal Object</a>가 필요합니다.</p>
</li>
<li>
<p><a href="#track-content-properties">Track content properties</a>를 사용합니다.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/content">Branch Dashboard</a>에서 데이터를 검증합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="n">BranchEvent</span><span class="o">(</span><span class="n">BRANCH_STANDARD_EVENT</span><span class="o">.</span><span class="na">VIEW_ITEM</span><span class="o">).</span><span class="na">addContentItems</span><span class="o">(</span><span class="n">buo</span><span class="o">).</span><span class="na">logEvent</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">BranchEvent</span><span class="o">(</span><span class="n">BRANCH_STANDARD_EVENT</span><span class="o">.</span><span class="na">VIEW_ITEM</span><span class="o">).</span><span class="na">addContentItems</span><span class="o">(</span><span class="n">buo</span><span class="o">).</span><span class="na">logEvent</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_16">사용자 트래킹<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>이벤트, 딥링크, Referral에 사용자에 대한 식별자(email, ID, UUID, etc)를 설정합니다. 사용자의 식별자 설정의 경우 꼭 사내 개인정보보호 관련부서와 사전 논의합니다.</p>
</li>
<li>
<p>설정가능한 사용자 식별자의 최대 길이는 <code>127</code>입니다.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/identities">Branch Dashboard</a>에서 데이터를 검증합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// login</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">setIdentity</span><span class="o">(</span><span class="s">&quot;your_user_id&quot;</span><span class="o">);</span>

<span class="c1">// logout</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">logout</span><span class="o">();</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// login</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">setIdentity</span><span class="o">(</span><span class="s">&quot;your_user_id&quot;</span><span class="o">)</span>

<span class="c1">// logout</span>
<span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">logout</span><span class="o">()</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_17">이벤트 트래킹<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>고객의 구매활동과 관련된 모든 이벤트들은 "Commerce" 클래스의 데이터아이템으로 분류됩니다.</p>
</li>
<li>
<p>사용자가 앱내 컨텐츠와 상호작용하는 것에 관련된 모든 이벤트들은 "Content" 클래스의 데이터아이템으로 분류됩니다.</p>
</li>
<li>
<p>사용자들이 앱사용을 진행하면서 발생하는 것에 관련된 모든 이벤트들은 "lifecycle" 클래스의 데이터아이템으로 분류됩니다.</p>
</li>
<li>
<p>아래의 표에 없는 커스텀 이벤트에 대한 트래킹은 <a href="https://docs.branch.io/pages/apps/v2event/#track-custom-events">Track Custom Events</a>문서를 참고하세요.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/events">Branch Dashboard</a>에서 데이터를 검증합니다.</p>
</li>
</ul>
</li>
</ul>
<p>Use the table below to quickly find the event you want to track.</p>
<table>
<thead>
<tr>
<th align="center">Event Name</th>
<th align="center">Event Category</th>
<th align="center">iOS</th>
<th align="center">Android</th>
<th align="center">API</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Add To Cart</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventAddToCart</td>
<td align="center">BRANCH_STANDARD_EVENT.ADD_TO_CART</td>
<td align="center">ADD_TO_CART</td>
</tr>
<tr>
<td align="center">Add To Wishlist</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventAddToWishlist</td>
<td align="center">BRANCH_STANDARD_EVENT.ADD_TO_WISHLIST</td>
<td align="center">ADD_TO_WISHLIST</td>
</tr>
<tr>
<td align="center">View Cart</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventViewCart</td>
<td align="center">BRANCH_STANDARD_EVENT.VIEW_CART</td>
<td align="center">VIEW_CART</td>
</tr>
<tr>
<td align="center">Initiate Purchase</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventInitiatePurchase</td>
<td align="center">BRANCH_STANDARD_EVENT.INITIATE_PURCHASE</td>
<td align="center">INITIATE_PURCHASE</td>
</tr>
<tr>
<td align="center">Add Payment Info</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventAddPaymentInfo</td>
<td align="center">BRANCH_STANDARD_EVENT.ADD_PAYMENT_INFO</td>
<td align="center">ADD_PAYMENT_INFO</td>
</tr>
<tr>
<td align="center">Purchase</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventPurchase</td>
<td align="center">BRANCH_STANDARD_EVENT.PURCHASE</td>
<td align="center">PURCHASE</td>
</tr>
<tr>
<td align="center">Spend Credits</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventSpendCredits</td>
<td align="center">BRANCH_STANDARD_EVENT.SPEND_CREDITS</td>
<td align="center">SPEND_CREDITS</td>
</tr>
<tr>
<td align="center">Search</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventSearch</td>
<td align="center">BRANCH_STANDARD_EVENT.SEARCH</td>
<td align="center">SEARCH</td>
</tr>
<tr>
<td align="center">View Item</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventViewItem</td>
<td align="center">BRANCH_STANDARD_EVENT.VIEW_ITEM</td>
<td align="center">VIEW_ITEM</td>
</tr>
<tr>
<td align="center">View Items</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventViewItems</td>
<td align="center">BRANCH_STANDARD_EVENT.VIEW_ITEMS</td>
<td align="center">VIEW_ITEMS</td>
</tr>
<tr>
<td align="center">Rate</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventRate</td>
<td align="center">BRANCH_STANDARD_EVENT.RATE</td>
<td align="center">RATE</td>
</tr>
<tr>
<td align="center">Share</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventShare</td>
<td align="center">BRANCH_STANDARD_EVENT.SHARE</td>
<td align="center">SHARE</td>
</tr>
<tr>
<td align="center">Complete Registration</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventCompleteRegistration</td>
<td align="center">BRANCH_STANDARD_EVENT.COMPLETE_REGISTRATION</td>
<td align="center">COMPLETE_REGISTRATION</td>
</tr>
<tr>
<td align="center">Complete Tutorial</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventCompleteTutorial</td>
<td align="center">BRANCH_STANDARD_EVENT.COMPLETE_TUTORIAL</td>
<td align="center">COMPLETE_TUTORIAL</td>
</tr>
<tr>
<td align="center">Achieve Level</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventAchieveLevel</td>
<td align="center">BRANCH_STANDARD_EVENT.ACHIEVE_LEVEL</td>
<td align="center">ACHIEVE_LEVEL</td>
</tr>
<tr>
<td align="center">Unlock Achievement</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventUnlockAchievement</td>
<td align="center">BRANCH_STANDARD_EVENT.UNLOCK_ACHIEVEMENT</td>
<td align="center">UNLOCK_ACHIEVEMENT</td>
</tr>
</tbody>
</table>
<ul>
<li>
<h3 id="referral">Referral 처리<a class="headerlink" href="#referral" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Referral 포인트는 <a href="https://dashboard.branch.io/referrals/rules">Branch Dashboard</a>의 Referral 룰에 의해서 주어집니다.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/referrals/analytics">Branch Dashboard</a>에서 데이터를 검증합니다.</p>
</li>
<li>
<p>Reward credits (리워드 크레딧)</p>
<ul>
<li><a href="/pages/dashboard/analytics/#referrals">Referral guide</a></li>
</ul>
</li>
<li>
<p>Redeem credits (크레딧 상환)</p>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">redeemRewards</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">redeemRewards</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
</pre></div>

</li>
</ul>
</li>
<li>
<p>Load credits (크레딧 로딩)</p>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">loadRewards</span><span class="o">(</span><span class="k">new</span> <span class="n">BranchReferralStateChangedListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStateChanged</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">changed</span><span class="o">,</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">credits</span> <span class="o">=</span> <span class="n">branch</span><span class="o">.</span><span class="na">getCredits</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">loadRewards</span> <span class="o">{</span> <span class="n">changed</span><span class="o">,</span> <span class="n">error</span> <span class="o">-&gt;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="s">&quot;branch load rewards failed. Caused by -&quot;</span> <span class="o">+</span> <span class="n">error</span><span class="o">.</span><span class="na">message</span><span class="o">)</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="s">&quot;changed = &quot;</span> <span class="o">+</span> <span class="n">changed</span><span class="o">)</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="s">&quot;rewards = &quot;</span> <span class="o">+</span> <span class="n">branch</span><span class="o">.</span><span class="na">credits</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
</li>
<li>
<p>Load history (히스토리 로딩)</p>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getCreditHistory</span><span class="o">(</span><span class="k">new</span> <span class="n">BranchListResponseListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onReceivingResponse</span><span class="o">(</span><span class="n">JSONArray</span> <span class="n">list</span><span class="o">,</span> <span class="n">Branch</span><span class="o">.</span><span class="na">BranchError</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="s">&quot;branch load rewards failed. Caused by -&quot;</span> <span class="o">+</span> <span class="n">error</span><span class="o">.</span><span class="na">message</span><span class="o">)</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">list</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getCreditHistory</span> <span class="o">{</span> <span class="n">history</span><span class="o">,</span> <span class="n">error</span> <span class="o">-&gt;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="s">&quot;branch load credit history failed. Caused by -&quot;</span> <span class="o">+</span> <span class="n">error</span><span class="o">.</span><span class="na">message</span><span class="o">)</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">history</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="n">history</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;BRANCH SDK&quot;</span><span class="o">,</span> <span class="s">&quot;no history found&quot;</span><span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="_18">푸시알림 처리<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Result Intent에 브랜치 링크를 추가해서 GCM 푸시 알림을 통한 컨텐츠로의 딥링킹이 처리됩니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">Intent</span> <span class="n">resultIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">TargetClass</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span><span class="s">&quot;http://xxxx.app.link/testlink&quot;</span><span class="o">);</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
<span class="n">PendingIntent</span> <span class="n">resultPendingIntent</span> <span class="o">=</span>  <span class="n">PendingIntent</span><span class="o">.</span><span class="na">getActivity</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">resultIntent</span><span class="o">,</span> <span class="n">PendingIntent</span><span class="o">.</span><span class="na">FLAG_UPDATE_CURRENT</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">val</span> <span class="n">resultIntent</span> <span class="o">=</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">TargetClass</span><span class="o">::</span><span class="n">class</span><span class="o">.</span><span class="na">java</span><span class="o">)</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span> <span class="s">&quot;http://xxxx.app.link/testlink&quot;</span><span class="o">)</span>
<span class="n">val</span> <span class="n">resultPendingIntent</span> <span class="o">=</span> <span class="n">PendingIntent</span><span class="o">.</span><span class="na">getActivity</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">resultIntent</span><span class="o">,</span> <span class="n">PendingIntent</span><span class="o">.</span><span class="na">FLAG_UPDATE_CURRENT</span><span class="o">)</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_19">앱 내에서 링크 처리<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Chrome Intent를 실행해서 앱내에서 현재앱내로의 딥링킹을 수행할수 있습니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">ActivityToLaunch</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span><span class="s">&quot;http://xxxx.app.link/testlink&quot;</span><span class="o">);</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
<span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">val</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">ActivityToLaunch</span><span class="o">::</span><span class="n">class</span><span class="o">.</span><span class="na">java</span><span class="o">)</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span> <span class="s">&quot;http://xxxx.app.link/testlink&quot;</span><span class="o">)</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
<span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">)</span>
</pre></div>

</li>
<li>
<p>"<a href="http://xxxx.app.link/testlink&quot;를">http://xxxx.app.link/testlink"를</a> 실제 링크 URL로 변경하세요.</p>
</li>
</ul>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>앱내에서 새로운 딥링크를 처리하는 경우 현재의 세션 데이터가 지워지고, 새로 참조된 "open"으로 애트리뷰션이 됩니다.</p>
</div>
<ul>
<li>
<h3 id="100">100% 정확도 매칭 활성화<a class="headerlink" href="#100" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>애트리뷰션의 정확도를 향상 시키기위해 <code>Chrome Tabs</code>을 사용합니다.</p>
</li>
<li>
<p><code>build.gradle</code>파일에 <code>compile 'com.android.support:customtabs:23.3.0'</code>을 추가합니다.</p>
</li>
</ul>
</li>
<li>
<h3 id="_20">사용자 트래킹 활성화 / 비활성화<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p>GDPR관련 또는 다른 목적으로 트래킹을 원치 않는 사용자의 요청에 대응할 필요가 있다면, 네트워크 데이터전송을 차단하여 해당 사용자에 대한 트래킹을 중단할 수 있습니다. 이 기능은 특정링크 또는 브랜치 링크를 통해서 어떤 사용자에게든 활성화 할 수 있습니다.</p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">disableTracking</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</pre></div>

<p>앱이 실행되는 동안 호출이 가능하며, 한번 호출이 되면 브랜치 SDK의 모든 네트워크 데이터 전송이 차단됩니다. 링크생성 기능은 계속 동작합니다만, 해당 유저를 식별할 수 있는 정보는 포함되지 않을 것입니다. 딥링킹도 계속 동작하지만 해당 유저에 대한 분석정보는 트래킹되지 않을 것입니다.</p>
</li>
</ul>
<h2 id="_21">문제 해결<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h2>
<ul>
<li>
<h3 id="_22">로깅기능 활성화<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">enableLogging</span><span class="o">();</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_23">브랜치 연동 테스트<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<p>메인 Activity의 onStart()메쏘드 내에서 <code>IntegrationValidator.validate</code>메쏘드를 호출해서 브랜치연동에 관련된 항목들을 테스트 할수 있습니다. ADB Logcat을 통해서 SDK 연동 테스트가 통과 되는지 확인하시기 바랍니다. 상용/릴리즈 빌드에서는 <code>IntegrationValidator.validate</code> 메쏘드를 꼭 주척처리해서 제거 해주어야 합니다.</p>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">IntegrationValidator</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">);</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_24">샘플 테스트 앱<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><a href="https://github.com/BranchMetrics/Branch-Example-Deep-Linking-Branchster-Android">Branchsters</a></p>
</li>
<li>
<p><a href="https://github.com/BranchMetrics/android-branch-deep-linking/tree/master/Branch-SDK-TestBed">Testbed</a></p>
</li>
</ul>
</li>
<li>
<h3 id="_25">인스톨 시뮬레이션<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>기기의 hardware_id 수집을 우회합니다.</p>
<ul>
<li>
<p><code>AndroidManifest.xml</code>에서 아래와 같이 <code>true</code>로 설정합니다.</p>
<p><div class="codehilite"><pre><span></span><span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.sdk.TestMode&quot;</span> <span class="na">android:value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
        - <em>[또는]</em> <code>Branch.getInstance().initSession()</code> 호출 이전에 <code>Branch.enableTestMode();</code> 을 추가합니다.</p>
</li>
<li>
<p>상용/릴리즈 빌드나 Google Play Store 제출용 버전에서는 <code>TestMode</code>를 사용하면 안됩니다.</p>
</li>
</ul>
</li>
<li>
<p>기기에서 앱을 삭제</p>
</li>
<li>
<p>브랜치 딥링크를 클릭합니다. (앱이 설치되어있지 않으므로 fallback URL로 이동 할것입니다.)</p>
</li>
<li>
<p>앱을 재설치 합니다.</p>
</li>
<li>
<p><code>Branch.getInstance().initSession()</code>에서 딥링크 데이터를 읽어 <code>+is_first_session=true</code>이 반환되는지 확인합니다.</p>
</li>
</ul>
</li>
<li>
<h3 id="_26">컨텐츠 속성 트래킹<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><a href="#컨텐츠-트래킹">컨텐츠 트래킹</a>에 사용됩니다.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>BNCRegisterViewEvent</td>
<td>오브젝트 조회</td>
</tr>
<tr>
<td>BNCAddToWishlistEvent</td>
<td>Wishlist에 오브젝트 추가</td>
</tr>
<tr>
<td>BNCAddToCartEvent</td>
<td>Cart에 오브젝트 추가</td>
</tr>
<tr>
<td>BNCPurchaseInitiatedEvent</td>
<td>Check-out 시작</td>
</tr>
<tr>
<td>BNCPurchasedEvent</td>
<td>아이템 구매완료</td>
</tr>
<tr>
<td>BNCShareInitiatedEvent</td>
<td>오브젝트 공유 시작</td>
</tr>
<tr>
<td>BNCShareCompletedEvent</td>
<td>오브젝트 공유 완료</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li>
<h3 id="bnclt">bnc.lt 또는 커스텀 링크 도메인 사용<a class="headerlink" href="#bnclt" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><em>bnc.lt link domain</em></p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">&quot;com.yourapp.your_activity&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- App Link your activity to Branch links--&gt;</span>
    <span class="nt">&lt;intent-filter</span> <span class="na">android:autoVerify=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.DEFAULT&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">&quot;https&quot;</span> <span class="na">android:host=</span><span class="s">&quot;bnc.lt&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">&quot;https&quot;</span> <span class="na">android:host=</span><span class="s">&quot;bnc.lt&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/activity&gt;</span>
</pre></div>

</li>
<li>
<p><em>custom link domain</em></p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">&quot;com.yourapp.your_activity&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- App Link your activity to Branch links--&gt;</span>
    <span class="nt">&lt;intent-filter</span> <span class="na">android:autoVerify=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.DEFAULT&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">&quot;https&quot;</span> <span class="na">android:host=</span><span class="s">&quot;your.app.com&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">&quot;https&quot;</span> <span class="na">android:host=</span><span class="s">&quot;your.app.com&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/activity&gt;</span>
</pre></div>

</li>
<li>
<p>아래의 커스텀 도메인을 <a href="https://dashboard.branch.io/settings/link">Branch Dashboard</a>에 설정된 값으로 변경합니다.</p>
<ul>
<li><code>your.app.com</code></li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="fabric-answers">브랜치와 Fabric Answers<a class="headerlink" href="#fabric-answers" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>answers-shim</code>의 임포트를 원하지 않을 경우</p>
<div class="codehilite"><pre><span></span>compile (&#39;io.branch.sdk.android:library:2.+&#39;) {
  exclude module: &#39;answers-shim&#39;
}
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_27">딥링크 라우팅<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>아래와 같은 특정 URL Scheme Path를 로딩합니다.</p>
<ul>
<li><code>$deeplink_path="content/123"</code></li>
<li><code>$android_deeplink_path="content/123"</code></li>
</ul>
</li>
<li>
<p><a href="#컨텐츠로의-이동">컨텐츠로의 이동</a>의 사용을 권장합니다.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.sdk.auto_link_path&quot;</span> <span class="na">android:value=</span><span class="s">&quot;content/123/, another/path/, another/path/*&quot;</span> <span class="nt">/&gt;</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_28">앱내의 딥링크 라우딩<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>앱내에서 HTML을 정상적으로 렌더링하기 위해서 <code>WebView</code>와 <code>ChromeTab</code>이 사용됩니다.</p>
</li>
<li>
<p><code>WebView</code>내의 브랜치 링크는 앱내로 라우팅 되지만 다른 컨텐츠들은 앱외부로 라우팅 됩니다.</p>
</li>
<li>
<p><code>Web View</code>로 브랜치 딥링크 열기</p>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
    <span class="n">WebView</span> <span class="n">webView</span> <span class="o">=</span> <span class="o">(</span><span class="n">WebView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">webView</span><span class="o">);</span>
    <span class="n">webView</span><span class="o">.</span><span class="na">setWebViewClient</span><span class="o">(</span><span class="k">new</span> <span class="n">BranchWebViewController</span><span class="o">(</span><span class="n">YOUR_DOMAIN</span><span class="o">,</span> <span class="n">MainActivity</span><span class="o">.</span><span class="na">class</span><span class="o">));</span> <span class="c1">//YOUR_DOMAIN example: appname.app.link</span>
    <span class="n">webView</span><span class="o">.</span><span class="na">loadUrl</span><span class="o">(</span><span class="n">URL_TO_LOAD</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BranchWebViewController</span> <span class="kd">extends</span> <span class="n">WebViewClient</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">myDomain_</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Class</span> <span class="n">activityToLaunch_</span><span class="o">;</span>

    <span class="n">BranchWebViewController</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="n">String</span> <span class="n">myDomain</span><span class="o">,</span> <span class="n">Class</span> <span class="n">activityToLaunch</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">myDomain_</span> <span class="o">=</span> <span class="n">myDomain</span><span class="o">;</span>
        <span class="n">activityToLaunch_</span> <span class="o">=</span> <span class="n">activityToLaunch</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">shouldOverrideUrlLoading</span><span class="o">(</span><span class="n">WebView</span> <span class="n">view</span><span class="o">,</span> <span class="n">WebResourceRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getUrl</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">myDomain_</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">Intent</span> <span class="n">i</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">view</span><span class="o">.</span><span class="na">getContext</span><span class="o">(),</span> <span class="n">activityToLaunch_</span><span class="o">);</span>
            <span class="n">i</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span> <span class="n">url</span><span class="o">);</span>
            <span class="n">i</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
            <span class="n">startActivity</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="c1">//finish(); if launching same activity</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">view</span><span class="o">.</span><span class="na">loadUrl</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">override</span> <span class="n">fun</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">:</span> <span class="n">Bundle</span><span class="o">?)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">)</span>
    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">)</span>
    <span class="n">val</span> <span class="n">webView</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">webView</span><span class="o">)</span> <span class="n">as</span> <span class="n">WebView</span>
    <span class="n">webView</span><span class="o">!!.</span><span class="na">webViewClient</span> <span class="o">=</span> <span class="n">BranchWebViewController</span><span class="o">(</span><span class="s">&quot;appname.app.link&quot;</span><span class="o">,</span> <span class="n">MainActivity2</span><span class="o">::</span><span class="n">class</span><span class="o">.</span><span class="na">java</span><span class="o">)</span>
    <span class="n">webView</span><span class="o">!!.</span><span class="na">loadUrl</span><span class="o">(</span><span class="n">URL_TO_LOAD</span><span class="o">)</span>
<span class="o">}</span>

<span class="n">inner</span> <span class="kd">class</span> <span class="nc">BranchWebViewController</span> <span class="n">internal</span> <span class="nf">constructor</span><span class="o">(</span><span class="kd">private</span> <span class="n">val</span> <span class="n">myDomain_</span><span class="o">:</span> <span class="n">String</span><span class="o">,</span> <span class="kd">private</span> <span class="n">val</span> <span class="n">activityToLaunch_</span><span class="o">:</span> <span class="n">Class</span><span class="o">&lt;*&gt;)</span> <span class="o">:</span> <span class="n">WebViewClient</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">onLoadResource</span><span class="o">(</span><span class="n">view</span><span class="o">:</span> <span class="n">WebView</span><span class="o">,</span> <span class="n">url</span><span class="o">:</span> <span class="n">String</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onLoadResource</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">url</span><span class="o">)</span>
    <span class="o">}</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">shouldOverrideUrlLoading</span><span class="o">(</span><span class="n">view</span><span class="o">:</span> <span class="n">WebView</span><span class="o">,</span> <span class="n">request</span><span class="o">:</span> <span class="n">WebResourceRequest</span><span class="o">):</span> <span class="n">Boolean</span> <span class="o">{</span>
        <span class="n">val</span> <span class="n">url</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">url</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">myDomain_</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">val</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Intent</span><span class="o">(</span><span class="n">view</span><span class="o">.</span><span class="na">context</span><span class="o">,</span> <span class="n">activityToLaunch_</span><span class="o">)</span>
            <span class="n">i</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span> <span class="n">url</span><span class="o">)</span>
            <span class="n">i</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
      <span class="c1">//finish(); if launching same activity</span>
            <span class="n">startActivity</span><span class="o">(</span><span class="n">i</span><span class="o">)</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">view</span><span class="o">.</span><span class="na">loadUrl</span><span class="o">(</span><span class="n">url</span><span class="o">)</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="kc">true</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
</li>
<li>
<p><code>Chrome Tabs</code>로 브랜치 딥링크 열기</p>
<ul>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">CustomTabsIntent</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomTabsIntent</span><span class="o">.</span><span class="na">Builder</span><span class="o">();</span>
<span class="n">CustomTabsIntent</span> <span class="n">customTabsIntent</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span> <span class="n">BRANCH_LINK_TO_LOAD</span><span class="o">);</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">launchUrl</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">BRANCH_LINK_TO_LOAD</span><span class="o">));</span>
<span class="c1">//finish(); if launching same activity</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">val</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">CustomTabsIntent</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
<span class="n">val</span> <span class="n">customTabsIntent</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">()</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch&quot;</span><span class="o">,</span> <span class="n">BRANCH_LINK_TO_LOAD</span><span class="o">)</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">&quot;branch_force_new_session&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
<span class="n">customTabsIntent</span><span class="o">.</span><span class="na">launchUrl</span><span class="o">(</span><span class="k">this</span><span class="nd">@MainActivity2</span><span class="o">,</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">BRANCH_LINK_TO_LOAD</span><span class="o">))</span>
<span class="c1">//finish() if launching same activity</span>
</pre></div>

</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="activity">딥링크 Activity의 종료<a class="headerlink" href="#activity" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>딥링크 Activity가 종료될때 알림을 받는 방법</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.sdk.auto_link_request_code&quot;</span> <span class="na">android:value=</span><span class="s">&quot;@integer/AutoDeeplinkRequestCode&quot;</span> <span class="nt">/&gt;</span>
</pre></div>

</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onActivityResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="kt">int</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onActivityResult</span><span class="o">(</span><span class="n">requestCode</span><span class="o">,</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>

    <span class="c1">// Checking if the previous activity is launched on branch Auto deep link.</span>
    <span class="k">if</span><span class="o">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="n">getResources</span><span class="o">().</span><span class="na">getInteger</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">integer</span><span class="o">.</span><span class="na">AutoDeeplinkRequestCode</span><span class="o">)){</span>
        <span class="c1">//Decide here where  to navigate  when an auto deep linked activity finishes.</span>
        <span class="c1">//For e.g. Go to HomeActivity or a  SignUp Activity.</span>
        <span class="n">Intent</span> <span class="n">i</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">CreditHistoryActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">startActivity</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">override</span> <span class="n">fun</span> <span class="nf">onActivityResult</span><span class="o">(</span><span class="n">requestCode</span><span class="o">:</span> <span class="n">Int</span><span class="o">,</span> <span class="n">resultCode</span><span class="o">:</span> <span class="n">Int</span><span class="o">,</span> <span class="n">data</span><span class="o">:</span> <span class="n">Intent</span><span class="o">?)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onActivityResult</span><span class="o">(</span><span class="n">requestCode</span><span class="o">,</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">data</span><span class="o">)</span>

    <span class="c1">// Checking if the previous activity is launched on branch Auto deep link.</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="n">resources</span><span class="o">.</span><span class="na">getInteger</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">integer</span><span class="o">.</span><span class="na">AutoDeeplinkRequestCode</span><span class="o">))</span> <span class="o">{</span>
        <span class="c1">//Decide here where  to navigate  when an auto deep linked activity finishes.</span>
        <span class="c1">//For e.g. Go to HomeActivity or a  SignUp Activity.</span>
        <span class="n">val</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Intent</span><span class="o">(</span><span class="n">applicationContext</span><span class="o">,</span> <span class="n">CreditHistoryActivity</span><span class="o">::</span><span class="n">class</span><span class="o">.</span><span class="na">java</span><span class="o">)</span>
        <span class="n">startActivity</span><span class="o">(</span><span class="n">i</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_29">브랜치링크에 대한 딥링크 테스트<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<p>브랜치 링크에 <code>?bnc_validate=true</code>를 추가한 뒤 (시뮬레이터가 아닌) 실제 기기에서 클릭하여 테스트 합니다. 예를들면 샘플 브랜치 링크 <code>"https://&lt;yourapp\&gt;.app.link/NdJ6nFzRbK"</code>에 대해서 <code>"https://&lt;yourapp\&gt;.app.link/NdJ6nFzRbK?bnc_validate=true"</code>링크를 클릭합니다.</p>
</li>
<li>
<h3 id="android-15">Android 15 이전 버전 지원<a class="headerlink" href="#android-15" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>Branch SDK 1.14.5</code>를 사용합니다.</p>
</li>
<li>
<p><code>onStart()</code>와 <code>onStop()</code>에 아래의 코드를 추가 합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">();</span>
    <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">()).</span><span class="na">initSession</span><span class="o">();</span>
<span class="o">}</span>

<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onStop</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onStop</span><span class="o">();</span>
    <span class="n">branch</span><span class="o">.</span><span class="na">closeSession</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">override</span> <span class="n">fun</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">()</span>
    <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initSession</span><span class="o">()</span>
<span class="o">}</span>

<span class="n">override</span> <span class="n">fun</span> <span class="nf">onStop</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onStop</span><span class="o">()</span>
    <span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">closeSession</span><span class="o">()</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="application">디폴트 Application 클래스 사용<a class="headerlink" href="#application" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>앱에 Application클래스가 없는 경우</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;application</span> <span class="na">android:name=</span><span class="s">&quot;io.branch.referral.BranchApp&quot;</span><span class="nt">&gt;</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="install-referrer">커스텀 Install Referrer 리시버<a class="headerlink" href="#install-referrer" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>안드로이드에서는 앱당 하나의 <code>BroadcastReceiver</code>만 허용됩니다.</p>
</li>
<li>
<p><code>AndroidManifest.xml</code>에 아래의 내용을 추가합니다.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;receiver</span> <span class="na">android:name=</span><span class="s">&quot;com.BRANCH SDK.CustomInstallListener&quot;</span> <span class="na">android:exported=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;intent-filter&gt;</span>
    <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;com.android.vending.INSTALL_REFERRER&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/receiver&gt;</span>
</pre></div>

</li>
<li>
<p><code>onReceive()</code>내에서 <code>io.branch.referral.InstallListener</code> 인스턴스를 생성합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">InstallListener</span> <span class="n">listener</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InstallListener</span><span class="o">();</span>
<span class="n">listener</span><span class="o">.</span><span class="na">onReceive</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">intent</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">val</span> <span class="n">listener</span> <span class="o">=</span> <span class="n">InstallListener</span><span class="o">()</span>
<span class="n">listener</span><span class="o">.</span><span class="na">onReceive</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">intent</span><span class="o">)</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="signing-certificate">Signing Certificate 생성<a class="headerlink" href="#signing-certificate" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Android <code>App Links</code> 딥링킹 지원을 위한 것입니다.</p>
</li>
<li>
<p>키스토어 파일의 디렉토리로 이동합니다.</p>
</li>
<li>
<p><code>keytool -list -v -keystore my-release-key.keystore</code>를 실행합니다.</p>
</li>
<li>
<p><code>AA:C9:D9:A5:E9:76:3E:51:1B:FB:35:00:06:9B:56:AC:FB:A6:28:CE:F3:D6:65:38:18:E3:9C:63:94:FB:D2:C1</code>와 같은 값이 생성될것입니다.</p>
</li>
<li>
<p>이 값을 <a href="https://dashboard.branch.io/link-settings">Branch Dashboard</a>에 복사합니다.</p>
</li>
</ul>
</li>
<li>
<h3 id="_30">인스톨 리스너를 통한 매칭<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>구글플레이에서 브랜치로의 <code>link_click_id</code>전달 기능을 활성화 시킵니다.</p>
</li>
<li>
<p>이를 통해 애트리뷰션과 Deferred Deep Linking의 정확도를 향상됩니다.</p>
</li>
<li>
<p>브랜치의 기본설정은 <code>1.5</code>초 동안 구글 플레이로부터 인스톨 레퍼러 수신을 대기 합니다.</p>
</li>
<li>
<p>필요에 따라서 해당 값을 최적화 할수 있습니다. (예. <code>0</code>, <code>5000</code>, <code>10000</code>)</p>
</li>
<li>
<p>Application클래스의 <code>getAutoInstance</code> (<a href="#브랜치-로딩">브랜치 로딩</a>) 앞에 추가합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">setPlayStoreReferrerCheckTimeout</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">setPlayStoreReferrerCheckTimeout</span><span class="o">(</span><span class="mi">5_000</span><span class="o">)</span>
</pre></div>

</li>
<li>
<p>테스트</p>
<div class="codehilite"><pre><span></span>adb shell am broadcast -a com.android.vending.INSTALL_REFERRER -n io.branch.androidexampledemo/io.branch.referral.InstallListener --es <span class="s2">&quot;referrer&quot;</span> <span class="s2">&quot;link_click_id=123&quot;</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="multidexing">Multidexing 활성화<a class="headerlink" href="#multidexing" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>참조할 라이브러리들이 추가되면서 Dex 제한을 초과하는 경우 <code>NoClassDefFoundError</code> 또는 <code>ClassNotFoundException</code>이 발생될 수 있습니다.</p>
</li>
<li>
<p><code>build.gradle</code>에 추가합니다.</p>
<div class="codehilite"><pre><span></span><span class="n">defaultConfig</span> <span class="o">{</span>
    <span class="n">multiDexEnabled</span> <span class="kc">true</span>
<span class="o">}</span>
</pre></div>

</li>
<li>
<p><code>Application class</code>에 다음의 코드를 추가해서 <code>MultiDexApplication</code>를 상속합니다.</p>
</li>
<li>
<p><em>Java</em></p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">attachBaseContext</span><span class="o">(</span><span class="n">Context</span> <span class="n">base</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">attachBaseContext</span><span class="o">(</span><span class="n">base</span><span class="o">);</span>
    <span class="n">MultiDex</span><span class="o">.</span><span class="na">install</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

</li>
<li>
<p><em>Kotlin</em></p>
<div class="codehilite"><pre><span></span><span class="n">override</span> <span class="n">fun</span> <span class="nf">attachBaseContext</span><span class="o">(</span><span class="n">base</span><span class="o">:</span> <span class="n">Context</span><span class="o">?)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">attachBaseContext</span><span class="o">(</span><span class="n">base</span><span class="o">)</span>
    <span class="n">MultiDex</span><span class="o">.</span><span class="na">install</span><span class="o">(</span><span class="k">this</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="invalidclassexception-classloadingerror-verificationerror">InvalidClassException, ClassLoadingError, 또는 VerificationError<a class="headerlink" href="#invalidclassexception-classloadingerror-verificationerror" title="Permanent link">&para;</a></h3>
<ul>
<li>종종 <code>Proguard</code>의 버그로 인해 발생합니다. 최신 버전의 Proguard를 사용하거나 <code>-dontoptimize</code>설정을 사용해서 Proguard의 최적화 기능을 비활성화 합니다.</li>
</ul>
</li>
<li>
<h3 id="answers-shim-proguard-warning-error">answers-shim모듈 관련 Proguard warning 또는 error<a class="headerlink" href="#answers-shim-proguard-warning-error" title="Permanent link">&para;</a></h3>
<ul>
<li><code>answers-shim</code>을 제외시킬때 종종 발생합니다. <code>-dontwarn com.crashlytics.android.answers.shim.**</code>을 <code>Proguard</code>파일에 추가합니다.</li>
</ul>
</li>
<li>
<h3 id="appindexing-proguard-warning-error">AppIndexing 모듈 관련 Proguard warning 또는 error<a class="headerlink" href="#appindexing-proguard-warning-error" title="Permanent link">&para;</a></h3>
<ul>
<li>브랜치 SDK는 Firebase의 컨텐츠 리스팅 기능과 새로운 Android Install Referrer Library지원을 위해서 Firebase의 앱 인덱싱 모듈과 안드로이드 인스톨 레퍼러 클래스들에 대한 선택적 의존성을 가지고 있습니다. 이로 인해 Progard 설정에 따라 Progard warning이 발생할 수 있습니다. 이 이슈를 해결하기 위해서는 다음의 내용을 Progard파일에 추가해야 합니다.</li>
</ul>
<p><code>-dontwarn com.google.firebase.appindexing.**</code>  <code>-dontwarn com.android.installreferrer.api.**</code></p>
</li>
<li>
<h3 id="play-services-ads-proguard-rule">Play Services Ads 모듈을 제외하는 Proguard rule<a class="headerlink" href="#play-services-ads-proguard-rule" title="Permanent link">&para;</a></h3>
</li>
<li>
<p>브랜치 SDK는 GAID 수집해서 매칭에 활용하기 위해 Paly Services Ads에 대한 선택적 의존성을 가지고 있습니다. Progard사용시에 GAID수집에 관련된 문제가 없도록 하기 위해서는 다음의 내용을 Progard파일에 추가 해야 합니다.</p>
<div class="codehilite"><pre><span></span>-keep class com.google.android.gms.ads.identifier.AdvertisingIdClient {
    com.google.android.gms.ads.identifier.AdvertisingIdClient$Info getAdvertisingIdInfo(android.content.Context);
}
-keep class com.google.android.gms.ads.identifier.AdvertisingIdClient$Info {
    java.lang.String getId();
    boolean isLimitAdTrackingEnabled();
}
</pre></div>

</li>
<li>
<h3 id="_31">이 링크를 열수 없다는 에러<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<ul>
<li>URI Scheme 리다이렉션이 실패할경우 발생합니다.</li>
<li><code>$deeplink_path</code>가 없도록 하거나 <code>AndroidManifest.xml</code>에서 허용된 <code>$deeplink_path</code>를 지정해야 합니다.</li>
</ul>
</li>
<li>
<h3 id="initstate_-session_stateinitialising"><code>initState_ == SESSION_STATE.INITIALISING</code> 상태에서 멈추어 있을 경우<a class="headerlink" href="#initstate_-session_stateinitialising" title="Permanent link">&para;</a></h3>
<ul>
<li>Branch SDK가 올바른 Application Context를 Activity에서 가져오지 못한 경우 종종 발생합니다. Branch 인스턴스에 접근할때 아래와 같이 싱글톤 클래스로 전달해서 문제를 해결할 수 있습니다.</li>
</ul>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">());</span>
</pre></div>

</li>
<li>
<h3 id="_32">최소 지원 안드로이드 버전<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>API Level 9(Android 2.3 GINGERBREAD)까지 앱에서 지원하기 위해서는 1.14.5를 사용해야 합니다. API Level 15(Android 4.0.3 ICE_CREAM_SANDWICH_MR1)까지 지원하기 위해서는 2.x버전을 사용해야 합니다. Branch SDK 3.x에서 지원하는 최소 Android API Level은 16(Android 4.1 JELLY_BEAN) 입니다.
</pre></div>


</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.b41f3d20.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../../assets/javascripts/lunr/lunr.jp.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="../../../js/router.js"></script>
      
        <script src="../../../js/events.js"></script>
      
        <script src="../../../js/modals.js"></script>
      
        <script src="../../../js/images.js"></script>
      
        <script src="../../../js/buttons.js"></script>
      
        <script src="../../../js/progress.js"></script>
      
        <script src="../../../js/tabs.js"></script>
      
        <script src="../../../js/languages.js"></script>
      
        <script src="../../../js/utils.js"></script>
      
        <script src="../../../js/main.js"></script>
      
    
    
      
        <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-134914613-1","bson-branch.github.io/docs/"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(a){a.host!=document.location.host&&a.addEventListener("click",function(){var e=a.getAttribute("data-md-action")||"follow";ga("send","event","outbound",e,a.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
  </body>
</html>