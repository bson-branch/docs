



<!doctype html>
<html lang="kr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="클립보드로 복사">
      
        <meta name="lang:clipboard.copied" content="클립보드에 복사됨">
      
        <meta name="lang:search.language" content="ja">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="검색어와 일치하는 문서가 없습니다">
      
        <meta name="lang:search.result.one" content="1개의 일치하는 문서">
      
        <meta name="lang:search.result.other" content="#개의 일치하는 문서">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Ios - Solutions Engineering (Korea)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../css/main.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-134914613-1", "bson-branch.github.io/docs/")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Solutions Engineering (Korea)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Solutions Engineering (Korea)
            </span>
            <span class="md-header-nav__topic">
              
                Ios
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="검색" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            검색어를 입력하세요
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Solutions Engineering (Korea)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Solutions Engineering (Korea)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../guides/branch/" title="Guides" class="md-nav__link">
      Guides
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../guides/migration/" title="Migration" class="md-nav__link">
      Migration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../" title="Translations" class="md-nav__link">
      Translations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../guides/data_feeds/" title="Data Feeds" class="md-nav__link">
      Data Feeds
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">목차</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="브랜치 연동" class="md-nav__link">
    브랜치 연동
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" title="브랜치 설정" class="md-nav__link">
    브랜치 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bundle-identifier" title="Bundle Identifier 설정" class="md-nav__link">
    Bundle Identifier 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associated-domains" title="Associated Domains 설정" class="md-nav__link">
    Associated Domains 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entitlements" title="Entitlements 설정" class="md-nav__link">
    Entitlements 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infoplist" title="Info.plist 설정" class="md-nav__link">
    Info.plist 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-prefix" title="App prefix 확인" class="md-nav__link">
    App prefix 확인
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" title="브랜치 설치" class="md-nav__link">
    브랜치 설치
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" title="브랜치 초기화" class="md-nav__link">
    브랜치 초기화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" title="딥링크 테스트" class="md-nav__link">
    딥링크 테스트
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" title="기능 구현" class="md-nav__link">
    기능 구현
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" title="컨텐츠 레퍼런스 생성" class="md-nav__link">
    컨텐츠 레퍼런스 생성
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" title="링크 레퍼런스 생성" class="md-nav__link">
    링크 레퍼런스 생성
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" title="딥링크 생성" class="md-nav__link">
    딥링크 생성
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" title="딥링크 공유" class="md-nav__link">
    딥링크 공유
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" title="딥링크 데이터 조회" class="md-nav__link">
    딥링크 데이터 조회
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" title="컨텐츠로의 이동" class="md-nav__link">
    컨텐츠로의 이동
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" title="컨텐츠 노출" class="md-nav__link">
    컨텐츠 노출
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" title="컨텐츠 트래킹" class="md-nav__link">
    컨텐츠 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" title="사용자 트래킹" class="md-nav__link">
    사용자 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" title="이벤트 트래킹" class="md-nav__link">
    이벤트 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#referral" title="Referral 처리" class="md-nav__link">
    Referral 처리
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" title="푸시알림 처리" class="md-nav__link">
    푸시알림 처리
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" title="앱 내에 딥링크 처리" class="md-nav__link">
    앱 내에 딥링크 처리
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apple-search-ads" title="Apple Search Ads 트래킹" class="md-nav__link">
    Apple Search Ads 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#100" title="100% 정확도 매칭 활성화" class="md-nav__link">
    100% 정확도 매칭 활성화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" title="사용자 트래킹 활성화 / 비활성화" class="md-nav__link">
    사용자 트래킹 활성화 / 비활성화
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_20" title="문제 해결" class="md-nav__link">
    문제 해결
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" title="브랜치 연동 테스트" class="md-nav__link">
    브랜치 연동 테스트
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aasa" title="AASA 파일의 다운로드 성공 여부 확인" class="md-nav__link">
    AASA 파일의 다운로드 성공 여부 확인
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-store" title="App Store 제출" class="md-nav__link">
    App Store 제출
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" title="앱이 열리지 않는 문제" class="md-nav__link">
    앱이 열리지 않는 문제
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" title="앱이이 데이터를 전달하지 않는 문제" class="md-nav__link">
    앱이이 데이터를 전달하지 않는 문제
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" title="인스톨 시뮬레이션" class="md-nav__link">
    인스톨 시뮬레이션
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" title="딥링크가 긴 문제" class="md-nav__link">
    딥링크가 긴 문제
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" title="샘플 앱" class="md-nav__link">
    샘플 앱
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" title="컨텐츠 속성 트래킹" class="md-nav__link">
    컨텐츠 속성 트래킹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" title="로깅 활성화" class="md-nav__link">
    로깅 활성화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" title="테스트키 사용" class="md-nav__link">
    테스트키 사용
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#universal-linking" title="Universal linking 재 활성화" class="md-nav__link">
    Universal linking 재 활성화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#branch-viewcontroller" title="Branch ViewController를 통한 딥링크 라우팅" class="md-nav__link">
    Branch ViewController를 통한 딥링크 라우팅
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" title="브랜치 링크에 대한 딥링크 테스트" class="md-nav__link">
    브랜치 링크에 대한 딥링크 테스트
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" title="딥링크가 네트워크 없이 브랜치로부터 온것인지 확인" class="md-nav__link">
    딥링크가 네트워크 없이 브랜치로부터 온것인지 확인
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" title="이메일 공유 옵션" class="md-nav__link">
    이메일 공유 옵션
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" title="동적으로 메시지 공유" class="md-nav__link">
    동적으로 메시지 공유
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Ios</h1>
                
                <h2 id="_1">브랜치 연동<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">iOS 11.2+에서의 불안정한 Universal Links 동작</p>
<p>기기들이 iOS 11.2이상의 버전으로 업데이트된 이후, 앱설치 이후 앱의 AASA파일이 이제는 더이상 신뢰성있게 기기에 다운로드 되지 않음을 확인 하였습니다. 이로 인해, Universal Links 클릭시 앱이 더이상 일관성 있게 열리지 않습니다. 앱을 URI scheme을 통해서 열기 위해서는 브랜치 링크에 <a href="/pages/links/integrate/#forced-redirections">forced uri redirect mode</a> 설정을 할 수 있습니다. 이 이슈에 대한 상세한 내용은 <a href="http://www.openradar.me/radar?id=4999496467480576">Apple Bug report</a>를 참고하시기 바랍니다.</p>
</div>
<ul>
<li>
<h3 id="_2">브랜치 설정<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><a href="/pages/dashboard/integrate/">Configure your dashboard</a>문서의 <code>Basic integration</code>섹션내의 설정들을 완료합니다.</p>
</li>
<li>
<p><code>I have an iOS app</code>이 활성화 합니다.</p>
<p><img alt="image" src="/img/pages/dashboard/ios.png" /></p>
</li>
</ul>
</li>
<li>
<h3 id="bundle-identifier">Bundle Identifier 설정<a class="headerlink" href="#bundle-identifier" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>앱의 Bundle Id가 <a href="https://dashboard.branch.io/settings/link">Branch Dashboard</a>와 동일해야 합니다.</p>
<p><img alt="image" src="/img/pages/apps/ios-bundle-id.png" /></p>
</li>
</ul>
</li>
<li>
<h3 id="associated-domains">Associated Domains 설정<a class="headerlink" href="#associated-domains" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dashboard.branch.io/settings/link">Branch Dashboard</a>의 링크 도메인들을 추가합니다.</li>
<li><code>-alternate</code> 도메인은 웹사이트에 연동된 <a href="/pages/web/integrate/">Web SDK</a>에서 Universal 링킹을 지원하기 위해 필요합니다.</li>
<li><code>test-</code> 도메인은 <a href="#use-test-key">테스트 키</a>를 사용할 경우 필요합니다.</li>
<li>
<p><a href="/pages/dashboard/integrate/#change-link-domain">커스텀 링크 도메인</a>을 사용하는 경우,  이전 링크 도메인, <code>-alternate</code>, 새로운 링크도메인을 추가해야 합니다.</p>
<p><img alt="image" src="/img/pages/apps/ios-entitlements.png" /></p>
</li>
</ul>
</li>
<li>
<h3 id="entitlements">Entitlements 설정<a class="headerlink" href="#entitlements" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Target내에서 entitlements 확인</p>
<p><img alt="image" src="/img/pages/apps/ios-package.png" /></p>
</li>
</ul>
</li>
<li>
<h3 id="infoplist">Info.plist 설정<a class="headerlink" href="#infoplist" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><a href="https://dashboard.branch.io/account-settings/app">Branch Dashboard</a>의 값들을 추가 합니다.</p>
<ul>
<li><code>branch_app_domain</code>에 라이브키에서 사용하는 도메인 추가</li>
<li><code>branch_key</code>에 현재 브랜치 키 추가</li>
<li>URI scheme을 <code>URL Types</code> -&gt; <code>Item 0</code> -&gt; <code>URL Schemes</code> 순서로 추가</li>
</ul>
<p><img alt="image" src="/img/pages/apps/ios-plist.png" /></p>
</li>
</ul>
</li>
<li>
<h3 id="app-prefix">App prefix 확인<a class="headerlink" href="#app-prefix" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer Account</a>에서 확인</p>
<p><img alt="image" src="/img/pages/apps/ios-team-id.png" /></p>
</li>
</ul>
</li>
<li>
<h3 id="_3">브랜치 설치<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Option 1: <a href="https://cocoapods.org/">CocoaPods</a></p>
<div class="codehilite"><pre><span></span>platform :ios, <span class="s1">&#39;8.0&#39;</span>

target <span class="s1">&#39;APP_NAME&#39;</span> <span class="k">do</span>
  <span class="c1"># if swift</span>
  use_frameworks!

<span class="hll">  pod <span class="s1">&#39;Branch&#39;</span>
</span>end
</pre></div>

<div class="codehilite"><pre><span></span>pod install <span class="o">&amp;&amp;</span> pod update
</pre></div>

</li>
<li>
<p>Option 2: <a href="https://github.com/Carthage/Carthage">Carthage</a></p>
<div class="codehilite"><pre><span></span>github <span class="s2">&quot;BranchMetrics/ios-branch-deep-linking&quot;</span>
</pre></div>

</li>
<li>
<p>Option 3: <a href="https://github.com/BranchMetrics/ios-branch-deep-linking/releases">소스코드</a>에서 참조되는 라이브러리와 함께 수동으로 설치</p>
<ul>
<li><code>Branch.framework</code>를 <code>Embedded Binaries</code>로 드랙앤드랍 (<code>Copy items if needed</code> 선택)</li>
<li><code>AdSupport</code>, <code>SafariServices</code>, <code>MobileCoreServices</code>, <code>CoreSpotlight</code>, <code>iAd</code>를 <code>Linked Frameworks</code>으로 임포트</li>
</ul>
<p><img alt="image" src="/img/pages/apps/ios-frameworks.png" /></p>
</li>
</ul>
</li>
<li>
<h3 id="_4">브랜치 초기화<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="kd">import</span> <span class="nc">UIKit</span>
<span class="hll"><span class="kd">import</span> <span class="nc">Branch</span>
</span>
<span class="kr">@UIApplicationMain</span>
<span class="kd">class</span> <span class="nc">AppDelegate</span><span class="p">:</span> <span class="bp">UIResponder</span><span class="p">,</span> <span class="bp">UIApplicationDelegate</span> <span class="p">{</span>

<span class="kd">var</span> <span class="nv">window</span><span class="p">:</span> <span class="bp">UIWindow</span><span class="p">?</span>

<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="kc">_</span> <span class="n">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="n">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="n">UIApplicationLaunchOptionsKey</span><span class="p">:</span> <span class="nb">Any</span><span class="p">]?)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
<span class="hll">  <span class="c1">// if you are using the TEST key</span>
</span><span class="hll">  <span class="n">Branch</span><span class="p">.</span><span class="n">setUseTestBranchKey</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</span><span class="hll">  <span class="c1">// listener for Branch Deep Link data</span>
</span><span class="hll">  <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">initSession</span><span class="p">(</span><span class="n">launchOptions</span><span class="p">:</span> <span class="n">launchOptions</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
</span><span class="hll">    <span class="c1">// do stuff with deep link data (nav to page, display content, etc)</span>
</span><span class="hll">    <span class="bp">print</span><span class="p">(</span><span class="n">params</span> <span class="k">as</span><span class="p">?</span> <span class="p">[</span><span class="nb">String</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">]</span> <span class="p">??</span> <span class="p">{})</span>
</span><span class="hll">  <span class="p">}</span>
</span>  <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="kc">_</span> <span class="n">app</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="n">open</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="p">[</span><span class="n">UIApplicationOpenURLOptionsKey</span> <span class="p">:</span> <span class="nb">Any</span><span class="p">]</span> <span class="p">=</span> <span class="p">[:])</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
<span class="hll">  <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">application</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">open</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">options</span><span class="p">)</span>
</span><span class="hll">  <span class="k">return</span> <span class="kc">true</span>
</span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="kc">_</span> <span class="n">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="k">continue</span> <span class="n">userActivity</span><span class="p">:</span> <span class="bp">NSUserActivity</span><span class="p">,</span> <span class="n">restorationHandler</span><span class="p">:</span> <span class="p">@</span><span class="n">escaping</span> <span class="p">([</span><span class="nb">Any</span><span class="p">]?)</span> <span class="p">-&gt;</span> <span class="nb">Void</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
  <span class="c1">// handler for Universal Links</span>
<span class="hll">  <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="k">continue</span><span class="p">(</span><span class="n">userActivity</span><span class="p">)</span>
</span><span class="hll">  <span class="k">return</span> <span class="kc">true</span>
</span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="kc">_</span> <span class="n">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="n">didReceiveRemoteNotification</span> <span class="n">userInfo</span><span class="p">:</span> <span class="p">[</span><span class="n">AnyHashable</span> <span class="p">:</span> <span class="nb">Any</span><span class="p">],</span> <span class="n">fetchCompletionHandler</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="p">@</span><span class="n">escaping</span> <span class="p">(</span><span class="n">UIBackgroundFetchResult</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// handler for Push Notifications</span>
<span class="hll">  <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">handlePushNotification</span><span class="p">(</span><span class="n">userInfo</span><span class="p">)</span>
</span><span class="hll"><span class="p">}</span>
</span></pre></div>

</li>
<li>
<p><em>Objective-C</em></p>
<div class="codehilite"><pre><span></span><span class="cp">#import &quot;AppDelegate.h&quot;</span>
<span class="hll"><span class="cp">#import &quot;Branch/Branch.h&quot;</span>
</span>
<span class="k">@interface</span> <span class="nc">AppDelegate</span> <span class="p">()</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">AppDelegate</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>
<span class="hll">  <span class="c1">// if you are using the TEST key</span>
</span><span class="hll">  <span class="p">[</span><span class="n">Branch</span> <span class="nl">setUseTestBranchKey</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
</span><span class="hll">  <span class="c1">// listener for Branch Deep Link data</span>
</span><span class="hll">  <span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">initSessionWithLaunchOptions</span><span class="p">:</span><span class="n">launchOptions</span> <span class="nl">andRegisterDeepLinkHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">params</span><span class="p">,</span> <span class="bp">NSError</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">    <span class="c1">// do stuff with deep link data (nav to page, display content, etc)</span>
</span><span class="hll">    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;%@&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>
</span><span class="hll">  <span class="p">}];</span>
</span>  <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">app</span> <span class="nf">openURL:</span><span class="p">(</span><span class="bp">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="nv">url</span> <span class="nf">options:</span><span class="p">(</span><span class="bp">NSDictionary</span><span class="o">&lt;</span><span class="n">UIApplicationOpenURLOptionsKey</span><span class="p">,</span><span class="kt">id</span><span class="o">&gt;</span> <span class="o">*</span><span class="p">)</span><span class="nv">options</span> <span class="p">{</span>
<span class="hll">  <span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">application</span><span class="p">:</span><span class="n">app</span> <span class="nl">openURL</span><span class="p">:</span><span class="n">url</span> <span class="nl">options</span><span class="p">:</span><span class="n">options</span><span class="p">];</span>
</span><span class="hll">  <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
</span><span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">continueUserActivity:</span><span class="p">(</span><span class="bp">NSUserActivity</span> <span class="o">*</span><span class="p">)</span><span class="nv">userActivity</span> <span class="nf">restorationHandler:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSArray</span> <span class="o">*</span> <span class="n">_Nullable</span><span class="p">))</span><span class="nv">restorationHandler</span> <span class="p">{</span>
  <span class="c1">// handler for Universal Links</span>
<span class="hll">  <span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">continueUserActivity</span><span class="p">:</span><span class="n">userActivity</span><span class="p">];</span>
</span><span class="hll">  <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
</span><span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didReceiveRemoteNotification:</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">userInfo</span> <span class="p">{</span>
  <span class="c1">// handler for Push Notifications</span>
<span class="hll">  <span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">handlePushNotification</span><span class="p">:</span><span class="n">userInfo</span><span class="p">];</span>
</span><span class="hll"><span class="p">}</span>
</span>
<span class="k">@end</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_5">딥링크 테스트<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dashboard.branch.io/marketing">Branch Dashboard</a>에서 딥링크를 생성합니다.</li>
<li>기기에서 앱을 삭제합니다.</li>
<li>컴파일후 기기에 앱을 설치합니다.</li>
<li><code>Apple Notes</code>에 딥링크를 붙여 넣습니다.</li>
<li>딥링크를 길게 누릅니다. (3D Touch가 아닙니다.)</li>
<li><code>Open in "앱 이름"</code>을 클릭해 앱을 실행합니다. (<a href="/img/pages/apps/ios-notes.png">예</a>)</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Deferred 딥링킹 테스트</p>
<p>Deferred 딥링킹은 클릭시 아직 앱이 설치되어 있지 않은 경우에 딥링킹을 수행하는 것입니다. 앱이 설치된 후 앱이 최초로 실행될때 클릭했던 브랜치 링크에 설정되었던 딥링크 데이터를 가져오게 됩니다. 이를 테스트 하기 위해서는 기기에서 앱을 삭제한 뒤, 브랜치 링크를 클릭하고, 앱을 수동으로 실행합니다. 앱이 오픈되면 앱내 해당 컨텐츠로 정상적으로 이동해야 합니다.</p>
</div>
</li>
</ul>
<h2 id="_6">기능 구현<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<ul>
<li>
<h3 id="_7">컨텐츠 레퍼런스 생성<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>Branch Universal Object</code>는 컨텐츠 또는 유저와 같이 공유하려는 것을 캡슐화 합니다.</p>
</li>
<li>
<p><a href="/pages/links/integrate/#universal-object">Universal Object properties</a>를 사용합니다.</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">buo</span> <span class="p">=</span> <span class="n">BranchUniversalObject</span><span class="p">.</span><span class="kd">init</span><span class="p">(</span><span class="n">canonicalIdentifier</span><span class="p">:</span> <span class="s">&quot;content/12345&quot;</span><span class="p">)</span>
<span class="n">buo</span><span class="p">.</span><span class="n">title</span> <span class="p">=</span> <span class="s">&quot;My Content Title&quot;</span>
<span class="n">buo</span><span class="p">.</span><span class="n">contentDescription</span> <span class="p">=</span> <span class="s">&quot;My Content Description&quot;</span>
<span class="n">buo</span><span class="p">.</span><span class="n">imageUrl</span> <span class="p">=</span> <span class="s">&quot;https://lorempixel.com/400/400&quot;</span>
<span class="n">buo</span><span class="p">.</span><span class="n">publiclyIndex</span> <span class="p">=</span> <span class="kc">true</span>
<span class="n">buo</span><span class="p">.</span><span class="n">locallyIndex</span> <span class="p">=</span> <span class="kc">true</span>
<span class="n">buo</span><span class="p">.</span><span class="n">contentMetadata</span><span class="p">.</span><span class="n">customMetadata</span><span class="p">[</span><span class="s">&quot;key1&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&quot;value1&quot;</span>
</pre></div>

</li>
<li>
<p><em>Objective-C</em></p>
<div class="codehilite"><pre><span></span><span class="n">BranchUniversalObject</span> <span class="o">*</span><span class="n">buo</span> <span class="o">=</span> <span class="p">[[</span><span class="n">BranchUniversalObject</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithCanonicalIdentifier</span><span class="p">:</span><span class="s">@&quot;content/12345&quot;</span><span class="p">];</span>
<span class="n">buo</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">@&quot;My Content Title&quot;</span><span class="p">;</span>
<span class="n">buo</span><span class="p">.</span><span class="n">contentDescription</span> <span class="o">=</span> <span class="s">@&quot;My Content Description&quot;</span><span class="p">;</span>
<span class="n">buo</span><span class="p">.</span><span class="n">imageUrl</span> <span class="o">=</span> <span class="s">@&quot;https://lorempixel.com/400/400&quot;</span><span class="p">;</span>
<span class="n">buo</span><span class="p">.</span><span class="n">publiclyIndex</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
<span class="n">buo</span><span class="p">.</span><span class="n">locallyIndex</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
<span class="n">buo</span><span class="p">.</span><span class="n">contentMetadata</span><span class="p">.</span><span class="n">customMetadata</span><span class="p">[</span><span class="s">@&quot;key1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">@&quot;value1&quot;</span><span class="p">;</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_8">링크 레퍼런스 생성<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>딥링크를 위해 분석용 속성들을 생성합니다.</p>
</li>
<li>
<p><a href="#create-deep-link">딥링크 생성</a> 과 <a href="#share-deep-link">딥링크 공유</a>에 사용됩니다.</p>
</li>
<li>
<p><a href="/pages/links/integrate/#configure-deep-links">Configure link data</a>와 커스텀 데이터를 사용합니다.</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">lp</span><span class="p">:</span> <span class="n">BranchLinkProperties</span> <span class="p">=</span> <span class="n">BranchLinkProperties</span><span class="p">()</span>
<span class="n">lp</span><span class="p">.</span><span class="n">channel</span> <span class="p">=</span> <span class="s">&quot;facebook&quot;</span>
<span class="n">lp</span><span class="p">.</span><span class="n">feature</span> <span class="p">=</span> <span class="s">&quot;sharing&quot;</span>
<span class="n">lp</span><span class="p">.</span><span class="n">campaign</span> <span class="p">=</span> <span class="s">&quot;content 123 launch&quot;</span>
<span class="n">lp</span><span class="p">.</span><span class="n">stage</span> <span class="p">=</span> <span class="s">&quot;new user&quot;</span>
<span class="n">lp</span><span class="p">.</span><span class="n">tags</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="s">&quot;three&quot;</span><span class="p">]</span>

<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;$desktop_url&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;http://example.com/desktop&quot;</span><span class="p">)</span>
<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;$ios_url&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;http://example.com/ios&quot;</span><span class="p">)</span>
<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;$ipad_url&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;http://example.com/ios&quot;</span><span class="p">)</span>
<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;$android_url&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;http://example.com/android&quot;</span><span class="p">)</span>
<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;$match_duration&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;2000&quot;</span><span class="p">)</span>

<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;custom_data&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;yes&quot;</span><span class="p">)</span>
<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;look_at&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;this&quot;</span><span class="p">)</span>
<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;nav_to&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;over here&quot;</span><span class="p">)</span>
<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;random&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="n">UUID</span><span class="p">.</span><span class="kd">init</span><span class="p">().</span><span class="n">uuidString</span><span class="p">)</span>
</pre></div>

</li>
<li>
<p><em>Objective-C</em></p>
<div class="codehilite"><pre><span></span><span class="n">BranchLinkProperties</span> <span class="o">*</span><span class="n">lp</span> <span class="o">=</span> <span class="p">[[</span><span class="n">BranchLinkProperties</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
<span class="n">lp</span><span class="p">.</span><span class="n">feature</span> <span class="o">=</span> <span class="s">@&quot;facebook&quot;</span><span class="p">;</span>
<span class="n">lp</span><span class="p">.</span><span class="n">channel</span> <span class="o">=</span> <span class="s">@&quot;sharing&quot;</span><span class="p">;</span>
<span class="n">lp</span><span class="p">.</span><span class="n">campaign</span> <span class="o">=</span> <span class="s">@&quot;content 123 launch&quot;</span><span class="p">;</span>
<span class="n">lp</span><span class="p">.</span><span class="n">stage</span> <span class="o">=</span> <span class="s">@&quot;new user&quot;</span><span class="p">;</span>
<span class="n">lp</span><span class="p">.</span><span class="n">tags</span> <span class="o">=</span> <span class="l">@[</span><span class="s">@&quot;one&quot;</span><span class="p">,</span> <span class="s">@&quot;two&quot;</span><span class="p">,</span> <span class="s">@&quot;three&quot;</span><span class="l">]</span><span class="p">;</span>

<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;$desktop_url&quot;</span> <span class="nl">withValue</span><span class="p">:</span> <span class="s">@&quot;http://example.com/desktop&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;$ios_url&quot;</span> <span class="nl">withValue</span><span class="p">:</span> <span class="s">@&quot;http://example.com/ios&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;$ipad_url&quot;</span> <span class="nl">withValue</span><span class="p">:</span> <span class="s">@&quot;http://example.com/ios&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;$android_url&quot;</span> <span class="nl">withValue</span><span class="p">:</span> <span class="s">@&quot;http://example.com/android&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;$match_duration&quot;</span> <span class="nl">withValue</span><span class="p">:</span> <span class="s">@&quot;2000&quot;</span><span class="p">];</span>

<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;custom_data&quot;</span> <span class="nl">withValue</span><span class="p">:</span> <span class="s">@&quot;yes&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;look_at&quot;</span> <span class="nl">withValue</span><span class="p">:</span> <span class="s">@&quot;this&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;nav_to&quot;</span> <span class="nl">withValue</span><span class="p">:</span> <span class="s">@&quot;over here&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;random&quot;</span> <span class="nl">withValue</span><span class="p">:</span> <span class="p">[[</span><span class="bp">NSUUID</span> <span class="n">UUID</span><span class="p">]</span> <span class="n">UUIDString</span><span class="p">]];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_9">딥링크 생성<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>앱내에서 딥링크 생성</p>
</li>
<li>
<p><a href="#create-content-reference">컨텐츠 레퍼런스 생성</a>이 필요함.</p>
</li>
<li>
<p><a href="#create-link-reference">링크 레퍼런스 생성</a>이 필요함.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/links">Branch Dashboard</a>에서 데이터를 확인합니다.</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">buo</span><span class="p">.</span><span class="n">getShortUrl</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">lp</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
  <span class="bp">print</span><span class="p">(</span><span class="n">url</span> <span class="p">??</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

</li>
<li>
<p><em>Objective-C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">buo</span> <span class="nl">getShortUrlWithLinkProperties</span><span class="p">:</span><span class="n">lp</span> <span class="nl">andCallback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span><span class="o">*</span> <span class="n">url</span><span class="p">,</span> <span class="bp">NSError</span><span class="o">*</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;@&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_10">딥링크 공유<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>유저가 선택한 채널정보가 태깅된 브랜치 딥링크를 생성합니다.</p>
</li>
<li>
<p><a href="#create-content-reference">컨텐츠 레퍼런스 생성</a>이 필요합니다.</p>
</li>
<li>
<p><a href="#create-link-reference">링크 레퍼런스 생성</a>이 필요합니다.</p>
</li>
<li>
<p><a href="/pages/links/integrate/">Deep Link Properties</a>이 필요합니다.</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">message</span> <span class="p">=</span> <span class="s">&quot;Check out this link&quot;</span>
<span class="n">buo</span><span class="p">.</span><span class="n">showShareSheet</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">lp</span><span class="p">,</span> <span class="n">andShareText</span><span class="p">:</span> <span class="n">message</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">activityType</span><span class="p">,</span> <span class="n">completed</span><span class="p">)</span> <span class="k">in</span>
  <span class="bp">print</span><span class="p">(</span><span class="n">activityType</span> <span class="p">??</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">buo</span> <span class="nl">showShareSheetWithLinkProperties</span><span class="p">:</span><span class="n">lp</span> <span class="nl">andShareText</span><span class="p">:</span><span class="s">@&quot;Super amazing thing I want to share!&quot;</span> <span class="nl">fromViewController</span><span class="p">:</span><span class="nb">self</span> <span class="nl">completion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span><span class="o">*</span> <span class="n">activityType</span><span class="p">,</span> <span class="kt">BOOL</span> <span class="n">completed</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;finished presenting&quot;</span><span class="p">);</span>
<span class="p">}];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_11">딥링크 데이터 조회<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>딥링크에 설정된 브랜치 데이터를 조회 합니다.</p>
</li>
<li>
<p>(Race Condition)을 방지하기 위해서, listener를 통해서 데이터를 수신하는 것을 권장합니다.</p>
</li>
<li>
<p><a href="/pages/links/integrate/#read-deep-links">deep link properties</a>가 반환됩니다.</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// listener (within AppDelegate didFinishLaunchingWithOptions)</span>
<span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">initSession</span><span class="p">(</span><span class="n">launchOptions</span><span class="p">:</span> <span class="n">launchOptions</span><span class="p">)</span> <span class="p">{</span> <span class="n">params</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
  <span class="bp">print</span><span class="p">(</span><span class="n">params</span> <span class="k">as</span><span class="p">?</span> <span class="p">[</span><span class="nb">String</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">]</span> <span class="p">??</span> <span class="p">{})</span>
<span class="p">}</span>

<span class="c1">// latest</span>
<span class="kd">let</span> <span class="nv">sessionParams</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">getLatestReferringParams</span><span class="p">()</span>

<span class="c1">// first</span>
<span class="kd">let</span> <span class="nv">installParams</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">getFirstReferringParams</span><span class="p">()</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">initSessionWithLaunchOptions</span><span class="p">:</span><span class="n">launchOptions</span>
                        <span class="nl">andRegisterDeepLinkHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">params</span><span class="p">,</span>
                                                     <span class="bp">NSError</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//Referring params</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Referring link params %@&quot;</span><span class="p">,</span><span class="n">params</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}];</span>

<span class="c1">// latest</span>
<span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">sessionParams</span> <span class="o">=</span> <span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="n">getLatestReferringParams</span><span class="p">];</span>

<span class="c1">// first</span>
<span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">installParams</span> <span class="o">=</span>  <span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="n">getFirstReferringParams</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_12">컨텐츠로의 이동<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>Branch.initSession()</code>내에서 처리합니다.</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// within AppDelegate application.didFinishLaunchingWithOptions</span>
<span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">initSession</span><span class="p">(</span><span class="n">launchOptions</span><span class="p">:</span> <span class="n">launchOptions</span><span class="p">)</span> <span class="p">{</span> <span class="n">params</span> <span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
  <span class="c1">// Option 1: read deep link data</span>
  <span class="k">guard</span> <span class="kd">let</span> <span class="nv">data</span> <span class="p">=</span> <span class="n">params</span> <span class="k">as</span><span class="p">?</span> <span class="p">[</span><span class="nb">String</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">]</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>

  <span class="c1">// Option 2: save deep link data to global model</span>
  <span class="n">SomeCustomClass</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">.</span><span class="n">branchData</span> <span class="p">=</span> <span class="n">data</span>

  <span class="c1">// Option 3: display data</span>
  <span class="kd">let</span> <span class="nv">alert</span> <span class="p">=</span> <span class="bp">UIAlertController</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;Deep link data&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="s">&quot;</span><span class="si">\(</span><span class="n">data</span><span class="si">)</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">preferredStyle</span><span class="p">:</span> <span class="p">.</span><span class="n">alert</span><span class="p">)</span>
  <span class="n">alert</span><span class="p">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;Okay&quot;</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="p">.</span><span class="k">default</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">))</span>
  <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">rootViewController</span><span class="p">?.</span><span class="n">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>

  <span class="c1">// Option 4: navigate to view controller</span>
  <span class="k">guard</span> <span class="kd">let</span> <span class="nv">options</span> <span class="p">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&quot;nav_to&quot;</span><span class="p">]</span> <span class="k">as</span><span class="p">?</span> <span class="nb">String</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
  <span class="k">switch</span> <span class="n">options</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s">&quot;landing_page&quot;</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">rootViewController</span><span class="p">?.</span><span class="n">present</span><span class="p">(</span> <span class="n">SecondViewController</span><span class="p">(),</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
      <span class="k">case</span> <span class="s">&quot;tutorial&quot;</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">rootViewController</span><span class="p">?.</span><span class="n">present</span><span class="p">(</span> <span class="n">SecondViewController</span><span class="p">(),</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
      <span class="k">case</span> <span class="s">&quot;content&quot;</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">rootViewController</span><span class="p">?.</span><span class="n">present</span><span class="p">(</span> <span class="n">SecondViewController</span><span class="p">(),</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
      <span class="k">default</span><span class="p">:</span> <span class="k">break</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// within AppDelegate application.didFinishLaunchingWithOptions</span>
<span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">initSessionWithLaunchOptions</span><span class="p">:</span><span class="n">launchOptions</span> <span class="nl">andRegisterDeepLinkHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">params</span><span class="p">,</span> <span class="bp">NSError</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Option 1: read deep link data</span>
  <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;%@&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>

  <span class="c1">// Option 2: save deep link data to global model</span>
  <span class="bp">NSUserDefaults</span> <span class="o">*</span><span class="n">defaults</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSUserDefaults</span> <span class="n">standardUserDefaults</span><span class="p">];</span>
  <span class="p">[</span><span class="n">defaults</span> <span class="nl">setObject</span><span class="p">:</span><span class="n">params</span><span class="p">.</span><span class="n">description</span> <span class="nl">forKey</span><span class="p">:</span><span class="s">@&quot;BranchData&quot;</span><span class="p">];</span>
  <span class="p">[</span><span class="n">defaults</span> <span class="n">synchronize</span><span class="p">];</span>

  <span class="c1">// Option 3: display data</span>
  <span class="bp">UIAlertController</span> <span class="o">*</span> <span class="n">alert</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIAlertController</span> <span class="nl">alertControllerWithTitle</span><span class="p">:</span><span class="s">@&quot;Title&quot;</span> <span class="nl">message</span><span class="p">:</span><span class="n">params</span><span class="p">.</span><span class="n">description</span> <span class="nl">preferredStyle</span><span class="p">:</span><span class="n">UIAlertControllerStyleAlert</span><span class="p">];</span>
  <span class="bp">UIAlertAction</span> <span class="o">*</span><span class="n">button</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIAlertAction</span> <span class="nl">actionWithTitle</span><span class="p">:</span><span class="s">@&quot;Deep Link Data&quot;</span> <span class="nl">style</span><span class="p">:</span><span class="n">UIAlertActionStyleDefault</span> <span class="nl">handler</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
  <span class="p">[</span><span class="n">alert</span> <span class="nl">addAction</span><span class="p">:</span><span class="n">button</span><span class="p">];</span>
  <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">window</span><span class="p">.</span><span class="n">rootViewController</span> <span class="nl">presentViewController</span><span class="p">:</span><span class="n">alert</span> <span class="nl">animated</span><span class="p">:</span><span class="nb">YES</span> <span class="nl">completion</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>

  <span class="c1">// Option 4: navigate to view controller</span>
  <span class="k">if</span> <span class="p">([</span><span class="n">params</span> <span class="nl">objectForKey</span><span class="p">:</span><span class="s">@&quot;navHere&quot;</span><span class="p">])</span> <span class="p">{</span>
    <span class="n">ViewController</span> <span class="o">*</span><span class="n">anotherViewController</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ViewController</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithNibName</span><span class="p">:</span><span class="s">@&quot;anotherViewController&quot;</span> <span class="nl">bundle</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">window</span><span class="p">.</span><span class="n">rootViewController</span> <span class="nl">presentViewController</span><span class="p">:</span><span class="n">anotherViewController</span> <span class="nl">animated</span><span class="p">:</span><span class="nb">YES</span> <span class="nl">completion</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_13">컨텐츠 노출<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>iOS Spotlight</code> 컨텐츠를 노출 시킵니다.</p>
</li>
<li>
<p><a href="#create-content-reference">컨텐츠 레퍼런스 생성</a>이 필요합니다.</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">buo</span><span class="p">.</span><span class="n">automaticallyListOnSpotlight</span> <span class="p">=</span> <span class="kc">true</span>
</pre></div>

</li>
<li>
<p><em>Objective-C</em></p>
<div class="codehilite"><pre><span></span><span class="n">buo</span><span class="p">.</span><span class="n">automaticallyListOnSpotlight</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_14">컨텐츠 트래킹<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>사용자의 컨텐츠를 조회를 트래킹합니다.</p>
</li>
<li>
<p><a href="#create-content-reference">컨텐츠 레퍼런스 생성</a>이 필요합니다.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/content">Branch Dashboard</a>에서 데이터를 확인합니다.</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">BranchEvent</span><span class="p">.</span><span class="n">standardEvent</span><span class="p">(.</span><span class="n">viewItem</span><span class="p">,</span> <span class="n">withContentItem</span><span class="p">:</span> <span class="n">buo</span><span class="p">).</span><span class="n">logEvent</span><span class="p">()</span>
</pre></div>

</li>
<li>
<p><em>Objective-C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">BranchEvent</span> <span class="nl">standardEvent</span><span class="p">:</span><span class="n">BranchStandardEventViewItem</span> <span class="nl">withContentItem</span><span class="p">:</span><span class="n">buo</span><span class="p">]</span> <span class="n">logEvent</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_15">사용자 트래킹<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>이벤트, 딥링크, Referral에 사용자에 대한 식별자(email, ID, UUID, etc)를 설정합니다. 사용자의 식별자 설정의 경우 꼭 사내 개인정보보호 관련부서와 사전 논의합니다.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/identities">Branch Dashboard</a>에서 데이터를 검증합니다.</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// login</span>
<span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">setIdentity</span><span class="p">(</span><span class="s">&quot;your_user_id&quot;</span><span class="p">)</span>

<span class="c1">// logout</span>
<span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">logout</span><span class="p">()</span>
</pre></div>

</li>
<li>
<p><em>Objective-C</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// login</span>
<span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">setIdentity</span><span class="p">:</span><span class="s">@&quot;your_user_id&quot;</span><span class="p">];</span>

<span class="c1">// logout</span>
<span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="n">logout</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_16">이벤트 트래킹<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>고객의 구매활동과 관련된 모든 이벤트들은 "Commerce" 클래스의 데이터아이템으로 분류됩니다.</p>
</li>
<li>
<p>사용자가 앱내 컨텐츠와 상호작용하는 것에 관련된 모든 이벤트들은 "Content" 클래스의 데이터아이템으로 분류됩니다.</p>
</li>
<li>
<p>사용자들이 앱사용을 진행하면서 발생하는 것에 관련된 모든 이벤트들은 "lifecycle" 클래스의 데이터아이템으로 분류됩니다.</p>
</li>
<li>
<p>아래의 표에 없는 커스텀 이벤트에 대한 트래킹은 <a href="https://docs.branch.io/pages/apps/v2event/#track-custom-events">Track Custom Events</a>문서를 참고하세요.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/liveview/events">Branch Dashboard</a>에서 데이터를 검증합니다.</p>
</li>
</ul>
</li>
</ul>
<p>Use the table below to quickly find the event you want to track.</p>
<table>
<thead>
<tr>
<th align="center">Event Name</th>
<th align="center">Event Category</th>
<th align="center">iOS</th>
<th align="center">Android</th>
<th align="center">API</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Add To Cart</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventAddToCart</td>
<td align="center">BRANCH_STANDARD_EVENT.ADD_TO_CART</td>
<td align="center">ADD_TO_CART</td>
</tr>
<tr>
<td align="center">Add To Wishlist</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventAddToWishlist</td>
<td align="center">BRANCH_STANDARD_EVENT.ADD_TO_WISHLIST</td>
<td align="center">ADD_TO_WISHLIST</td>
</tr>
<tr>
<td align="center">View Cart</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventViewCart</td>
<td align="center">BRANCH_STANDARD_EVENT.VIEW_CART</td>
<td align="center">VIEW_CART</td>
</tr>
<tr>
<td align="center">Initiate Purchase</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventInitiatePurchase</td>
<td align="center">BRANCH_STANDARD_EVENT.INITIATE_PURCHASE</td>
<td align="center">INITIATE_PURCHASE</td>
</tr>
<tr>
<td align="center">Add Payment Info</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventAddPaymentInfo</td>
<td align="center">BRANCH_STANDARD_EVENT.ADD_PAYMENT_INFO</td>
<td align="center">ADD_PAYMENT_INFO</td>
</tr>
<tr>
<td align="center">Purchase</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventPurchase</td>
<td align="center">BRANCH_STANDARD_EVENT.PURCHASE</td>
<td align="center">PURCHASE</td>
</tr>
<tr>
<td align="center">Spend Credits</td>
<td align="center"><a href="#track-commerce-events">Commerce Event</a></td>
<td align="center">BranchStandardEventSpendCredits</td>
<td align="center">BRANCH_STANDARD_EVENT.SPEND_CREDITS</td>
<td align="center">SPEND_CREDITS</td>
</tr>
<tr>
<td align="center">Search</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventSearch</td>
<td align="center">BRANCH_STANDARD_EVENT.SEARCH</td>
<td align="center">SEARCH</td>
</tr>
<tr>
<td align="center">View Item</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventViewItem</td>
<td align="center">BRANCH_STANDARD_EVENT.VIEW_ITEM</td>
<td align="center">VIEW_ITEM</td>
</tr>
<tr>
<td align="center">View Items</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventViewItems</td>
<td align="center">BRANCH_STANDARD_EVENT.VIEW_ITEMS</td>
<td align="center">VIEW_ITEMS</td>
</tr>
<tr>
<td align="center">Rate</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventRate</td>
<td align="center">BRANCH_STANDARD_EVENT.RATE</td>
<td align="center">RATE</td>
</tr>
<tr>
<td align="center">Share</td>
<td align="center"><a href="#track-content-events">Content Event</a></td>
<td align="center">BranchStandardEventShare</td>
<td align="center">BRANCH_STANDARD_EVENT.SHARE</td>
<td align="center">SHARE</td>
</tr>
<tr>
<td align="center">Complete Registration</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventCompleteRegistration</td>
<td align="center">BRANCH_STANDARD_EVENT.COMPLETE_REGISTRATION</td>
<td align="center">COMPLETE_REGISTRATION</td>
</tr>
<tr>
<td align="center">Complete Tutorial</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventCompleteTutorial</td>
<td align="center">BRANCH_STANDARD_EVENT.COMPLETE_TUTORIAL</td>
<td align="center">COMPLETE_TUTORIAL</td>
</tr>
<tr>
<td align="center">Achieve Level</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventAchieveLevel</td>
<td align="center">BRANCH_STANDARD_EVENT.ACHIEVE_LEVEL</td>
<td align="center">ACHIEVE_LEVEL</td>
</tr>
<tr>
<td align="center">Unlock Achievement</td>
<td align="center"><a href="#track-lifecycle-events">Lifecycle Event</a></td>
<td align="center">BranchStandardEventUnlockAchievement</td>
<td align="center">BRANCH_STANDARD_EVENT.UNLOCK_ACHIEVEMENT</td>
<td align="center">UNLOCK_ACHIEVEMENT</td>
</tr>
</tbody>
</table>
<ul>
<li>
<h3 id="referral">Referral 처리<a class="headerlink" href="#referral" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Referral 포인트는 <a href="https://dashboard.branch.io/referrals/rules">Branch Dashboard</a>의 Referral 룰에 의해서 주어집니다.</p>
</li>
<li>
<p><a href="https://dashboard.branch.io/referrals/analytics">Branch Dashboard</a>에서 데이터를 검증합니다.</p>
</li>
<li>
<p>Reward credits (리워드 크레딧)</p>
<ul>
<li><a href="/pages/dashboard/analytics/#referrals">Referral guide</a></li>
</ul>
</li>
<li>
<p>Redeem credits (크레딧 상환)</p>
<ul>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// option 1 (default bucket)</span>
<span class="kd">let</span> <span class="nv">amount</span> <span class="p">=</span> <span class="mi">5</span>
<span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">redeemRewards</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>

<span class="c1">// option 2</span>
<span class="kd">let</span> <span class="nv">bucket</span> <span class="p">=</span> <span class="s">&quot;signup&quot;</span>
<span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">redeemRewards</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">forBucket</span><span class="p">:</span> <span class="n">bucket</span><span class="p">)</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// option 1 (default bucket)</span>
<span class="n">NSInteger</span> <span class="n">amount</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">redeemRewards</span><span class="p">:</span><span class="n">amount</span><span class="p">];</span>

<span class="c1">// option 2</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">bucket</span> <span class="o">=</span> <span class="s">@&quot;signup&quot;</span><span class="p">;</span>
<span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">redeemRewards</span><span class="p">:</span><span class="n">amount</span> <span class="nl">forBucket</span><span class="p">:</span><span class="n">bucket</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<p>Load credits (크레딧 로딩)</p>
<ul>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">loadRewards</span> <span class="p">{</span> <span class="p">(</span><span class="n">changed</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
  <span class="c1">// option 1 (defualt bucket)</span>
  <span class="kd">let</span> <span class="nv">credits</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">getCredits</span><span class="p">()</span>

  <span class="c1">// option 2</span>
  <span class="kd">let</span> <span class="nv">bucket</span> <span class="p">=</span> <span class="s">&quot;signup&quot;</span>
  <span class="kd">let</span> <span class="nv">credits</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">getCreditsForBucket</span><span class="p">(</span><span class="n">bucket</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">loadRewardsWithCallback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">changed</span><span class="p">,</span> <span class="bp">NSError</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">changed</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// option 1 (defualt bucket)</span>
    <span class="n">NSInteger</span> <span class="n">credits</span> <span class="o">=</span> <span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="n">getCredits</span><span class="p">];</span>

    <span class="c1">// option 2</span>
    <span class="bp">NSString</span> <span class="o">*</span><span class="n">bucket</span> <span class="o">=</span> <span class="s">@&quot;signup&quot;</span><span class="p">;</span>
    <span class="n">NSInteger</span> <span class="n">credit</span> <span class="o">=</span> <span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">getCreditsForBucket</span><span class="p">:</span><span class="n">bucket</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<p>Load history (히스토리 로딩)</p>
<ul>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">getCreditHistory</span> <span class="p">{</span> <span class="p">(</span><span class="n">creditHistory</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
   <span class="bp">print</span><span class="p">(</span><span class="n">creditHistory</span> <span class="p">??</span> <span class="p">{})</span>
 <span class="p">}</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">getCreditHistoryWithCallback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSArray</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">creditHistory</span><span class="p">,</span> <span class="bp">NSError</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;%@&quot;</span><span class="p">,</span><span class="n">creditHistory</span><span class="p">);</span>
<span class="p">}];</span>
</pre></div>

</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="_17">푸시알림 처리<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>푸시알림 내의 브랜치 딥링크 트래킹을 지원합니다.</p>
</li>
<li>
<p><a href="#브랜치-초기화">브랜치 초기화</a>에 브랜치 푸시알림 핸들러를 추가합니다.</p>
</li>
<li>
<p>푸시알림 내의 <code>payload</code>에 브랜치 딥링크를 추가합니다.</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;aps&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;alert&quot;</span><span class="p">:</span> <span class="s2">&quot;Push notification with a Branch deep link&quot;</span><span class="p">,</span>
    <span class="nt">&quot;badge&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
  <span class="p">},</span>
<span class="hll">  <span class="nt">&quot;branch&quot;</span><span class="p">:</span> <span class="s2">&quot;https://example.app.link/u3fzDwyyjF&quot;</span>
</span><span class="p">}</span>
</pre></div>

<ul>
<li><code>https://example.app.link/u3fzDwyyjF</code>를 사용할 딥링크로 변경합니다.</li>
</ul>
</li>
<li>
<p><a href="#브랜치-초기화">브랜치 초기화</a>의 <code>initSession</code>에서 딥링크 데이터를 읽습니다.</p>
</li>
</ul>
</li>
<li>
<h3 id="_18">앱 내에 딥링크 처리<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>앱에서 동일한 앱으로의 딥링킹을 지원합니다.</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">handleDeepLink</span><span class="p">(</span><span class="n">withNewSession</span><span class="p">:</span> <span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="s">&quot;https://example.app.link/u3fzDwyyjF&quot;</span><span class="p">))</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">handleDeepLinkWithNewSession</span><span class="p">:[</span><span class="bp">NSURL</span> <span class="nl">URLWithString</span><span class="p">:</span><span class="s">@&quot;https://example.app.link/u3fzDwyyjF&quot;</span><span class="p">]];</span>
</pre></div>

</li>
</ul>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>앱내에서 새로운 딥링크를 처리하는 경우 현재의 세션 데이터가 지워지고, 새로 참조된 "open"으로 애트리뷰션이 됩니다.</p>
</div>
<ul>
<li>
<h3 id="apple-search-ads">Apple Search Ads 트래킹<a class="headerlink" href="#apple-search-ads" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Branch에서 Apple Search Ads 딥링킹 분석을 지원합니다.</p>
</li>
<li>
<p>분석정보를 전달해주는 Apple API로 지연문제로 인해서 브랜치에서의 분석정보가 수치가 애플보다 낮게 나오고 있습니다. 추가적으로 애플의 API는 광고에 대한 모든 정보를 항상 전달해주지 않기 때문에 브랜치에서는 가끔씩 일반적인 캠페인으로 보여질 수 있습니다.</p>
</li>
<li>
<p><a href="#브랜치-초기화">브랜치 초기화</a>에서 <code>initSession</code> 앞에 추가합니다.</p>
<ul>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">delayInitToCheckForSearchAds</span><span class="p">()</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="n">delayInitToCheckForSearchAds</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<p>가짜 캠펜인 파라메터로 테스트 (상용/릴리즈용 빌드에서는 테스트 하지 마세요.)</p>
<ul>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">setAppleSearchAdsDebugMode</span><span class="p">()</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="n">setAppleSearchAdsDebugMode</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="100">100% 정확도 매칭 활성화<a class="headerlink" href="#100" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>SFSafariViewController</code>를 사용해서 애트리뷰션 매칭의 성공률을 향상시킬수 있습니다.</p>
</li>
<li>
<p>사파리브라우저에서의 클릭만 100% 매칭이 가능하기 때문에 100% 매칭이라는 것이 약간 잘못 이해될 수도 있습니다. 브랜치에서 내부적으로 분석한 바에 의하면 케이스에 따라 다를수 있지만 사파리를 통한 클릭이 50-75% 정도입니다. 예를들어 Facebook, Gmail, Chrome에서의 클릭은 100%매칭이 되지는 않지만, 매칭정확도 향상에 도움을 주고 있습니다.</p>
</li>
<li>
<p>커스텀 도메인을 사용할 경우 <code>branch_app_domain</code> 문자열 키를 Info.plist에 추가하면 커스텀 도메인에 100% 매칭을 활성화 할 수 있습니다.</p>
</li>
<li>
<p>디폴트로, <code>SafariServices.framework</code>이 앱에 임포트 하면, 쿠키가반 매칭이 iOS 9 와 iOS 10에서 활성화 되며, 앱에서 app.link 서브도메인 사용하거나 <code>branch_app_domain</code>을 Info.plist에 설정한 경우 쿠키기반 매칭을 SDK를 통해서 비활성화 할 수 있습니다.</p>
</li>
<li>
<p><a href="#initialize-branch">Initialize Branch</a><code>initSession</code></p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">disableCookieBasedMatching</span><span class="p">()</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="n">disableCookieBasedMatching</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_19">사용자 트래킹 활성화 / 비활성화<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<p>If you need to comply with a user's request to not be tracked for GDPR purposes, or otherwise determine that a user should not be tracked, utilize this field to prevent Branch from sending network requests. This setting can also be enabled across all users for a particular link, or across your Branch links.</p>
<ul>
<li>
<p><em>Swift</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">setTrackingDisabled</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Branch</span> <span class="nl">setTrackingDisabled</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
</pre></div>

</li>
</ul>
<p>You can choose to call this throughout the lifecycle of the app. Once called, network requests will not be sent from the SDKs. Link generation will continue to work, but will not contain identifying information about the user. In addition, deep linking will continue to work, but will not track analytics for the user.</p>
</li>
</ul>
<h2 id="_20">문제 해결<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h2>
<ul>
<li>
<h3 id="_21">브랜치 연동 테스트<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<p>Test your Branch Integration by calling <code>validateSDKIntegration</code> in your AppDelegate. Check your Xcode logs to make sure all the SDK Integration tests pass. Make sure to comment out or remove <code>validateSDKIntegration</code> in your production build.</p>
<ul>
<li>
<p><em>Swift</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">validateSDKIntegration</span><span class="p">()</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="n">validateSDKIntegration</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="aasa">AASA 파일의 다운로드 성공 여부 확인<a class="headerlink" href="#aasa" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Connect a test device to your MAC</p>
</li>
<li>
<p>Uninstall the app</p>
</li>
<li>
<p>View the device's console output in the MAC console</p>
</li>
<li>
<p>Install your app and let it launch</p>
</li>
<li>
<p>Filter the console output by "swcd"</p>
</li>
<li>
<p>If the AASA downloaded sucessfully, you'll see something like the screenshot below (If the AASA did not download, you must uninstall the app, restart the device, and then reinstall the app)</p>
</li>
</ul>
<p><img alt="image" src="https://cdn.branch.io/branch-assets/1520880422940-og_image.png" /></p>
</li>
<li>
<h3 id="app-store">App Store 제출<a class="headerlink" href="#app-store" title="Permanent link">&para;</a></h3>
<ul>
<li>Need to select <code>app uses IDFA or GAID</code> when publishing your app (for better deep link matching)</li>
</ul>
</li>
<li>
<h3 id="_22">앱이 열리지 않는 문제<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Double check <a href="#integrate-branch">Integrate Branch</a></p>
</li>
<li>
<p>Investigate if the device disabled universal links (<a href="#re-enable-universal-linking">Re-enable universal linking</a>)</p>
</li>
<li>
<p>Investigate if it is a link related issue (<a href="/pages/links/integrate/#deep-links-do-not-open-app">Deep links do not open app</a>)</p>
</li>
<li>
<p>Use <a href="https://branch.io/resources/universal-links/">Universal links validator</a></p>
</li>
<li>
<p>Use <a href="https://branch.io/resources/aasa-validator/">AASA validator</a></p>
</li>
<li>
<p>Use <a href="#test-deep-link">Test deep link</a></p>
</li>
</ul>
</li>
<li>
<h3 id="_23">앱이이 데이터를 전달하지 않는 문제<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>See if issue is related to <a href="#app-not-opening">App not opening</a></p>
</li>
<li>
<p>Investigate Branch console logs (<a href="#enable-logging">Enable logging</a>)</p>
</li>
</ul>
</li>
<li>
<h3 id="_24">인스톨 시뮬레이션<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Delete your app</p>
</li>
<li>
<p>iPhone Device -&gt; Settings -&gt; Privacy -&gt; Advertising -&gt; Reset Advertising Identifier -&gt; Reset Identifier</p>
</li>
<li>
<p>Add <code>Branch.setDebug(true)</code> before <code>initSession</code> (<a href="#initialize-branch-features">Initialize Branch Features</a>)</p>
</li>
<li>
<p>Click on a deep link to navigate to your <code>$fallback_url</code> because your app is not installed</p>
</li>
<li>
<p>Install your app</p>
</li>
<li>
<p>Open your app</p>
</li>
<li>
<p>Read from <code>params</code> within <code>initSession</code> for <code>+is_first_session = true</code></p>
</li>
</ul>
</li>
<li>
<h3 id="_25">딥링크가 긴 문제<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Happens whenever the app cannot make a connection to the Branch servers</p>
</li>
<li>
<p>The long deep links will still open the app and pass data</p>
</li>
</ul>
</li>
<li>
<h3 id="_26">샘플 앱<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><a href="https://github.com/BranchMetrics/ios-branch-deep-linking/tree/master/Branch-TestBed-Swift">Swift testbed</a></p>
</li>
<li>
<p><a href="https://github.com/BranchMetrics/ios-branch-deep-linking/tree/master/Branch-TestBed">Objective C testbed</a></p>
</li>
</ul>
</li>
<li>
<h3 id="_27">컨텐츠 속성 트래킹<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Used for <a href="#track-content">Track content</a></p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>BNCRegisterViewEvent</td>
<td>User viewed the object</td>
</tr>
<tr>
<td>BNCAddToWishlistEvent</td>
<td>User added the object to their wishlist</td>
</tr>
<tr>
<td>BNCAddToCartEvent</td>
<td>User added object to cart</td>
</tr>
<tr>
<td>BNCPurchaseInitiatedEvent</td>
<td>User started to check out</td>
</tr>
<tr>
<td>BNCPurchasedEvent</td>
<td>User purchased the item</td>
</tr>
<tr>
<td>BNCShareInitiatedEvent</td>
<td>User started to share the object</td>
</tr>
<tr>
<td>BNCShareCompletedEvent</td>
<td>User completed a share</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li>
<h3 id="_28">로깅 활성화<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Use the Branch test key instead of the live key</p>
</li>
<li>
<p>Add before <code>initSession</code> <a href="#initialize-branch">Initialize Branch</a></p>
</li>
<li>
<p>Remove before releasing to production</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">setDebug</span><span class="p">()</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="n">setDebug</span><span class="p">];</span>
</pre></div>

</li>
<li>
<p>Make sure <code>OS_ACTIVITY_MODE</code> is not disabled (<a href="https://stackoverflow.com/a/39503602/2690774">link</a>)</p>
</li>
</ul>
</li>
<li>
<h3 id="_29">테스트키 사용<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Use the Branch <code>test key</code> instead of the <code>live key</code></p>
</li>
<li>
<p>Add before <code>initSession</code> <a href="#initialize-branch">Initialize Branch</a></p>
</li>
<li>
<p>Update <code>branch_key</code> in your <code>Info.plist</code> to a dictionary (<a href="https://github.com/BranchMetrics/ios-branch-deep-linking/blob/master/Branch-TestBed/Branch-TestBed/Branch-TestBed-Info.plist#L58-L63">example</a>)</p>
</li>
<li>
<p>The <code>test key</code> of your app must match the <code>test key</code> of your deep link</p>
</li>
<li>
<p>Remove before releasing to production</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">setUseTestBranchKey</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Branch</span> <span class="nl">setUseTestBranchKey</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="universal-linking">Universal linking 재 활성화<a class="headerlink" href="#universal-linking" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Apple allows users to disable universal linking on a per app per device level on iOS 9 and iOS 10 (fixed in iOS 11)</p>
</li>
<li>
<p>Use <a href="#test-deep-link">Test deep link</a> to re-enable universal linking on the device</p>
</li>
</ul>
</li>
<li>
<h3 id="branch-viewcontroller">Branch ViewController를 통한 딥링크 라우팅<a class="headerlink" href="#branch-viewcontroller" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Add before <code>initSession</code> <a href="#initialize-branch">Initialize Branch</a></p>
</li>
<li>
<p>Recommend to <a href="#navigate-to-content">Navigate to content</a> instead</p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">registerDeepLinkController</span><span class="p">(</span><span class="n">ViewController</span><span class="p">(),</span> <span class="n">forKey</span><span class="p">:</span> <span class="s">&quot;my-key&quot;</span><span class="p">,</span> <span class="n">withPresentation</span><span class="p">:</span> <span class="p">.</span><span class="n">optionShow</span><span class="p">)</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[[</span><span class="n">Branch</span> <span class="n">getInstance</span><span class="p">]</span> <span class="nl">registerDeepLinkController</span><span class="p">:</span><span class="n">customViewController</span> <span class="nl">forKey</span><span class="p">:</span><span class="s">@&quot;my-key&quot;</span><span class="nl">withPresentation</span><span class="p">:</span><span class="n">BNCViewControllerOptionShow</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_30">브랜치 링크에 대한 딥링크 테스트<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h3>
<p>Append <code>?bnc_validate=true</code> to any of your app's Branch links and click it on your mobile device (not the Simulator!) to start the test. For instance, to validate a link like: <code>"https://&lt;yourapp\&gt;.app.link/NdJ6nFzRbK"</code> click on: <code>"https://&lt;yourapp\&gt;.app.link/NdJ6nFzRbK?bnc_validate=true"</code></p>
</li>
<li>
<h3 id="_31">딥링크가 네트워크 없이 브랜치로부터 온것인지 확인<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<ul>
<li>Use for Universal Linking if you want to get the <code>true/false</code> response from <code>Branch.getInstance().continue(userActivity)</code> within <code>continueUserActivity</code> without a Branch network call</li>
<li>Use only if you have a custom link domain</li>
<li>
<p>Add <code>branch_universal_link_domains</code> to your <code>info.plist</code> with an array of your link domain from your <a href="https://dashboard.branch.io/settings/link">Branch Dashboard</a></p>
<p><img alt="image" src="/img/pages/apps/ios-link-domains.png" /></p>
</li>
</ul>
</li>
<li>
<h3 id="_32">이메일 공유 옵션<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Change the way your deep links behave when shared to email</p>
</li>
<li>
<p>Needs a <a href="#share-deep-link">Share deep link</a></p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;$email_subject&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;Your Awesome Deal&quot;</span><span class="p">)</span>
<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;$email_html_header&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;&lt;style&gt;your awesome CSS&lt;/style&gt;</span><span class="se">\n</span><span class="s">Or Dear Friend,&quot;</span><span class="p">)</span>
<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;$email_html_footer&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;Thanks!&quot;</span><span class="p">)</span>
<span class="n">lp</span><span class="p">.</span><span class="n">addControlParam</span><span class="p">(</span><span class="s">&quot;$email_html_link_text&quot;</span><span class="p">,</span> <span class="n">withValue</span><span class="p">:</span> <span class="s">&quot;Tap here&quot;</span><span class="p">)</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;$email_subject&quot;</span> <span class="nl">withValue</span><span class="p">:</span><span class="s">@&quot;This one weird trick.&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;$email_html_header&quot;</span> <span class="nl">withValue</span><span class="p">:</span><span class="s">@&quot;&lt;style&gt;your awesome CSS&lt;/style&gt;</span><span class="se">\n</span><span class="s">Or Dear Friend,&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;$email_html_footer&quot;</span> <span class="nl">withValue</span><span class="p">:</span><span class="s">@&quot;Thanks!&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">lp</span> <span class="nl">addControlParam</span><span class="p">:</span><span class="s">@&quot;$email_html_link_text&quot;</span> <span class="nl">withValue</span><span class="p">:</span><span class="s">@&quot;Tap here&quot;</span><span class="p">];</span>
</pre></div>

</li>
</ul>
</li>
<li>
<h3 id="_33">동적으로 메시지 공유<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Change the message you share based on the source the users chooses</p>
</li>
<li>
<p>Needs a <a href="#share-deep-link">Share deep link</a></p>
</li>
<li>
<p><em>Swift 3</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// import delegate</span>
<span class="kd">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="bp">UITableViewController</span><span class="p">,</span> <span class="n">BranchShareLinkDelegate</span>

<span class="kd">func</span> <span class="nf">branchShareLinkWillShare</span><span class="p">(</span><span class="kc">_</span> <span class="n">shareLink</span><span class="p">:</span> <span class="n">BranchShareLink</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// choose shareSheet.activityType</span>
  <span class="n">shareLink</span><span class="p">.</span><span class="n">shareText</span> <span class="p">=</span> <span class="s">&quot;</span><span class="si">\(</span><span class="n">shareLink</span><span class="p">.</span><span class="n">linkProperties</span><span class="p">.</span><span class="n">channel</span><span class="si">)</span><span class="s">&quot;</span>
<span class="p">}</span>
</pre></div>

</li>
<li>
<p><em>Objective C</em></p>
<div class="codehilite"><pre><span></span><span class="c1">// import delegate</span>
<span class="k">@interface</span> <span class="nc">ViewController</span> <span class="p">()</span> <span class="o">&lt;</span><span class="n">BranchShareLinkDelegate</span><span class="o">&gt;</span>

<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nl">branchShareLinkWillShare</span><span class="p">:(</span><span class="n">BranchShareLink</span><span class="o">*</span><span class="p">)</span><span class="n">shareLink</span> <span class="p">{</span>
  <span class="c1">// choose shareSheet.activityType</span>
  <span class="n">shareLink</span><span class="p">.</span><span class="n">shareText</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@&quot;@%&quot;</span><span class="p">,</span> <span class="n">shareLink</span><span class="p">.</span><span class="n">linkProperties</span><span class="p">.</span><span class="n">channel</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>

</li>
</ul>
</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.245445c6.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../../assets/javascripts/lunr/lunr.ja.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="../../../js/router.js"></script>
      
        <script src="../../../js/events.js"></script>
      
        <script src="../../../js/modals.js"></script>
      
        <script src="../../../js/images.js"></script>
      
        <script src="../../../js/buttons.js"></script>
      
        <script src="../../../js/progress.js"></script>
      
        <script src="../../../js/tabs.js"></script>
      
        <script src="../../../js/languages.js"></script>
      
        <script src="../../../js/utils.js"></script>
      
        <script src="../../../js/main.js"></script>
      
    
  </body>
</html>